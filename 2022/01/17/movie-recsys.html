<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Movie Recommender | reconb</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Movie Recommender" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Jupyter notebook database." />
<meta property="og:description" content="Jupyter notebook database." />
<link rel="canonical" href="https://nb.recohut.com/2022/01/17/movie-recsys.html" />
<meta property="og:url" content="https://nb.recohut.com/2022/01/17/movie-recsys.html" />
<meta property="og:site_name" content="reconb" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-17T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Movie Recommender" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-17T00:00:00-06:00","datePublished":"2022-01-17T00:00:00-06:00","description":"Jupyter notebook database.","headline":"Movie Recommender","mainEntityOfPage":{"@type":"WebPage","@id":"https://nb.recohut.com/2022/01/17/movie-recsys.html"},"url":"https://nb.recohut.com/2022/01/17/movie-recsys.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://nb.recohut.com/feed.xml" title="reconb" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">reconb</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Movie Recommender</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-01-17T00:00:00-06:00" itemprop="datePublished">
        Jan 17, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      28 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/recohut/notebook/tree/master/_notebooks/2022-01-17-movie-recsys.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/recohut/notebook/master?filepath=_notebooks%2F2022-01-17-movie-recsys.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/recohut/notebook/blob/master/_notebooks/2022-01-17-movie-recsys.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Frecohut%2Fnotebook%2Fblob%2Fmaster%2F_notebooks%2F2022-01-17-movie-recsys.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-01-17-movie-recsys.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install -q -U kaggle
<span class="o">!</span>pip install --upgrade --force-reinstall --no-deps kaggle
<span class="o">!</span>mkdir ~/.kaggle
<span class="o">!</span>cp /content/drive/MyDrive/kaggle.json ~/.kaggle/
<span class="o">!</span>chmod <span class="m">600</span> ~/.kaggle/kaggle.json
<span class="o">!</span>kaggle datasets download -d rounakbanik/the-movies-dataset
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting kaggle
  Downloading https://files.pythonhosted.org/packages/99/33/365c0d13f07a2a54744d027fe20b60dacdfdfb33bc04746db6ad0b79340b/kaggle-1.5.10.tar.gz (59kB)
     |████████████████████████████████| 61kB 2.8MB/s 
Building wheels for collected packages: kaggle
  Building wheel for kaggle (setup.py) ... done
  Created wheel for kaggle: filename=kaggle-1.5.10-cp37-none-any.whl size=73269 sha256=88eaf6afc105c888ac21555e344c4939bcbf57228092b455530d7dc0690a40fa
  Stored in directory: /root/.cache/pip/wheels/3a/d1/7e/6ce09b72b770149802c653a02783821629146983ee5a360f10
Successfully built kaggle
Installing collected packages: kaggle
  Found existing installation: kaggle 1.5.10
    Uninstalling kaggle-1.5.10:
      Successfully uninstalled kaggle-1.5.10
Successfully installed kaggle-1.5.10
Downloading the-movies-dataset.zip to /content
 99% 225M/228M [00:03&lt;00:00, 73.2MB/s]
100% 228M/228M [00:03&lt;00:00, 73.5MB/s]
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>unzip the-movies-dataset.zip
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Archive:  the-movies-dataset.zip
  inflating: credits.csv             
  inflating: keywords.csv            
  inflating: links.csv               
  inflating: links_small.csv         
  inflating: movies_metadata.csv     
  inflating: ratings.csv             
  inflating: ratings_small.csv       
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;movies_metadata.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/usr/local/lib/python3.7/dist-packages/IPython/core/interactiveshell.py:2718: DtypeWarning: Columns (10) have mixed types.Specify dtype option on import or set low_memory=False.
  interactivity=interactivity, compiler=compiler, result=result)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>adult</th>
      <th>belongs_to_collection</th>
      <th>budget</th>
      <th>genres</th>
      <th>homepage</th>
      <th>id</th>
      <th>imdb_id</th>
      <th>original_language</th>
      <th>original_title</th>
      <th>overview</th>
      <th>popularity</th>
      <th>poster_path</th>
      <th>production_companies</th>
      <th>production_countries</th>
      <th>release_date</th>
      <th>revenue</th>
      <th>runtime</th>
      <th>spoken_languages</th>
      <th>status</th>
      <th>tagline</th>
      <th>title</th>
      <th>video</th>
      <th>vote_average</th>
      <th>vote_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>False</td>
      <td>{'id': 10194, 'name': 'Toy Story Collection', ...</td>
      <td>30000000</td>
      <td>[{'id': 16, 'name': 'Animation'}, {'id': 35, '...</td>
      <td>http://toystory.disney.com/toy-story</td>
      <td>862</td>
      <td>tt0114709</td>
      <td>en</td>
      <td>Toy Story</td>
      <td>Led by Woody, Andy's toys live happily in his ...</td>
      <td>21.9469</td>
      <td>/rhIRbceoE9lR4veEXuwCC2wARtG.jpg</td>
      <td>[{'name': 'Pixar Animation Studios', 'id': 3}]</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>1995-10-30</td>
      <td>373554033.0</td>
      <td>81.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>Released</td>
      <td>NaN</td>
      <td>Toy Story</td>
      <td>False</td>
      <td>7.7</td>
      <td>5415.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>False</td>
      <td>NaN</td>
      <td>65000000</td>
      <td>[{'id': 12, 'name': 'Adventure'}, {'id': 14, '...</td>
      <td>NaN</td>
      <td>8844</td>
      <td>tt0113497</td>
      <td>en</td>
      <td>Jumanji</td>
      <td>When siblings Judy and Peter discover an encha...</td>
      <td>17.0155</td>
      <td>/vzmL6fP7aPKNKPRTFnZmiUfciyV.jpg</td>
      <td>[{'name': 'TriStar Pictures', 'id': 559}, {'na...</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>1995-12-15</td>
      <td>262797249.0</td>
      <td>104.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}, {'iso...</td>
      <td>Released</td>
      <td>Roll the dice and unleash the excitement!</td>
      <td>Jumanji</td>
      <td>False</td>
      <td>6.9</td>
      <td>2413.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>False</td>
      <td>{'id': 119050, 'name': 'Grumpy Old Men Collect...</td>
      <td>0</td>
      <td>[{'id': 10749, 'name': 'Romance'}, {'id': 35, ...</td>
      <td>NaN</td>
      <td>15602</td>
      <td>tt0113228</td>
      <td>en</td>
      <td>Grumpier Old Men</td>
      <td>A family wedding reignites the ancient feud be...</td>
      <td>11.7129</td>
      <td>/6ksm1sjKMFLbO7UY2i6G1ju9SML.jpg</td>
      <td>[{'name': 'Warner Bros.', 'id': 6194}, {'name'...</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>1995-12-22</td>
      <td>0.0</td>
      <td>101.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>Released</td>
      <td>Still Yelling. Still Fighting. Still Ready for...</td>
      <td>Grumpier Old Men</td>
      <td>False</td>
      <td>6.5</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>False</td>
      <td>NaN</td>
      <td>16000000</td>
      <td>[{'id': 35, 'name': 'Comedy'}, {'id': 18, 'nam...</td>
      <td>NaN</td>
      <td>31357</td>
      <td>tt0114885</td>
      <td>en</td>
      <td>Waiting to Exhale</td>
      <td>Cheated on, mistreated and stepped on, the wom...</td>
      <td>3.85949</td>
      <td>/16XOMpEaLWkrcPqSQqhTmeJuqQl.jpg</td>
      <td>[{'name': 'Twentieth Century Fox Film Corporat...</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>1995-12-22</td>
      <td>81452156.0</td>
      <td>127.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>Released</td>
      <td>Friends are the people who let you be yourself...</td>
      <td>Waiting to Exhale</td>
      <td>False</td>
      <td>6.1</td>
      <td>34.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>False</td>
      <td>{'id': 96871, 'name': 'Father of the Bride Col...</td>
      <td>0</td>
      <td>[{'id': 35, 'name': 'Comedy'}]</td>
      <td>NaN</td>
      <td>11862</td>
      <td>tt0113041</td>
      <td>en</td>
      <td>Father of the Bride Part II</td>
      <td>Just when George Banks has recovered from his ...</td>
      <td>8.38752</td>
      <td>/e64sOI48hQXyru7naBFyssKFxVd.jpg</td>
      <td>[{'name': 'Sandollar Productions', 'id': 5842}...</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>1995-02-10</td>
      <td>76578911.0</td>
      <td>106.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>Released</td>
      <td>Just When His World Is Back To Normal... He's ...</td>
      <td>Father of the Bride Part II</td>
      <td>False</td>
      <td>5.7</td>
      <td>173.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simple-Recommender">Simple Recommender<a class="anchor-link" href="#Simple-Recommender"> </a></h2><p>The choice of a metric is arbitrary. One of the simplest metrics that can be used is the movie rating. However, this suffers from a variety of disadvantages. In the first place, the movie rating does not take the popularity of a movie into consideration. Therefore, a movie rated 9 by 100,000 users will be placed below a movie rated 9.5 by 100 users.
This is not desirable as it is highly likely that a movie watched and rated only by 100 people caters to a very specific niche and may not appeal as much to the average person as the former.</p>
<p>It is also a well-known fact that as the number of voters increase, the rating of a movie normalizes and it approaches a value that is reflective of the movie's quality and popularity with the general populace. To put it another way, movies with very few ratings are not very reliable. A movie rated 10/10 by five users doesn't necessarily mean that it's a good movie.</p>
<p>Therefore, what we need is a metric that can, to an extent, take into account the movie rating and the number of votes it has garnered (a proxy for popularity). This would give a greater preference to a blockbuster movie rated 8 by 100,000 users over an art house movie rated 9 by 100 users.</p>
<p>Fortunately, we do not have to brainstorm a mathematical formula for the metric. As the title of this chapter states, we are building an IMDB top 250 clone. Therefore, we shall use IMDB's weighted rating formula as our metric. Mathematically, it can be represented as follows:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAEVCAYAAAC/oGCNAAAgAElEQVR4Ae2d6Y8sy1G3308g/gD4jmQEQkIGNQL5IzKYVQKEsITYfY0XxBnACMxuriVsgYFmsDGLWWz23XPYjbENNrYBA8MAF7B92dcDB7PvS72KzIzMyMyo7uqZ6pnq7qevzu3urMzIiCeyqn6VnVXz/wZeEIAABCAAAQhAAAIQgMDiCfy/xXuIgxCAAAQgAAEIQAACEIDAgHBnEEAAAhCAAAQgAAEIQOAACCDcDyBJuAgBCEAAAhCAAAQgAAGEO2MAAhCAAAQgAAEIQAACB0AA4X4AScJFCEAAAhCAAAQgAAEIINwZAxCAAAQgAAEIQAACEDgAAgj3A0gSLkIAAhCAAAQgAAEIQADhzhiAAAQgAAEIQAACEIDAARBAuB9AknARAhCAAAQgAAEIQAACCHfGAAQgAAEIQAACEIAABA6AAML9AJKEixCAAAQgAAEIQAACEEC4MwYgAAEIQAACEIAABCBwAAQQ7geQJFyEAAQgAAEIQAACEIAAwp0xAAEIQAACEIAABCAAgQMggHA/gCThIgQgAAEIQAACEIAABBDujAEIQAACEIAABCAAAQgcAAGE+wEkCRchAAEIQAACEIAABCCAcGcMQAACEIAABCAAAQhA4AAIINwPIEm4CAEIQAACEIAABCAAAYQ7YwACEIAABCAAAQhAAAIHQADhfgBJwkUIQAACEIAABCAAAQgg3BkDEIAABCAAAQhAAAIQOAACCPcDSBIuQgACEIAABCAAAQhAAOHOGIDAwgj83//93/Cv//qvw3//938Hz/7nf/5n+Jd/+ZdBynndHgHhL9z/93//N3QqOfmnf/qn6rts1zzdnmf0BAEIQAACp0oA4X6qmSfuRRL4x3/8x+F1r3vd8PznP3949NFHh6urq+G3fuu3hg/90A8dfuM3fmP493//90X6fWxOiUB/85vfHHLwnOc8Z/ju7/7u4Ru+4RuG5z3vecMXf/EXDz/2Yz82vPjFLx4+7/M+bzg/P+fC6tgGAPFAAAIQWCgBhPtCE4Nbp0ngwYMHwzd90zcN3/It3zI8/elPH37+539++J3f+Z3hIz7iI4bXv/71YSb+NMncbtR/9Ed/NHznd37n8P3f//3DE5/4xOF7vud7ht///d8fXv7yl4fvP/qjPxq+f/VXf/Xw6Z/+6cOf//mf84vI7aaI3iAAAQicJAGE+0mmnaCXSuAf/uEfhl/8xV8MM+7Pfe5zh8cee2z4sz/7s+FLvuRLhj/+4z8e/uu//muprh+VXyLEX/Oa1wzf8R3fMXz4h3/48La3vS1cNImQf9KTnjT81V/91fCf//mfw1d91VcNn/IpnzLIBRdLmY5qCBAMBCAAgUUSQLgvMi04dcoEZJnGU57ylOG7vuu7hne84x1hNlcEopTzuj0Cjz/++PAFX/AFw5d+6ZcGoS5iXvLw7Gc/O4j2v//7vw9LZZ75zGcOcsGla+Fvz0N6ggAEIACBUyOAcD+1jBPvrARkllVuHp3rJeJPZm/f+73fe3jVq14V1rTLEo1v+7ZvC+uo5+rntu0IJ4ntNsSt9nPTGfBf/dVfHZ761KcOr3zlKwe590DuMfjsz/7s4Zu/+ZvDDam//Mu/PDzrWc8avv7rv3748R//8erG1dvmu60/5W+ZyGcZu7Zsmx22QwACEIDA3RJAuN8tf3o/YAKybOVP/uRPhp/7uZ8LM7BzhCIiSmZvP/IjPzIIRBGEL33pS8OM75wXCHP4am2Ib7J0RP/Jk1asSJfZaVmj/9u//dvDf/zHf9ims36Wm3d/8zd/cxDRfdNfKH7qp35q+IAP+IDhL/7iL4JQFwH/jGc8Y3jTm94UYpOlNCLcZRZexPxSlzGJX3/zN38z/MEf/EH4BUdyI//+7u/+bpAYZQwv1fdZBwfGIAABCBwBAYT7ESSREO6GgAhEuTlRbmScU1SLqJIbUl/96leHJ5uIcJzT/ty05JGIP/iDPzg87WlPGz7pkz5p+JzP+ZywRv8Lv/ALAx9Zpy+PUvzDP/zDQdbty5ITiXHul9iU+wGkXxGjN+1D7in4yZ/8ySBq5YJKhK/cfyCz7/L94cOHwy/90i+FpwD95V/+5eJmrkWYyxj6oi/6opAPeSrOC1/4wvDrjazdlwuP3/u93xte9KIXhacXzZ0P7EEAAhCAwPwEEO7zM8XiCRAQ0faKV7wi/JPZyrmXG4g9mTE+hOe3ywy6iNqP/diPHT7qoz4qLC25vLwcfuEXfiE8GefLv/zLB1kvLrPuIhi//du/fRChO+UlN4H+9V//9ZSq4YJAZr7lBlL51eKmLxH+csGhL/k1of214N/+7d8Wt4RJLvKEmwh1eXTlD//wD4dfIeQGW3m8qJTJEqC3vOUtIT7JhzxBR4Q+LwhAAAIQWDYBhPuy84N3CyUg65u/5mu+Zvj1X//1hXq4m1siSP/0T/+0WjIhFw8iXv/2b/924/PjpZ4sUfnAD/zAMLMrolFeIiDPzs6Gj//4jx/e+MY3Btsi2D/5kz85LDeZ4qGI/ze84Q1TqoZ6YlsE6JJ/oZgSjDCVCwW5QLQXD9L2n//5n8OFSXsRIduknVy0yLPlhbss77HtZbsIdfllRG58luVMv/IrvxJm3UXI84IABCAAgWUTQLgvOz94t1ACL3nJS4av/dqvDaJ2oS7u5JaIuG/91m8NS0xEhKsYf/vb3x6WwYiAHHvJLw4i+t/jPd4j/AIhQlF+LZBlK09+8pOHe/fuhWeeS3sR1DIrL3/ASPrY9pKlKj/7sz+7rVqwe3FxEQSpXVu/teFCK0gMkhN5spDcnGxzIsuo5Pn+sr19yS8AIsSf8IQnhL8FIGvb25fckyH3TehLftGQi1D52wG8IAABCEBg2QQQ7svOD94tlMDnfu7nhr+c6c3siiBd4r9NKGX2VgThl33Zl4W/1Cpi/K1vfWtYViEz6JvEsMzwyl8WlT9UJOJPnr7yQz/0Q2FmXezJGnd9iR0pE+EuYnTbS27O/emf/ult1cIyHPkjSXKjqHdBsMR8qE+bgpNfG172speFJS6SI7npVi4a5a/pei+5gJJHWL7P+7zP8Gu/9mtelaFd3iO5lhl6+SuwvCAAAQhAYNkEEO7Lzg/eLZCACK5P/dRPDcLdikRZViI3Xsr67iX+kxs2RbR5L4lDlmaIyJabFV/84heHGxnl0ZTbbvKUGVu5AfKjP/qjw6y9rKkW8fgxH/MxYbZY7OpL+hHb8tdh23Xusk36EoGq/+QvlN6/fz9/l3LPH1ljL6JdLhxsTqS+zPzLjcRLzIncsGv9VU76Lhc3soRFbiqVJS7yK4/cDG2Zal15F0Evv2jIGnZZ0+69pD/bp3yW9fDyF2B5QQACEIDAsgkg3JedH7xbIAGZNZY1wiJA7UtEoohMEbFL/Pfyl788rJm2PtvPIuDkiSkyc/2Jn/iJYYmMFXi2rv0s4lOWxOhfehWx/9rXvnZ413d91/D4R/urhNiTG0jX63VYXmPtyPIaWRYjz6zXf/LcdHlKjX6Xd7EtN+3alywnefTRR0M967P8GiA3qy4xH+KTxONdiNjY5ILrB37gB8KYk+VAm5Ytya8dH/zBHxyWJ8lTcdqXLH2S+zNafjKW5f4AXhCAAAQgsGwCCPdl5wfvFkhAhOEjjzwSlixYkSgCTGZ35YbVJf4TIdcKNsUrcciFhzzuUIT7z/zMz4R10LJUY2yWXtqKKJeZ7Hd7t3cLf4RIhL/0Ie3f6Z3eKQh3WYqh4l36kT9YJIJVBL59ydp4efSlzPrrP1kWIrPo+l3eZaa+XWYj4lYuBmQm3+ZEfJeciKBdYk7komfTMiR5Eo88clJm2/WiRp6FL5y9l1zAiACX2XN5ko++hIkwkwtLWR9v+Un/MuP+9Kc/XavzDgEIQAACCyWAcF9oYnBr2QRktlTEjojdY3iJaJb10zLzqgJfhJ/ctCjP+rZPJtF4RaBLXRGV7/Iu7xIe/yiz5vJUFxHn7/zO7xwEs9iRtdfyEpEoa6llOc2mCwLtQ9a4y0XAtpcIWZlZ/4qv+IqNQnibnaVs1wspWaf+fd/3fSEHsjxGLj7k4kTEuxXf6rc8AUh+WZE/4KV/XEmWMgl/sSUXZe1MvORBLnrk+fe8IAABCEBg2QQQ7svOD94tlICII1lvrI8+XKibk92Sp4/I7LYsw9AZYBGKMpP9vd/7vWHtfmtMBKAI+4/7uI8b3uu93isslRGRL+JdxPa7v/u7h7ZiV2a8RYzK7PuHfdiHDbLkY8prqnAX2/IEmk/4hE/YuvRkSr93XUd+oZBfFuQPW8nyFvuS9fpyw277i4XUEQ4ySy/PzpdZd1kbLzcOy4WUjFkR8e1L7suQ+wPkGfu8IAABCEBg2QSOULhfDevValilf+vLfSfg4XBxr/S3uncxjD84b9++LMj+g4vhbLUazu7fBY00Bs6v9gZElofILKWsFz6Wlwr2Nh4Rg95L6ssvDjJjKzPyMgOsS2JEoIsgfPOb3xwEptiQpUSyFEaWGcns/pSXzBrL4wunvN70pjeFm4ZFuI7FMsXOkuoIt5a/V9b6LPGLsJdHQ8o/Wes/xuT1r399uACTP87ECwIQgAAElk3gWsL94f2zLIxdgXy5HmoB24jbqYJO7IgAv4YAuzoXMb0ebu1UtE2opu3Kq33fh8DVPO3D9qZhHdmfDReyhNmLu8qniOxUNxlVvzOjexfDG0I+zQWSuTjz85zG3J4upGSZiCw7kNnkMUG0idHYNhFYcjFwKEtwVETqu8Yl30WoWzEvyzi+8iu/MvxRoKl/pVM4y78pL/nVQHLyjd/4jbP9FVC5AJEn1shSE29pyhS/7qqOXETJOBK/x8ao5Ojrvu7rwi8jU5Yu3VUs9AsBCEAAApHAtYR7aKqCrBJhsmVcMAVBtoOQUgG3u/Ac92FviU88Rmf4Hzwc5L84O28vKMovBKNtr+l0FNCrYW67m9yJObPxmTHhXEjF+rVwD/YDTy1/ODyUi4B0IWfHg46R+kIxebgtJ5sC2bJNhKms3ZY/FS83D3qP55M6+pLPY+JJ68i7LI+QJQ3emnJbTz6LTftP7Guf2t+UPlu7+/guy2dkRleeFy7Li0Qwzv0SkS0z+tLH7/7u77qCX3lp3+13Ldd3Eb2SX7mYGrshVOvKe5sDidPmRMS0frft7uKzjFn5y7Qy3uTihBcEIAABCCyfwPWF++AvR8hCqhNpIlpbQbcvQNE3K/DcnmYUdjFuFZpub8OwhdlWf0fMBoG+wwXRiJmbFydh7V0ouL+AJP4ys962EZ5e2aqZnc9Mu/Em4aQLpe7i8uahigWZzRShKEs0RDTqS/4kvZTJM8hF8IlQledry18m3TZ7LE9AkRljsTH2EuEnM/OvfvWrw1/WlOUo0p8sKZH1zLIGWsSmLDORp4jIWvR9COUx/7xyiVtYyHpt7yLHa3OdMsmJrLOXmzj14kd4SX5keY6s19fHSYo/soa+fZ687VdmoeUpLPJ0HVmCM/YSQS73B7zuda8LeZen88g/6Uv+GNUb3/jGYENsyV9DlTGhy4rGbO67XJhIXDKGD+UXnn0zwT4EIACBpROYWbiLYF4P67CsoRGxl+vbW++8QUDahESxPc/FxCTx7MwYiz/Rj+uuB594kWID38vnzb9yeMJdytbncTlUfdFyNay7CxHv1woJJF1AusJ9GEK/exLuHkaZcRWhLDeuyvPH5Q8RyUyzPPHk/d7v/bobCqW+iGr9J39cR57sIiJRy1qBJ8JXxKnMLMszu5/97GcHsSh/jVRu/JSng/zIj/xIEPHyvHl5BriKWM/nYy8TgSoXDLKs6dM+7dOGZzzjGYMs25Gn4cgf0pI14PYlORHmwl+fLS8z0yLMbU7szLnMzItIf8UrXhH6kOfgv/KVrwwz2h/yIR8yPO1pTws35MpNpU960pPCxQBi2VLnMwQgAAEITCFwc+FuBJYIUBFgUYha4T4y256ErF3LXJaTxPXM7ayru2a6WTOfBbmZ0a1mddt+uxtZVQzqmmobi2Btt6d6WwSiCvQ6JrXlXEA0/iunKHJVyKqP6f3eS4YX5PXf6rf2IXViWRTS2sa5oXYro2Z4pfp1bKVO7E/9SWvfZeykGK1wF069nRSDGW9iXZna9qXXJNybNnb73J9FjL31rW8dXvWqVwUBJ0/rkCezyPO1RTDKTLm+RBzK8guZ8ZQbOeWfzArLOnCxoWWydtuKRGkj9WTGWC4G5JnoIvRFnMpfKxXhLzO68iSXz/iMzwgz/SJAT/Uls/0/8RM/Mcgz0z/rsz5r+MzP/Mwwwyxc5cJKfqGwr3e84x1hFl74y3IoufCRiyJZfiNlki8R/iLi9SUXRtKH/NIhz0OXp7mo8P+gD/qgcCEnfkjb93//9w9PhTnliynlxjsEIAABCOxG4AbCvZlhFQGWBJKKqSy+nNn2WMeI1SD8GmHnCvJ6ZroThCKr9UbGLNiS6KuEdSzrBF8Sktn3JNJzPRXTxpb2V9r4SYj1TMz5AsDEnZoqw9yvLvtolop0HLVrT0gbMa6+xvZ1/308epFgfdeO4vuoH1U82o/YS587nt5se7nJtfAoon385uXkt8lV5bX2nS90moughnXVdsMXEWwyc/7EJz4xCHj5LuJdZuHtUhn5LEsVZOZX/siQ/EVREXzySEOZTZcy+SfPPJelMyre5V2XhMjFnCy/kFliEepPeMITwh8rkllmWSojQl6eGnJoN1ZuwLvzJuElF0kiqp/5zGcGIS58ZF23PAJRcmNf8oeONCdyESS/nHz+539+eIqQ5ONlL3tZyIm9CJM+JM/SVn4BkXdhLktkJAfyqEr5pUSWTL3ne75nWMojOeMFAQhAAAIQ2IXAbMJdxJ6KwfomwofDxXkzoxsEpBGBKqCswJog5CXQUTFsbbXiWxqmPrPPgVoU86WsFaz+rG+MV0XpGP7UthKJI208HhprvhiJ/YT4mzLZ4grplqlXL4n7wiBYizfVOv1ELxKn0e3qT4pX+sj5qZk+vL+OT6OJhvP/YzyNsM42crXmQ7K9tV7T7IZfRZDL0oonP/nJw1ve8pYwqy5//EbWm1sBLWJSZl1lhleesiL/5A/rvOhFLwp/7VPLZLa8FXmyTZZlyJIMEYNiR8Ti+77v+4ZZXVmbLX8g6ilPeUqwJctBptxcecPQF91clq7IjLsIeGEh4lxm0dunqchFkuZEZsilnVwEycWYcJdt0l7y177kwkv+ONfb3va2sMxG7muQx19K/uUZ6nL/guRMfpGRX0g8G61NvkMAAhCAAASUwM2Fu6wtroRYEcVhdvRyXQR96lVndHXph/dEkFaQx++t0HUEoyfInbIoBBt7SbRmv9oZV1fUehcPite8N2JchWgtkGN9P1ZPhHplYsPhosK/WQse+sqCu71QUf/H+pm6XYW7XNyJLXPRVvl6NaxHRHbNJPmT/VY/mvfE3M7SNzX28lXEuQhlWdssM61y46iIbLkJcptQk8cObrs5VZyWm1if85znDI8++mh4VKG0kz+GJMtxZC22LJ2RJTe6xl3W2bcCdS/BL9io3Lwry2TkZlH5dUJEtbDSXzI814WZ3AS87eZUbfvUpz415EGEvdiWGX7Ji+RHhL8szXnuc58b1tuLmN/Ut9rkHQIQgAAEIKAEZhDuZ8OZLntQq1mkXvSz7ZVQ0wbtexKQWcT5QlTXmlfCLIjrWpBHkWzFor/22RXzxjV/e+uraWA/dqJ/TCSPxOpcfPi/GkinUdhWXJR7ZurVGxHoXt82tgkCWS9UZKy4fq3Ww8XIbLt7IZJ41rasU/r4yHosVDV0nFa/gthZ/Q1tK0P1FxHnItpkaYw8V1yeXPLYY4/VlUa+iSB/6UtfuvGpMtJU1mfLMg5ZBiMiUR8jKRcKIjZl1l9uhJQ19jLT783aj7hwtMUinOXRh3JPgOREZtvtLyBe4MJSnypjl8Z4dUWEP//5zx9e85rXhF9IJC8veMEL8hNuZF28LHuSCzNZMy/3IfCCAAQgAAEI7ELgBsJdZ5q9P5CUBKDzmD8Vlf0fzTFrmzshODLD6gjKegZZUHhC2BeocVbXLPlJJK/Oo4CrZ30Vc7S1UUDm2e5GCCbxWZaNiE0/Vu+iwSsLXnUXCc2vIOp6qGd8UiFbifvpAtj79UC70uVTfd43jaPU2vVLL3yM/7mz+KEfC02FPX4VESeiUMTaLjeGyl+7FFG3bXZc1lOLkNQZfFmzLW1k7bvO4sp3mXm3ZXsM+SBMywWNLHXZ9LhNG4iwk+VOcgOrtN32klzrxYAsb9KnA0k7yYvkSXK8z0dibvOR7RCAAAQgcLgEZhDu9Ux2ROGJ5QJJBXIRuyJWjR1HeHaiWUVvtZwl9VsJT0ekdxcGyTe1aZZgSL9ZkKbt2W8VlM1NtCVS/ZR8sDGmTcoi9+GIfJ2tbkVvbGu4JZuuoA++1yK3Y6oXOcbPsb41svCeONgYqu3yJbHz6rj+GgPqQ+au25S/yZdu0l8juja5wnI/tOvZl+vpaXimF0KnES1RQgACEIDAkgncWLj7wigKaE+kRRg6W6rLEhrxqYIsLGHQbSp+U5vzq/7G1NSu9qnuK/rU2DLCT0WirnNvY1ChHbZLu8rXWhhLrFX9tCSjsmnbZz9q/ySeyq9Uryqzv27oBYj0l+q6It+pp4JX4z+7f7XlxtQQ5bDedvEifeX46l0ixFFdbKXtlo0uZ2lsWL6Wayhv6ta98g0CEIAABCAAAQgcFoEbCfe7DTWJW0/w3a1jx9W7ezHUh7gooRwuSPqLqN5rSiAAAQhAAAIQgMDhEDhY4R5nmxFn+x5q7ky91+lEge81nbNMf4Wws+9z2scWBCAAAQhAAAIQuCsCByHcVYzlJTBpiUf+flf0jqxfXXaiole56/ft4d7lryCpb5bHbE8TNSAAAQhAAAIQOEgCByHc23XXq+qG1IPkvkyn7Zr36v6CZbqLVxCAAAQgAAEIQOCUCByGcD+ljBArBCAAAQhAAAIQgAAEHAIIdwcKRRCAAAQgAAEIQAACEFgaAYT70jKCPxCAAAQgAAEIQAACEHAIINwdKBRBAAIQgAAEIAABCEBgaQQQ7kvLCP5AAAIQgAAEIAABCEDAIYBwd6BQBAEIQAACEIAABCAAgaURQLgvLSP4AwEIQAACEIAABCAAAYcAwt2BQhEEIAABCEAAAhCAAASWRgDhvrSM4A8EIAABCEAAAhCAAAQcAgh3BwpFEIAABCAAAQhAAAIQWBoBhPvSMoI/EIAABCAAAQhAAAIQcAgg3B0oFEEAAhCAAAQgAAEIQGBpBBDuS8sI/kAAAhCAAAQgAAEIQMAhgHB3oFAEAQhAAAIQgAAEIACBpRFAuC8tI/gDAQhAAAIQgAAEIAABhwDC3YFCEQQgAAEIQAACEIAABJZGAOG+tIzgDwQgAAEIQAACEIAABBwCCHcHCkUQgAAEIAABCEAAAhBYGgGE+9Iygj8QgAAEIAABCEAAAhBwCCDcHSgUQQACEIAABCAAAQhAYGkEEO5Lywj+QAACEIAABCAAAQhAwCGAcHegUAQBCEAAAhCAAAQgAIGlEUC4Ly0j+AMBCEAAAhCAAAQgAAGHwN6E+8P7Z8NqtYr/7l0MD53O5yi6Ok99rFbD+nKzRVt3dX4VKntlm62w1SNwW/n2+qYMAhCAAAQgAAEInAKBHYX7w+HiXhHKWZirQDfvUURfDWsp25NwD6JbBPjlOlwgnN2fcHnw4GI4E5+ScA9J9sr2lH0VuNsuMvbU/Z7N7jffe3Ye8xCAAAQgAAEIQGDRBK4n3I0QjzPWZ8PFgxRnEtFRmCahb+rPRyOKxN0FcBKXVrgPXtl8nlpLHS+78eA/7zPfBw+HACAAAQhAAAIQgMCNCFxDuK+HuMgk9usJUZlV3rtwDxcI5oJhMgZPpHtlkw1SMRNAuGcUfIAABCAAAQhAAAIzE9hRuPe9e8K91NqjkEO4F8yL+bTHfC8mRhyBAAQgAAEIQAACd0Pg1oT7lb1ZdVXP2sfQ06y3rpMfXV7T1Ev185IZXa+udrq+vNl1r2wYdD16XstvltfECxZd71/ikfKy1t76+qzhec/U+uWXgtKHlNn61k4aHF1svb1uGKWlS5tjOBsuLtPa/8StxJDEeChfD1eNvcw9dGyFu21n7nOoYhBuWq8w6WKgAAIQgAAEIAABCEBguB3hvjIiVIWbEcFDKiti0RfSVb68GfckKoudYeh/EfBs92Wj7cwFRaxTRPuga+VNnSEI01InCvVapBbxXup1/Y8wsrFWfORLw0j7sWJby+wNxFpmbUd/6pt6tazYs8JdHFBRXuKKPgpvLUvsJzwVqIuPAghAAAIQgAAEIHBCBG5HuHdC1szADiquVchF+p1wbZPSiNIsEqu+pFErytvvTp1OJKfO04VBFqqpXv5+uR7W5/EJN7lM6tiLlM7vXmCH3tq+2u/KrYs3+SqyOf3KUfliL6KkqmM3s8ziWm3VFxyZbfahFe4j9oXTlkd3lij4BAEIQAACEIAABCAgBBYg3HVWVpd92PdWKJqkdQLYE+RSX+3rhYFXrylzxeww6C8D5VGStVC9Opc+alsP76/LE3fEnc7vTWXm2fTpIqH0XfdjyLgfdXZclszYmXRfuPdCPV4E9PmIdpVtzSM60pdFTq6bFEIAAhCAAAQgAAEIjBBYjnDPs7YjnrbFrQDuhK022F24dzPVasrpowjaq2GdZtZjmYjZh8PFefPHp1q/xfZomRHuwYck1nX9vp3JVx+r91I/zHAn/6vZ7tB324/+ClKEeonTdtCy7UV6qG37eHAxrKc8b992w2cIQAACEIAABCAAgSXMuPciUfMiYrESmbpB3juxOyIamxnwvLyjEr3N7HUSuNXMdO6zEbla957xVcvO171I7fz2YtGyui+Z3R7lYdmkz/VsePnFoLJhRXW20bP0hXvDTX/d6C7Cir2L8KtE7higIaIAACAASURBVIgPEIAABCAAAQhAAAITCcw04z4mKItgK3/T1ClLQtfeIBmWpXQC0ETlCc5UZgV3FK9l5niScNf14yunXedTisesBxcv+36T7xv83iyok0ju+jdMqo+9X9Enf6lMWYKjy2TqnEbhXrftY3Rym3zS9rafuEn9tKyrQPgCAQhAAAIQgAAEIHCTNe5ZiOmyDX1cYMZalmnERxGa9d+5ja6NlkZN/Q0Ctevb1tWLAK+Pdpu088pSDF0/1Sx9DjTO/rfbRKBbv8zNovpoRhHqbR9eWbkQaRhpjG3f6loT2/pSRbJ5Oky6kFCf4nsvols/S061s9Y3m1upI9t7uzbv1YWLmuUdAhCAAAQgAAEIQCAQuPGMOxxviUAQ2K0Y1iU1niCe6Jf3C4DTNAr3G/Qjwn3sAsPpjyIIQAACEIAABCAAgZoAwr3msdBvaabcE75hVv0GgvqWhHv3dJ2FksYtCEAAAhCAAAQgsFQCCPelZqbxq19PLhXG15Q3zce/7lG4R5/Xw5VcXHgXHeNesQUCEIAABCAAAQhAoCGAcG+ALPerWZ+ua9vbZ7Lv6LzerJrXtzdr8qM5p9+JIjyvi3ft7ugs1SEAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4n/gAIHwIQAACEIAABCAAgcMggHA/jDzhJQQgAAEIQAACEIDAiRNAuJ/4ACB8CEAAAhCAAAQgAIHDIIBwP4w84SUEIAABCEAAAhCAwIkTQLif+AAgfAhAAAIQgAAEIACBwyCAcD+MPOElBCAAAQhAAAIQgMCJE0C4bxkAD++fDavVKv67dzE83FL/EDdfnaf4Vqvh7P5CI3xwMZwdeR4OcexM8/nhcHGvjLHV+ZXTrK6zvnSqzFxkx73v08wdYg4CEIAABCBwQwJHJtyvhrWIu9kF9r7s3jB7czZPwniRwj34djZcPFBxtx486TcnDmztgYBefLnCPfV3uQ4Xybch3EOPU3zaA4rbMKmTDrfG8jaCog8IQAACJ07guIT7DCfheLJrhWESjLNfECxp9MWLkyUK95CTW2Gf8rxJWC4pZQfnS7oA3sQ37cPzi82x8T3Bp4PjHB2OvyjIBe+BBoDbEIAABCDQETgu4d6Ft3sBwn1pS2VuU0zfZl+7j83DbzFBJCPcDz/NRAABCEAAAnsjgHBv0CLcEe6sd252itm+ItxnQ4khCEAAAhA4SQKLFO5RPPc3hGq5u5wjrY0NN5JWP8WnWVS9sVHeq+2a9yQqbL3Vaog/2Scb9y6GK3uz6qpdUjMMgy7XUTtuX7FPjWe1kp+z6/5LjNb/1F/Vh/pg6smyEssj2B+GwSvT8IfY/9n9i3ifwAb/i98xR3lZg7G/vjT+bGDQ8TJM235CbtslMxWLktuqrfbf1jV91Wz0Rkpluz2v1Y2Owq71M3OWD3Wu883Peby1uSpxRTOm/fnVUGJdD1djORCflIP1pWWS62zoQ9uPttUKZgzoeBrzQ5skm+v75mZke9O0iU+46diz/Mu+E40WPppXm58U5/nVYG14+WvtaN/qenkfYyf9xzFV2zLjTI20bM1YrfzUfbsaU88anvdMjbVfKuO31455hwAEIACBJROYXbg//vjjwyOPPBJuMJN3+X69l570zUlNT9pZXLSWy0lYt8hJyp7Iw0lrtP2QTt6mz2BIfTG29MRqbSX/8gk91bH9q1/6Xk7gpc94Yq1PuLGs1JH2fVnxs4i0WkTEflNZJS61nunDibHtM/pvfNUcBUGR/Kn60ciLOLV8+tiTDcvZmAgfHT9Dufii7ZJfm/vqx0+2Y0SiXmyorcBA+xmGKKTHYlaBles78QVfC1MdI3lcBac0X3FMVnmochAqZ3Ff2Uj1clk3Xrf3sbWt5aB+5dijb9X/NZdOO+WtF1n5ezIgDNqybLuLTbeUGHMsyU9ra+u4V3P5vdjNdjQ2eyGiZZbJaP9lTPT7iXQsY6nUqcZE8KvfH9u4svt8gAAEIACBRRKYXbiraNdZRPl+vZcjaJIoyifCznDbpj9RhdlOe5JsbPgnMs9OW9Z+F8OpzMyWNd2lWfBysg3bW0HlivQkEBvbwX8rerTt1rIoNFq21cnfEz+t8EjfswjqAtYCj5dsS4In5yjVy9+1ff1e+Zk2XZ0r16l9tX2LIa9tKkvs+zHzcLg4H3l0qMMw+l4umOL3MpvcXijE8DZw8XLQ9bs9rhx7x35728hE+WuuPL66Lb17vusYzmN9pP8x5mK6i1/79Xxqyry2qSxfGKq5/O7lZ0qZF5sYbXzqvqcYba7CccTkwDmujF0E5TD4AAEIQAACiyIwu3BXwW7frxXxyAlcRM24KHROjOlkpf6Mt41e9iJMyr2TaVuWTqx2SUD+XERZx6I9uUoF5wTr+dUKPmka6m0V6V696H8r3NWXUN6wVKbhXQXDSN66uD3hESolrq1IU/u9oVjSiiv5ntu0okeNtH159SbkNfWtPDqG2l14T/ZyjtpxVFWulm/UdlO7HKNp5+Wg5aP88xjVpRVlOUce910f25iMxeTxNX7LR8/3dMEufPP+2+4jDy6G9aa/QdDFr/16PjVlU8a9msvvXn6mlDV9t/byftH/4lYuVFOj4HcR7npBqOPUvtdjK3fKBwhAAAIQWBiB2YX7XDPuniiNQmKDCFaB3QmNIobDySqLpj4bnkDOAqZq14qTsRNu30dV0pxcw7ZWlKggNydtqecx2pdwD4LJ8auKRb6MCK+xev2MZeKaY/XETmctFNjcPby/Lo/BSz5t78vLoVfm96+xR0E0YZyqaK7GldhOfapQdZlu4OLVT2VFoE2Ja6yPbW1Tu7G4vP1TkXq+57FeRGi7T16db+JdxmWJXzv0YmnKpox7NZffPXYTylL828dqG9PVsG65NseWeLywDLOzfIAABCAAgQMhMLtwn2eN+8iJ/3I9voY1AG9PjNtPZm2erPgr2zx/2rL0PQvO0rqbCSubDnKpTC8qroa1irQR4WVDjp9bflqjEU2bLsa0ib5ncXrRiJipfbV9i+FteXWWxWxhIAKqF5AaRD+TqhcEebY5VE1+tWJNtnn9Zzb61KBtcZnYuz62t437USsSPb4l7vDJ833kwlV/DZIbWTfOthsmPXfPp6Ys+bRx3Ddh5HFTsfNy1pal77o/ZbuNT6lcj1cX9kJV2zTCXXl1DCS+yk81wDsEIAABCCyNwOzCfa4A9YSU/0KmnIS2nlzak55zsgsn4fHZOV9wtHYlSqcszcxVfm7zO7WpRJlTFmfLzFIBFRP5qRKRfMdtRPT09RIre+GhfRjusZ3xI9nP/qc2nTjwBkaK09bt+TucPVuprG+fNkzqKzFoRVNq6+fV80/stKJVnU71LWfdFN777crccnLHn9rxcuCVbYxLjHmxpU62tdWxY1l6bdRnfd/Qro5fGuiYHWOtRsvFTJXDsDnZMGM82zVlmoM8zttxb7qKHz12E8sSJxvv6LhWXsbX7EqyU3zWsWV5SZn9nlvzAQIQgAAEFkhgscJdZw3zOkzvxFQB1ZN4WqsbBIPMBJ8NZ7okIbyPi/ZgTk+Eqc3Z/TfUj0cMgqvpy4qwpn0vFIrTKsY1RjnBtmXl5K0n3RJfeTSlnHib7cGnqWVJ2HSPuzRP0Sludz5mYaDCLPPewlpstrwsyyzMyvrr3Jfxp/ooPlixaDdu7CtWrPkbQdO2zeNRZtzbMWba2f7z5zYvJadhPrzpq3+0Zjv+zIVUk4Mwfpqyakw2fZVtG/rQOEbbpgrd9rXZl0bGhvjaPppRlwxpv+Y95CvnwmxwPqr4zkuZWv9k3HhlyVY9Ngzzrq+GnR6L8n6hj6P06iVjrR/VfmE7jGOp3S82+Vpz2DZWbV98hgAEIACBuyawXOF+12ToHwL7IBAEmSOWklBrBdg+XDgmm9W9DMcUGLFAAAIQgAAEHAIIdwcKRRDYF4Ew2+n+IhBnXxHuu5B37mHZpTl1IQABCEAAAgdGAOF+YAnD3cMmoEsYWoEely+MLB857JDn9T79MiFLgDbe9D1vr1iDAAQgAAEILIIAwn0RacCJUyJQrzFO69snrtM+JU5+rGVdeHvx49enFAIQgAAEIHA8BBDux5NLIoEABCAAAQhAAAIQOGICCPcjTi6hQQACEIAABCAAAQgcDwGE+/HkkkggAAEIQAACEIAABI6YAML9iJNLaBCAAAQgAAEIQAACx0MA4X48uSQSCEAAAhCAAAQgAIEjJoBwP+LkEhoEIAABCEAAAhCAwPEQQLgfTy6JBAIQgAAEIAABCEDgiAkg3I84uYQGAQhAAAIQgAAEIHA8BBDux5NLIoEABCAAAQhAAAIQOGICCPcjTi6hQQACEIAABCAAAQgcDwGE+/HkkkggAAEIQAACEIAABI6YAML9iJNLaBCAAAQgAAEIQAACx0MA4X48uSQSCEAAAhCAAAQgAIEjJoBwP+LkEhoEIAABCEAAAhCAwPEQQLgfTy6JBAIQgAAEIAABCEDgiAkg3I84uYQGAQhAAAIQgAAEIHA8BBDux5NLIoEABCAAAQhAAAIQOGICCPcjTi6hQQACEIAABCAAAQgcDwGE+/HkkkggAAEIQAACEIAABI6YAML9iJNLaBCAAAQgAAEIQAACx0MA4X48uSQSCEAAAhCAAAQgAIEjJoBwP+LkEhoEIAABCEAAAhCAwPEQQLhfM5dX56thtUr/zq+uaYVmR0ngcl3Gxr2L4eFCg7RjeH25UCdxqxCw42p1Nlw8KJvGPt12jh/ePzuIsT/G65DKbW7P7i/1KOMTtb6vbu38eTWs9Zy9Wg2LO+Y9uBjONvmVtkfdMW3/9+lTencE0hi84Zg/DeGeTnizH9x0R7phEuYdRA+Hi3tyQbEedr+cuEnbeaM4fGuJ5UKFezhxyrjd175x+Am8VgQqXPcpCqLo2X7ivrscp5PTQsf+tRKrjZa2v6Rz0OzntuEWcnhH58/b2Ed1uEx9jz5t36fF3tT9f2rfJ1lv5/14Xm0Uc3gdjRazdRLC/eY7akpaJ9DnuXqad8e5yQH3Jm3njeIYrIWdc5HiJeZ5n+Iy5y8cIKedkHKbA/5wGyfVaSf528jx2HFx2RetNxleNz+XSO8xN/OI7TltGTKziuoxH2P57c24p/iSaNvv8W9s3zCM9ePIMTKOtV7cTdv/1TjvHoHd9+M0Vqvz+di49npsy3YYH23TYRhOQrg7ce9YNAb5jg48O3pP9bshsFjhPnKi2Aul2+xrLwEsz+ikE/etcB87Lqby6iS3PI5359FNTvit13Paam3P9X3Mxzs6f4Z9Y99LZcb2jZbp+L6CcG9ZLe372Lie6OcNjtEI90mMx3bCOzrwTPKZSndNAOE+pKU4pzPjfhtjDuF+G5T32ccNT/iVa3PaqgzP+GXMxzs6fy5JuG9Y6oRwn3EI7sXU2Lie2tn12y9TuKcdK9yEEWZtknBON5bEnxjTTp/Kxn72ij9dx5tIqzr6U+C2m1WsL7mu/nxVDjy2n5U309T21y270WSbWMVO1X8SQF6ZNLd9ZB8m2LtJ2zFfTLn+JGwZaZmusZZcry+Nr8I6MPLKlFX7bsbE+dUQD3x6E7HmTMVkLFc/9uFbsHnvYriwNzJ79x7YvOW4JTYTezUWNglhwyCMV1u33ebsF3kNpXLT9ratlul6S627GpRn5Xveb+z2tm2xGbLaMhm9aWsKI+v7auj3T2Mj+LoerqT/tA+VsaE+WntaZm1o2WDGoJSVdoXTFg4Cw+xL+Yb40ZtTSx+lrpld7Lia/WKX8eb6pLYSi3sXw5W9WXWnsd/u24ZvtS/I2Eu8K59KDoqllo2pU7Ut47TkfjV8erh3yN9n6mON4V06D5/aeuUclypuzE9jLHyNMZ3dv6huvPSWn7R9V+dDa9qyyOcpw27TsdXakSNYlf90nMjnpmTz/Cqt2263F2OtnVHfcxPjr+7Tui3Ft76s69h9MlY1Y647lppt1Xg8Gy5eax5OkI99um+oE+k9+2LLa790P9aYI4uz4eIy3szabi+WGjuZe6kRP5lYZB+1+a+Ou6ZeG3O+UX68z5LDsWPheFv1uNjQ/VB86vd/zaXdf70yZRrsd/te2o9teWLY+rF1P877kUYi74mnu83W6z/PLtwff/zx4ZFHHglPFpB3+X7dV4GuB1gzcPJJICV7dFCWE19JkrRRm+JdtFG2tx6nPjrAqdwO7jTodZAES+3OmQZCVafq0sSZ+yx9lYNyKqtiT229MjmItPa8el6Z19Yrs229OL2yfKAoOSk7Rl82nqeSS9mRMl/d8XLs5SIn15GmM/um47f4q3k1B/GtY0PbpNy19e24ceJUjsUH3R8KV2tCP0ff2zrii5apXyaW0f61jVpPbc1Yif2pLRnXtk0c51UMaiq8qy8Ooy6naZ/JY8HZh3Q85joqQKxPu5bJiUbis/1v46B9WCGosda+VDjkS4ihqZPismO+z7Pad1h2ndhY7MZiI/fljA29IMl57XJlbcrnYrc7jk08FpV2DluHT+j1/lk5lqQ62ed8oatjV+027G0oY3E6/ff5sYbkc8pBPh+W45iNtd6/Jviods0+UPracmxtXRyLV/vYcv68tu/5+JLGjcaSONsHOPScmzbqa7YpQTbjsRobY/tGDScen/2x0satLfWYXiYg1I8yBvtz2XZ/Yn9WI5RJhTLetS/n+NDlue8z+94eCye07XM0PvbzcUegdbb1+GiPq2LL5iHa7uK2+ffsSn/VOBjpPyUzxGRtapK3vM8u3FW061WgfL/uywuqL+sHR9dfApyT4AG/XG94PNRYH155W5YGepUcHfxmR2uc7uNMO1FlZ4Yye8DXk9BcfXic0wHQ27FyfoRFm7OxsoZbPpjqQTpsd3JwC755OdS4YvyOX/lkUMaGa6eLWw+ypV2s4vQRDiz2IOUY0xOV5SjM9Ht7cEom2hNR+z1U89qmssDFy83G/dPfD6SvwM4b4+kgHbe3LNp9eEToeBynlolzEzlYASbNXKYBrPlf54czDkL1Ptap4y0LOR0TuXuvr7as/S6NU1mTr2xW83mN45M3DnJ/xl5fT3wy+1R7XPLGaipr85bj8Npo7MaXWL/PT7YTPsTt1fG0HSNef9t8VH+q3Kb8eGWd38ZLr3/je82piddru8X3fp9ONtXHDftdOQc1bXTsNWNzfF9p4jA47MdN+3I/FmNLr01b5rXtuVhPxo4rIxyUpTExqc/uuBQNbG2bctaO866dN16maA6vXXPOCX3ZuL02ut/YelrWjB2JvPPf8Nz0cXbhroLdvm9yYHybN/BjWZW8BK/scI5Fp04Eln6ac4DWVjxfpIZX3pal7zIj1P0zJ4S6w5jQKvm+OOkGkw6GqW2b2G9sz/brDuzIY2sOnZyp6N2Ya91Jtp1cbsE3j2UeM4HTtLHh22kGjMZt+acqob2dTRg5eLYWY7syRq/Oi8BtTxS5bXOA9erFMm9/KDN5sW+tU3zI/TQffEYqBNWOfZdY0vaOWbsPj5zUPI5Ty7K4sj6Vz2H/SCzb8e4xbXA4M+59TLGNMiqMfZZdDyPHP6nncW3Lpo39tlfPt+1lbd/Famjb7RtmJu5yXWbbpVl7XEo56o/t9cxl6bHYqI6B7rlEWvX5qWx5okQqJL/sONrJR+3XO456Zd0+ZLx0j7Wy3RuTTdnOfMdznT3y9iuvTBsk/yO/sp+ECGQZpBt7E4faat437ctxbNb9SXOvTV2mY6YcT0ruyzG8ccW1K3VaP7z9rYzTLX0Gzq0P2/2t4yuet77p/untW1VZux/nONX/nnsXtzuudzuudf6X0DZ+ml24zzbj7oDVpNgTWUxoD7mK2rOVKkRwMVlVYisDYzuhV96Wtd8rw6NfukGiA6s5SNy4HsLd5CDmqhoH3tiZWOblpj5ZTRsbvh3jdviYbDXjQzaF9p04aQ+erb1WYFwNa3PC7mxq83QCVIbeAdcr0+bte+xn2/7pX9Tmk4nDJPYzdpLv8+L67J2EppaNnICr+BNLe7yT7a4vVUMVbibHaczWs5vBWvd3H6aNN2nbc4pueFzbsrG2bSD1d8+37WU77BsqWNOYuTpvzi3tvj+So9rr5luyoftI2LpDfmprMbbKllSwftnPdeMN31K+zD6f9yevbHQfa48jtktvDDRlO/vejjPbX/rs2XTK4n5WhPn2cWb7auKwm8znTfty6K85P0tTr01dNoGB8UE/1jZy6cTjw8Q+A2dzXArdbG/r+6bnNrOPevuWd3Hb7scabj5f9uecLv8b+uqPs6YD87GzabZt+ji7cJ9rjbuXqFhmktQcZEcDbZPU/AQi7TYDHNsJvfK2LA1KZwe0M5it754/eylr/Jq1jw0DuzrRtPkRGFPLWnA6JradXG7BN4+lxhXjnzY2XDtd3M5BLNRxDoruwdMxqPvFaj1c3F/Xf6nTOdGJhXa/bb+HXlLbagzIBsmJ5G3n/XN8/w3s7EVLClP8EkHsb2/34T6uEkdzEvLYemViYBuHNEbbk4DLNMWV37o+nXEQKvexTh1vNxPu08Z+jid98HybUhbzbM8dYnCEScrLWm74bP8iaXtcGslRYDMmZlObevyP+DJ6caRkYv5qW814vY6PysY7jnplY7GKm268sqEfe13ZNXyPuW72S8Ul75pf+9ei2zLH5ynjrHTjxVa25k9tv3mDHpvaMdvkNtVvjwljDPS4Z7rJH1sbcUMfh8dB6k7qM8Tb52Zr28SpHeexnWHk5E3HVNU21cuTIhPOOV3cbl+7HNfG9vmcktEPswv30Z523NBB0oFRHSD6QeV20wJ2dpYwaKsDkrWU+qn6lu1e/05Z6q86AUvZaH+6E5gBqfF7QnuxZT23uKM1PyO3+RG0U8tsmsJnb2fwyvbvm8aaDw56MrT5mjA2op16LHRhG2Z2XMWDsfnpX+o549+1N2Iz1nUOUClnW/vPHOwBXOyl745/m/dPf38JfqpPdt+VMv3ubR/Lib3hWfd9e2OddOj47pYF55ThCIe8z9v8eW1iRqr/b/DDnsDi2LL9b2BZdSBf+n0oVkk+KuNQ6JSNcd7HcVHzbGy7+4b11e6nMTD3uNTv55Fh2e+1cXp3fAlbEo9t+amtpRxYXx37O/uo++i2HLr1ag/1WG6PC7FG8t3kJI8pU7az7xp/5XvsK+Rkw76Rc9bmQm1aznn/9I7NY/uGz8bmXGt4+6Zsi+O23me7MvXXMpAy+107Su+6P1hfPB9imRPzlD499tL/1rbecc8Z+84xScdPNf5SfzlWx6/AoxuHJm712dQJKJOtqj8pa+slX7MPTT42fV2ocHd26BZ0iEqT2f+skYNWiGl9eYAk6xbvndVrzjuo2ULsqXqs1dlw8Vj9KKawzk0TqWvZ7U7Sbhvtr44p3vm+7zI5CMzdR+LX8K8ewSUMmu2an7ImL6179urVKSpCouKvO3ccI/ZJAm3f8/omPPtHdrnrIUfHRpuTsga8Cz0XtPF6B3hlUX4Gzs27D9GHfEJrtueDot2/qjqNP2bc122Nnzvtn1MYNT7Y/TL42mw/X8dH6xlfpVrtb/3YNOGjJz4du16Zl//aruGQOLbb1+fl2OUd9Fs/qj7bsVYJkSksq+Q2MYvvDctg3ytLdlp/Gualt9Y3OYFOLVMrrR89a63ZnrRD+YZjUMt8bH9R+3VOHTGgx7AqP9ravAu/7rGb/nFiuo8Np7C/TCjb4GsXb5t36cMrS6FO9z01aG0l31o7sv94ZWKl8ln8y/mXcdOOvZ55bXdsrCU73rhvYhBfK5/SpIFXFil4OUt8nLfaXz1HmLHZ7W99zPnCS8evOdZ29s22qf7Wsa6HdXjUsvWxTJ6U47DhIJxzHo1u3HjOaXNd+mv9uVKuTe560a5+jo0LNeS/L1S4+85SCgEIQGD/BNKB3juZ7r9zeoAABE6JQBCS1xNwc2KKwvru/dglpiici5Depe3d1t1wwTbBMYT7BEhUgQAETokAwv2Usk2sELhrAksQzUvwYdc8HKpwv6nfCPddRwr1IQCBIyeAcD/yBBMeBJZHIC2v2LbMal+OI9z3RdbanefcgnC3TPkMAQicNoFm/WN1T8RpkyF6CEDgKAm0a7ibh0csMuYkgHUtffuQgEX6PJ9TCPf5WGIJAhCAAAQgAAEIQAACeyOAcN8bWgxDAAIQgAAEER+7FgAAFcJJREFUIAABCEBgPgII9/lYYgkCEIAABCAAAQhAAAJ7I4Bw3xtaDEMAAhCAAAQgAAEIQGA+Agj3+VhiCQIQgAAEIAABCEAAAnsjgHDfG1oMQwACEIAABCAAAQhAYD4CCPf5WGIJAhCAAAQgAAEIQAACeyOAcN8bWgxDAAIQgAAEIAABCEBgPgII9/lYYgkCEIAABCAAAQhAAAJ7I4Bw3xtaDEMAAhCAAAQgAAEIQGA+Agj3+VhiCQIQgAAEIAABCEAAAnsjgHDfG1oMQwACEIAABCAAAQhAYD4CCPf5WGIJAhCAAAQgAAEIQAACeyOAcN8bWgxDAAIQgAAEIAABCEBgPgII9/lYYgkCEIAABCAAAQhAAAJ7I4Bw3xtaDEMAAhCAAAQgAAEIQGA+Agj3+VhiCQIQgAAEIAABCEAAAnsjgHDfG1oMQwACEIAABCAAAQhAYD4CCPf5WGIJAhCAAAQgAAEIQAACeyOAcN8bWgxDAAIQgAAEIAABCEBgPgII9/lYYgkCEIAABCAAAQhAAAJ7I4Bw3xtaDEMAAhCAAAQgAAEIQGA+Agj3HVhena+G1Sr9O7/aoSVVj4fA1bDWMbBaD9tHga2/GtaXx0OCSCAAAQhAAAIQuF0CixbulVDOYknF8xbRdLkOIvvs/sN5iT64GM7EF4T7vFwbaw/vn4X8LUvoRhEuPsWxeTZcPGgcH/m6zHhGnN2x+Jhj2xEF1SEAAQhAAAJ7JbBg4f5weCiiyBHgKhRW9y6GMVmuda4v/B4OF/c8gZ5mUBHuswzMmKf+ImxXYTyLM9uMhLHY+1o1C3UcQZ/G8fXHY9XLor4sMleLIoQzEIAABCAAgXkILFi4xwCjsGuFkC4/2CKibsQI4X4jfBMbjwn3ic1vtVoQqBsuFoMzJyjcbzUJdAYBCEAAAhA4YQILF+5JPHdriRHuxzJmEe7HkknigAAEIAABCEBg3wQWLtyTQG9mOaPYWw1j69fjT/dxLXy1NEHXp5v18tV2pZ2WNeQbUUN9nd0vS2VsP+6ynba/0eU1eoGyGoKdqv/0a4NXpv6Gd72YSfcANMx0yVGOqfLFtD2/GpRvrKtxV52lL2PtSpvals2ZaVvlw7BY6S8tpkzi2sai5Z7tqz0nlq5NiaFjV40HtWV8zP2ZeJPP68s6bm8MV+MqM9B+7LuxNZK3mr+JKZmpt9ulYW08qW3F6QXDS2Q5WYi3Zzs9DhsTnyEAAQhAAAIQGCMwu3B//PHHh0ceeSSczOVdvl/7lUSCFTdZaFTC0+khCyXdJiLHiosoelzhHpokUdT1U8RSbpv6sn6q2Mt1nFjUs/huhFLus/RVboZNZVaYd7Yb34N/JXZlmH2z8a6M2FSRlv2pPY7fio8Sf7Qd+4qfi1iMQq74Ie1jWamjPVg7sWwDnwksqtxoJ/ru5G/UV9uXtjfvvd9pY+pjZX496vtIMZo+xviULmv+oVzztiWXff/t2FLmbX6kXinrY75OHCUiPkEAAhCAAAQg4BOYXbiraNeZXfl+3VcUBDqjl943ikjTUxIvWZx24jbe+Jq3m6bxYxIxXX9eeVvWC5dhGBNBpeMgpIxoky1TyjxxZ0WZcsyxeizUvypeL47ib/yU6lTt4hbrQyhJ4jX7ofEZEZitNxcbUj7KwrYf66PhmvvRuLvtbU79/oud+KkXsamG41d3cbehzviFh8d/Qpk7BsrN4DlHXr3Ldf1rV5ura8XRkuQ7BCAAAQhAAAItgdmFuwp2+952OvV7LfySkOoE1oi1JDiyAFHhl5cxlBlD30Iv3GI9r7wtS99zX/biY7zfUWHaxFzXSyLN7aue3Rb/I9PoTy0GN4i9pv+al9eurlEuWmK/fU4cJq0YVN8bX2I8pn3Ke/cLhXNhMZ5P2aJci+2aextj/H4T4a4XWHbf0c91rmzfHv8JZZ64FrMdv2Qrc5fvhUnwpMnV9eKwMfEZAhCAAAQgAAGPwOzCfb4Z91YwlNnAcRFjQnSEu24dF69aQ95bMa7bvPK2rP2ubTe/e8Jwe5nDqesm+bNKfwDIZZPsVAJ3im2vXXJARaAuUWoEntSKuWiEoGwYq5sFZOzDb1/iDcK3iin5pm/qY1cnxWVm871cqBl9v7lw7y+21Lb/7vHfXqbi2l5EBfseDyvyH1wM6/ZvIzS5GmXgB0ApBCAAAQhAAAITCcwu3Gdb4+4JiDwLOkHcpPZZmFyuu79auVmIjYlvr7wt60Wf5uPqfNx3z58pZaGOimPtSOaM75+FmON2I45bNqHNBrHXiGXTRZmZHhO+tm0j8MRO55saH6tr7Y20F5s572pv9D3F3dj1LtyCr1292vCoaLXiV5u0Zel7d2Eq+er4qpENeavaNPXSGOj6an0K3RRGF+dmHKkLoY0Z19eKQ43xDgEIQAACEIDAGIHZhftYR7uW64xgJyyS4HCf4mI7aYWJI0hCH5W4sQaSGO+EWivSpY1TlvorSzbSLPJof76I9YRtV+YxkbLgexJd7cyxvXExhF3EWfmjVl6ZZSSfx+q0/NSPWlTHWIzoU/NOvrq4XeHe9qsGN7w7QtPzy+u/tarjtrtwcOLp1rgry+oiTLg5fHLHHv9pZX2MG9g5jLILXWyaa+v3tjiyNT5AAAIQgAAEIDBCYHnCXUWoXbPdiOcoOPr10jnGJCSq9cFyQ929s/TourTmfIOIFlsqwqKds+HisYvhrPWr9df62m4b7U+FTvIriOypZRp1El3q3wY/1pfGdvDJa9uUGeGvPeYLFu1Tl+JohSoPIuKKzXxB1jCS8pq7CH3jb+hLZn3bMisSSz86BiYvmcmx2Jnlti/z5B2NNb83fXePaYxt2xgzj3wxomPBxpU7SR+avkLOp5ZFE60f1YVm1Z3Y7X1p29sLFrufrpy2lXm+QAACEIAABCCwlcDyhPtWl6kAgQ0EwsWCFd2pbijvhecGS2yCAAQgAAEIQAACiyKAcF9UOnDmZgTSzLj3y0aY2Ue434wvrSEAAQhAAAIQuEsCCPe7pE/fsxPo121LF0nQ2+VDs/eMQQhAAAIQgAAEILBfAgj3/fLF+q0T6Nejy/p2u4b81l2iQwhAAAIQgAAEIDADAYT7DBAxAQEIQAACEIAABCAAgX0TQLjvmzD2IQABCEAAAhCAAAQgMAMBhPsMEDEBAQhAAAIQgAAEIACBfRNAuO+bMPYhAAEIQAACEIAABCAwAwGE+wwQMQEBCEAAAhCAAAQgAIF9E0C475sw9iEAAQhAAAIQgAAEIDADAYT7DBAxAQEIQAACEIAABCAAgX0TQLjvmzD2IQABCEAAAhCAAAQgMAMBhPsMEDEBAQhAAAIQgAAEIACBfRNAuO+bMPYhAAEIQAACEIAABCAwAwGE+wwQMQEBCEAAAhCAAAQgAIF9E0C475sw9iEAAQhAAAIQgAAEIDADAYT7DBAxAQEIQAACEIAABCAAgX0TQLjvmzD2IQABCEAAAhCAAAQgMAMBhPsMEDEBAQhAAAIQgAAEIACBfRNAuO+bMPYhAAEIQAACEIAABCAwAwGE+wwQMQEBCEAAAhCAAAQgAIF9E0C475sw9iEAAQhAAAIQgAAEIDADAYT7DBAxAQEIQAACEIAABCAAgX0TQLjvmzD2IQABCEAAAhCAAAQgMAMBhPsMEDEBAQhAAAIQgAAEIACBfRNAuO+bMPYhAAEIQAACEIAABCAwAwGE+0SIV+erYbVK/86vJrai2nERuBrWOgZW62GnUfDgYjjLbc+GiwfD8PD+WRlT9y6GhzvAYjzuAOsOqt4kt7u6W/W167jctTPqQwACEIDAnRI4EOH+cLi4Z4SzCqB7Z8OZJ3gu10EQnd3fRQpNyIOKL4T7BFjXraK53lEYX7e7ye2iaF9fDkMUzVF8T26eKvZt08WAN463GT/m8bivfTgzvY1xdoPcZj+nfriNeKb6Qj0IQAACENgXgcUL9zyb1AgbLffEuW4TkXW9VzoJdgI9nYi78uv1cuqtYp5agX6bYmeHDAQh2fq6Q/tUNcZsRX8aa834ri2f3ni8+T5cE+y/zTvO/LE8Jbe9Z9ctiReFO47RMK7teLxu7zu2u6t+d3ST6hCAAASWRmDZwn3jrFs8KV5fnG9KxekJpU009rXNFzv76u1mdoMo2iiup9lHuE/jdGi1/LGMcB/NI8J9FA0bIAABCGwisFzhrssANoilq/N9zRQh3DcNmrm2+WJnLuvz2kG4z8vz2Kz5YxnhPppnhPsoGjZAAAIQ2ERgscI9/uy7GnadUdd2ciNp1VYvBHR9fLtdKaVZ/nwjaqivPz+XpTK2n5V3cdH2N7q8Jp3cpR+xU/WfLky8MvU3vCe/NLbWn6r9alhVvpi251f1DZMbb3Qba6esmpsvV6uhLGsybdVnycdrzQ2cOYYJfAyLKKC8+yE23PzZ5srG3bKrxoPpOHw0voZ6/YVl9M+WbxF3G/tPHM+v0rr7FHdmZ/xrY6zGgKk3mBjmGo+rEm+13+RyOx7Ohpe8sOSv2oeHfkzV243vOq68OC2LzMq0HYvbYsqfre+t3yW3V/ZGZDu+xuxkv3KF7oM/1sv+Fxq04yfzMPEqq2ofbbeXHKojdS7T8Us3DnoviDLR9q3duL0cG4wBPkIAAhCAQEdgduH++OOPD4888ki4OVTe5fvuLz0ZNiehqYbSyaqc1MWenjjESLRftreGU//5JKfb1S9zUZD6qk48bf9JKFR11GR4Nyez3GfpqwjtVGZP6p3txvfgS4ldT/Z17KWv7KOKm+xP5XD6UrezojR+LvmLJ/nihxiIZaVONJpY2BitmMz+9Cxs/8FWE3tyun5z8jfqa+VTbWZQHzf4Jy06H7XdRttNTnPXhX/OpxPPkMpynW7MZIPpw83HYxmzGnPZZzy+kZ8ZH63PznhpWYrdPH61fs7HSIwV9w1xV/VaW1vGshXE3n7V5WMs36XfnqGOBbM/BYaFaeRV8iDWWoaxh8Qhs0u2DYPQLm9PdvL2fh+O/hbf/H5LfHyCAAQgAAGfwOzCXUW7zljL951fenLLJ4IdLaT2G4XK5bqeka+6GDtxeuVtWX/SyqLOnWmLHYcTWxPvlLL2hCjWYlk8YXcn604kSIv2RG3KGp+it/p/r13cZn0IJROEmFqdErfUbWNvv+sFmhVz2kd893IVLMfHPhph4vlU2+rFTe+PJ5TGfLDW2zGm27zytsyzn8puaTzm8ZXHUuvjMAwyLg3v8N3+KuaN21QWLxK8OK+GtbWp2NK7l9PRsg2sxJyX6z5uqdn76bWNZUV0V66nfakd162dKfu+L6BTfnK++vjavkJc5+lXLWdf14tH9dnvt4qSLxCAAAQg4BCYXbirYLfvTr+bi/SEbE4cmxs0W1P7LNzziVV/ti0zP03L9NURFmGLV96Wpe/m5+fCYrzfcCJs4t1epgJM47Lv/Uk/nmy9n6aTnUrk9AKjZ+W1a2vVPvY56Zlsjzv2EeMp7Tuh4gmIyr02d7pRfS62PZ+0dveu4zeMgWJD6vWCZQrnMT+98rYsfb/N8diMY4k75qqMyTZ33f0q7T6ccln2JTPWddw2dexY63KkPjW+enlufR211Yl7L7dtmY41E0/OVeFl++zHUNy6yc+4rd/3x2zl/sbGclVe/9Kh+6GXK4R7JssHCEAAAtciMLtwn3XGvTsRmhgv19XP4mZLnL2zs3Vm49gJzFSRU3o34xq3e+VtWfu9tjz2Lfg1VUTkeq0I8Kwnf5RHK4hCk2RHBZAty315tr12qV4+sSfxEURVLUTGhMZOLNoxsot4Ux+ruMV/FVNFdHs+tUSyYEnMvDa9UNohh52f3lhry9rvrdf+d8/37WWpL2fMhLZ2uVpiH4WcMzPejtOU121iPERjx4Dji0a8PZ5YM/pexoK2t+9+HS+3bVn73Vr1P/djKNbrfUj52LDvj9maMpZDr7oPmYvUMZs2mil1bH0+QwACEIBAJDC7cJ9njXs6mekJp8vW1bDecELufmZ3lsV4J+3SzZjY8crbMvW9P9F3s4qlwzgj2cTk+diWxZN1LYjFrJwYReTE7caXVhAFH5LPlTCcIii8dqH3+AezbDy3ItwlFyZWw9f/OBZjm9PE0cbTGqyEaNzY5kpKe8Ey5oPtoPcn9eBcYLZ1k32Hy/7GY5sDP0Ydmxf31+EvydqIu31YBWI1RqWFHgsc8e+MOduHl5/RModfZ6ur48Xdl0UO4/uw7Sd8ThcmOnut25Wn/kXf9nvH1B2PadmSXZff/TrxcLjQZTHauT2ujPgX+k/56/cDNcQ7BCAAAQhsIjC7cN/U2U7b9ETdivdQ3gqDxnJqm09s6URiZ+vCiaMTAWoniZ9OqLWiSOo7Zak/e4NeWOM52p8jsPVk2YiBsZNx9WQbiT/43ou22L7+aTvPMFfx9gJD6ZT3sTotP/WjvjEu+tILli7GqSzGBENxuP/ktPH88nyqjLV28vitx2ovWMYYWustT93mjL2ljEcz1mPMde5DBMrI1NXIVGTmfTiPgdqO5CXu1w6LYL/mn+1ne/V2L89embUjn2Oddix7uXXKlIPd/6TMfq861P3J9pfiz8cLrVPiiz7W+76bm61j2YkhjDv1R/vW7+K8lJXvbr9VjHyBAAQgAAGPwHKFe/BWTwBm/efoySyFl046ur4ynPhlWc29s/CkGy2vRLVDRk8ssf7ZcPGYeVSh/CwsfugJV9ekWt/abZ44cWOUE20b91iZOq4n7cRpgx/rS2M7+OS1bcqyGND+5L2towIq1anyICfsUj+LsYbR2f23x5l65Rn6Nf7mn+PbsiII9Ca4nOdky1602SjC58aPVRVv21ctfKwtFUahb8lBZhD9q7aHC9LCJPpbRJa1K58PejzaJTJVYJFtl5vMbWxNdjkelLYy8342nOWxI3XGeLY5Hdu/2npmnFVxlFlqHXdn998Qfw3J/kgfm/LdbLP7cNtX+N76th7W5w2XZlz3+74YavpNx6lqrHZjWWbcW9Y9m8pGNwb8ft1QKYQABCAAgUxg4cI9+8kHCGwlEISCc4EUyrcKoa3mqQABCEAAAhCAAATulADC/U7x0/lsBNLsYpmBLZbDbDXCvQDhEwQgAAEIQAACB0kA4X6QacPpnkD66b0V6EnQ5+U5fUNKIAABCEAAAhCAwEEQQLgfRJpwchKBZk1vXG/cr72dZItKEIAABCAAAQhAYGEEEO4LSwjuQAACEIAABCAAAQhAwCOAcPeoUAYBCEAAAhCAAAQgAIGFEUC4LywhuAMBCEAAAhCAAAQgAAGPAMLdo0IZBCAAAQhAAAIQgAAEFkYA4b6whOAOBCAAAQhAAAIQgAAEPAIId48KZRCAAAQgAAEIQAACEFgYAYT7whKCOxCAAAQgAAEIQAACEPAIINw9KpRBAAIQgAAEIAABCEBgYQQQ7gtLCO5AAAIQgAAEIAABCEDAI/D/ARLYA1MV88QaAAAAAElFTkSuQmCC" alt="image.png" /></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For our recommender, we will use the number of votes garnered by the 80th percentile movie as our value for m. In other words, for a movie to be considered in the rankings, it must have garnered more votes than at least 80% of the movies present in our dataset. Additionally, the number of votes garnered by the 80th percentile movie is used in the weighted formula to come up with the value for the scores.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.80</span><span class="p">)</span>
<span class="n">m</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>50.0</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that only 20% of the movies have gained more than 50 votes. Therefore, our value of m is 50.</p>
<p>Another prerequisite that we want in place is the runtime. We will only consider movies that are greater than 45 minutes and less than 300 minutes in length. Let us define a new DataFrame, q_movies, which will hold all the movies that qualify to appear in the chart:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">q_movies</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;runtime&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">45</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;runtime&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">300</span><span class="p">)]</span>

<span class="c1">#Only consider movies that have garnered more than m votes</span>
<span class="n">q_movies</span> <span class="o">=</span> <span class="n">q_movies</span><span class="p">[</span><span class="n">q_movies</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">m</span><span class="p">]</span>

<span class="c1">#Inspect the number of movies that made the cut</span>
<span class="n">q_movies</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(8963, 24)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We see that from our dataset of 45,000 movies approximately 9,000 movies (or 20%) made the cut.</p>
<p>Let's calculate C, the mean rating for all the movies in the dataset:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;vote_average&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">C</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>5.618207215133889</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the average rating of a movie is approximately 5.6/10. It seems that IMDB happens to be particularly strict with their ratings. Now that we have the value of C, we can go about calculating our score for each movie.</p>
<p>First, let us define a function that computes the rating for a movie, given its features and the values of m and C:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">weighted_rating</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">C</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_average&#39;</span><span class="p">]</span>
    <span class="c1"># Compute the weighted score</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">v</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="n">R</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="n">v</span><span class="p">)</span> <span class="o">*</span> <span class="n">C</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">q_movies</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">q_movies</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">weighted_rating</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#Sort movies in descending order of their scores</span>
<span class="n">q_movies</span> <span class="o">=</span> <span class="n">q_movies</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1">#Print the top 25 movies</span>
<span class="n">q_movies</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;vote_count&#39;</span><span class="p">,</span> <span class="s1">&#39;vote_average&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="s1">&#39;runtime&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>vote_count</th>
      <th>vote_average</th>
      <th>score</th>
      <th>runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10309</th>
      <td>Dilwale Dulhania Le Jayenge</td>
      <td>661.0</td>
      <td>9.1</td>
      <td>8.855148</td>
      <td>190.0</td>
    </tr>
    <tr>
      <th>314</th>
      <td>The Shawshank Redemption</td>
      <td>8358.0</td>
      <td>8.5</td>
      <td>8.482863</td>
      <td>142.0</td>
    </tr>
    <tr>
      <th>834</th>
      <td>The Godfather</td>
      <td>6024.0</td>
      <td>8.5</td>
      <td>8.476278</td>
      <td>175.0</td>
    </tr>
    <tr>
      <th>40251</th>
      <td>Your Name.</td>
      <td>1030.0</td>
      <td>8.5</td>
      <td>8.366584</td>
      <td>106.0</td>
    </tr>
    <tr>
      <th>12481</th>
      <td>The Dark Knight</td>
      <td>12269.0</td>
      <td>8.3</td>
      <td>8.289115</td>
      <td>152.0</td>
    </tr>
    <tr>
      <th>2843</th>
      <td>Fight Club</td>
      <td>9678.0</td>
      <td>8.3</td>
      <td>8.286216</td>
      <td>139.0</td>
    </tr>
    <tr>
      <th>292</th>
      <td>Pulp Fiction</td>
      <td>8670.0</td>
      <td>8.3</td>
      <td>8.284623</td>
      <td>154.0</td>
    </tr>
    <tr>
      <th>522</th>
      <td>Schindler's List</td>
      <td>4436.0</td>
      <td>8.3</td>
      <td>8.270109</td>
      <td>195.0</td>
    </tr>
    <tr>
      <th>23673</th>
      <td>Whiplash</td>
      <td>4376.0</td>
      <td>8.3</td>
      <td>8.269704</td>
      <td>105.0</td>
    </tr>
    <tr>
      <th>5481</th>
      <td>Spirited Away</td>
      <td>3968.0</td>
      <td>8.3</td>
      <td>8.266628</td>
      <td>125.0</td>
    </tr>
    <tr>
      <th>2211</th>
      <td>Life Is Beautiful</td>
      <td>3643.0</td>
      <td>8.3</td>
      <td>8.263691</td>
      <td>116.0</td>
    </tr>
    <tr>
      <th>1178</th>
      <td>The Godfather: Part II</td>
      <td>3418.0</td>
      <td>8.3</td>
      <td>8.261335</td>
      <td>200.0</td>
    </tr>
    <tr>
      <th>1152</th>
      <td>One Flew Over the Cuckoo's Nest</td>
      <td>3001.0</td>
      <td>8.3</td>
      <td>8.256051</td>
      <td>133.0</td>
    </tr>
    <tr>
      <th>1176</th>
      <td>Psycho</td>
      <td>2405.0</td>
      <td>8.3</td>
      <td>8.245381</td>
      <td>109.0</td>
    </tr>
    <tr>
      <th>351</th>
      <td>Forrest Gump</td>
      <td>8147.0</td>
      <td>8.2</td>
      <td>8.184252</td>
      <td>142.0</td>
    </tr>
    <tr>
      <th>1184</th>
      <td>Once Upon a Time in America</td>
      <td>1104.0</td>
      <td>8.3</td>
      <td>8.183804</td>
      <td>229.0</td>
    </tr>
    <tr>
      <th>1154</th>
      <td>The Empire Strikes Back</td>
      <td>5998.0</td>
      <td>8.2</td>
      <td>8.178656</td>
      <td>124.0</td>
    </tr>
    <tr>
      <th>18465</th>
      <td>The Intouchables</td>
      <td>5410.0</td>
      <td>8.2</td>
      <td>8.176357</td>
      <td>112.0</td>
    </tr>
    <tr>
      <th>289</th>
      <td>Leon: The Professional</td>
      <td>4293.0</td>
      <td>8.2</td>
      <td>8.170276</td>
      <td>110.0</td>
    </tr>
    <tr>
      <th>3030</th>
      <td>The Green Mile</td>
      <td>4166.0</td>
      <td>8.2</td>
      <td>8.169381</td>
      <td>189.0</td>
    </tr>
    <tr>
      <th>1170</th>
      <td>GoodFellas</td>
      <td>3211.0</td>
      <td>8.2</td>
      <td>8.160414</td>
      <td>145.0</td>
    </tr>
    <tr>
      <th>2216</th>
      <td>American History X</td>
      <td>3120.0</td>
      <td>8.2</td>
      <td>8.159278</td>
      <td>119.0</td>
    </tr>
    <tr>
      <th>1161</th>
      <td>12 Angry Men</td>
      <td>2130.0</td>
      <td>8.2</td>
      <td>8.140785</td>
      <td>96.0</td>
    </tr>
    <tr>
      <th>9698</th>
      <td>Howl's Moving Castle</td>
      <td>2049.0</td>
      <td>8.2</td>
      <td>8.138499</td>
      <td>119.0</td>
    </tr>
    <tr>
      <th>2884</th>
      <td>Princess Mononoke</td>
      <td>2041.0</td>
      <td>8.2</td>
      <td>8.138264</td>
      <td>134.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the Bollywood film Dilwale Dulhania Le Jayenge figures at the top of the list. We can also see that it has a noticeably smaller number of votes than the other Top 25 movies. This strongly suggests that we should probably explore a higher value of m.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Knowledge-based-Recommender">Knowledge-based Recommender<a class="anchor-link" href="#Knowledge-based-Recommender"> </a></h2><p>This will be a simple function that will perform the following tasks:</p>
<ul>
<li>Ask the user for the genres of movies he/she is looking for</li>
<li>Ask the user for the duration</li>
<li>Ask the user for the timeline of the movies recommended</li>
<li>Using the information collected, recommend movies to the user that have a high weighted rating (according to the IMDB formula) and that satisfy the preceding conditions</li>
</ul>
<p>The data that we have has information on the duration, genres, and timelines, but it isn't currently in a form that is directly usable. In other words, our data needs to be wrangled before it can be put to use to build this recommender.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="s1">&#39;genres&#39;</span><span class="p">,</span> <span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;runtime&#39;</span><span class="p">,</span> <span class="s1">&#39;vote_average&#39;</span><span class="p">,</span> <span class="s1">&#39;vote_count&#39;</span><span class="p">]]</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>genres</th>
      <th>release_date</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>[{'id': 16, 'name': 'Animation'}, {'id': 35, '...</td>
      <td>1995-10-30</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>[{'id': 12, 'name': 'Adventure'}, {'id': 14, '...</td>
      <td>1995-12-15</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>[{'id': 10749, 'name': 'Romance'}, {'id': 35, ...</td>
      <td>1995-12-22</td>
      <td>101.0</td>
      <td>6.5</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>[{'id': 35, 'name': 'Comedy'}, {'id': 18, 'nam...</td>
      <td>1995-12-22</td>
      <td>127.0</td>
      <td>6.1</td>
      <td>34.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>[{'id': 35, 'name': 'Comedy'}]</td>
      <td>1995-02-10</td>
      <td>106.0</td>
      <td>5.7</td>
      <td>173.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, let us extract the year of release from our release_date feature:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="c1">#Extract year from the datetime</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="c1">#Helper function to convert NaT to 0 and all other years to integers.</span>
<span class="k">def</span> <span class="nf">convert_int</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

<span class="c1">#Apply convert_int to the year feature</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convert_int</span><span class="p">)</span>

<span class="c1">#Drop the release_date column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#Display the dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>genres</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>[{'id': 16, 'name': 'Animation'}, {'id': 35, '...</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>[{'id': 12, 'name': 'Adventure'}, {'id': 14, '...</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>[{'id': 10749, 'name': 'Romance'}, {'id': 35, ...</td>
      <td>101.0</td>
      <td>6.5</td>
      <td>92.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>[{'id': 35, 'name': 'Comedy'}, {'id': 18, 'nam...</td>
      <td>127.0</td>
      <td>6.1</td>
      <td>34.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>[{'id': 35, 'name': 'Comedy'}]</td>
      <td>106.0</td>
      <td>5.7</td>
      <td>173.0</td>
      <td>1995</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Upon preliminary inspection, we can observe that the genres are in a format that looks like a JSON object (or a Python dictionary). Let us take a look at the genres object of one of our movies:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;[{&#39;id&#39;: 16, &#39;name&#39;: &#39;Animation&#39;}, {&#39;id&#39;: 35, &#39;name&#39;: &#39;Comedy&#39;}, {&#39;id&#39;: 10751, &#39;name&#39;: &#39;Family&#39;}]&#34;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can observe that the output is a stringified dictionary. In order for this feature to be usable, it is important that we convert this string into a native Python dictionary. Fortunately, Python gives us access to a function called literal_eval (available in the ast library) which does exactly that. literal_eval parses any string passed into it and converts it into its corresponding Python object.</p>
<p>Also, each dictionary represents a genre and has two keys: id and name. However, for this exercise (as well as all subsequent exercises), we only require the name. Therefore, we shall convert our list of dictionaries into a list of strings, where each string is a genre name:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>

<span class="c1">#Convert all NaN into stringified empty lists</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;[]&#39;</span><span class="p">)</span>

<span class="c1">#Apply literal_eval to convert to the list object</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">literal_eval</span><span class="p">)</span>

<span class="c1">#Convert list of dictionaries to a list of strings</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[])</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>genres</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>[Animation, Comedy, Family]</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>[Adventure, Fantasy, Family]</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>[Romance, Comedy]</td>
      <td>101.0</td>
      <td>6.5</td>
      <td>92.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>[Comedy, Drama, Romance]</td>
      <td>127.0</td>
      <td>6.1</td>
      <td>34.0</td>
      <td>1995</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>[Comedy]</td>
      <td>106.0</td>
      <td>5.7</td>
      <td>173.0</td>
      <td>1995</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The last step is to explode the genres column. In other words, if a particular movie has multiple genres, we will create multiple copies of the movie, with each movie having one of the genres.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">#Name the new feature as &#39;genre&#39;</span>
<span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;genre&#39;</span>

<span class="c1">#Create a new dataframe gen_df which by dropping the old &#39;genres&#39; feature and adding the new &#39;genre&#39;.</span>
<span class="n">gen_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;genres&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c1">#Print the head of the new gen_df</span>
<span class="n">gen_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:2: DeprecationWarning: The default dtype for empty Series will be &#39;object&#39; instead of &#39;float64&#39; in a future version. Specify a dtype explicitly to silence this warning.
  
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
      <th>genre</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
      <td>Animation</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
      <td>Comedy</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
      <td>Family</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
      <td>Adventure</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
      <td>Fantasy</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>build_chart function</p>
<ol>
<li>Get user input on their preferences</li>
<li>Extract all movies that match the conditions set by the user</li>
<li>Calculate the values of m and C for only these movies and proceed to build the chart</li>
</ol>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">build_chart</span><span class="p">(</span><span class="n">gen_df</span><span class="p">,</span> <span class="n">percentile</span><span class="o">=</span><span class="mf">0.8</span><span class="p">):</span>
    <span class="c1">#Ask for preferred genres</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input preferred genre&quot;</span><span class="p">)</span>
    <span class="n">genre</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
    
    <span class="c1">#Ask for lower limit of duration</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input shortest duration&quot;</span><span class="p">)</span>
    <span class="n">low_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    
    <span class="c1">#Ask for upper limit of duration</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input longest duration&quot;</span><span class="p">)</span>
    <span class="n">high_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    
    <span class="c1">#Ask for lower limit of timeline</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input earliest year&quot;</span><span class="p">)</span>
    <span class="n">low_year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    
    <span class="c1">#Ask for upper limit of timeline</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input latest year&quot;</span><span class="p">)</span>
    <span class="n">high_year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    
    <span class="c1">#Define a new movies variable to store the preferred movies. Copy the contents of gen_df to movies</span>
    <span class="n">movies</span> <span class="o">=</span> <span class="n">gen_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="c1">#Filter based on the condition</span>
    <span class="n">movies</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;genre&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">genre</span><span class="p">)</span> <span class="o">&amp;</span> 
                    <span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;runtime&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">low_time</span><span class="p">)</span> <span class="o">&amp;</span> 
                    <span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;runtime&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">high_time</span><span class="p">)</span> <span class="o">&amp;</span> 
                    <span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">low_year</span><span class="p">)</span> <span class="o">&amp;</span> 
                    <span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">high_year</span><span class="p">)]</span>
    
    <span class="c1">#Compute the values of C and m for the filtered movies</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">&#39;vote_average&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">percentile</span><span class="p">)</span>
    
    <span class="c1">#Only consider movies that have higher than m votes. Save this in a new dataframe q_movies</span>
    <span class="n">q_movies</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">m</span><span class="p">]</span>
    
    <span class="c1">#Calculate score using the IMDB formula</span>
    <span class="n">q_movies</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">q_movies</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_average&#39;</span><span class="p">])</span> 
                                       <span class="o">+</span> <span class="p">(</span><span class="n">m</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;vote_count&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">C</span><span class="p">)</span>
                                       <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1">#Sort movies in descending order of their scores</span>
    <span class="n">q_movies</span> <span class="o">=</span> <span class="n">q_movies</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">q_movies</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">build_chart</span><span class="p">(</span><span class="n">gen_df</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input preferred genre
Action
Input shortest duration
80
Input longest duration
120
Input earliest year
1990
Input latest year
2000
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
      <th>genre</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>723</th>
      <td>Ghost in the Shell</td>
      <td>83.0</td>
      <td>7.8</td>
      <td>854.0</td>
      <td>1995</td>
      <td>Action</td>
      <td>7.521643</td>
    </tr>
    <tr>
      <th>550</th>
      <td>True Romance</td>
      <td>120.0</td>
      <td>7.5</td>
      <td>762.0</td>
      <td>1993</td>
      <td>Action</td>
      <td>7.231980</td>
    </tr>
    <tr>
      <th>3902</th>
      <td>O Brother, Where Art Thou?</td>
      <td>106.0</td>
      <td>7.3</td>
      <td>1144.0</td>
      <td>2000</td>
      <td>Action</td>
      <td>7.131617</td>
    </tr>
    <tr>
      <th>348</th>
      <td>The Crow</td>
      <td>102.0</td>
      <td>7.3</td>
      <td>980.0</td>
      <td>1994</td>
      <td>Action</td>
      <td>7.106412</td>
    </tr>
    <tr>
      <th>3871</th>
      <td>Crouching Tiger, Hidden Dragon</td>
      <td>120.0</td>
      <td>7.2</td>
      <td>949.0</td>
      <td>2000</td>
      <td>Action</td>
      <td>7.011634</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the movies that it outputs satisfy all the conditions we passed in as input. Since we applied IMDB's metric, we can also observe that our movies are very highly rated and popular at the same time.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Content-based-Recommender">Content-based Recommender<a class="anchor-link" href="#Content-based-Recommender"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The simple recommender did not take into consideration an individual user's preferences. The knowledge-based recommender did take account of the user's preference for genres, timelines, and duration, but the model and its recommendations still remained very generic. Imagine that Alice likes the movies The Dark Knight, Iron Man, and Man of Steel. It is pretty evident that Alice has a taste for superhero movies. However, our models would not be able to capture this detail. The best it could do is suggest action movies (by making Alice input action as the preferred genre), which is a superset of superhero movies.</p>
<p>It is also possible that two movies have the same genre, timeline, and duration characteristics, but differ hugely in their audience. Consider The Hangover and Forgetting Sarah Marshall, for example. Both these movies were released in the first decade of the 21st century, both lasted around two hours, and both were comedies. However, the kind of audience that enjoyed these movies was very different.</p>
<p>We are going to build two types of content-based recommender:</p>
<ol>
<li>Plot description-based recommender: This model compares the descriptions and taglines of different movies, and provides recommendations that have the most similar plot descriptions.</li>
<li>Metadata-based recommender: This model takes a host of features, such as genres, keywords, cast, and crew, into consideration and provides recommendations that are the most similar with respect to the aforementioned features.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Plot-description-based-recommender">Plot description-based recommender<a class="anchor-link" href="#Plot-description-based-recommender"> </a></h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">orig_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;movies_metadata.csv&#39;</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1">#Add the useful features into the cleaned dataframe</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">orig_df</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">],</span> <span class="n">orig_df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>genres</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
      <th>overview</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>['Animation', 'Comedy', 'Family']</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
      <td>Led by Woody, Andy's toys live happily in his ...</td>
      <td>862</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>['Adventure', 'Fantasy', 'Family']</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
      <td>When siblings Judy and Peter discover an encha...</td>
      <td>8844</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>['Romance', 'Comedy']</td>
      <td>101.0</td>
      <td>6.5</td>
      <td>92.0</td>
      <td>1995</td>
      <td>A family wedding reignites the ancient feud be...</td>
      <td>15602</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>['Comedy', 'Drama', 'Romance']</td>
      <td>127.0</td>
      <td>6.1</td>
      <td>34.0</td>
      <td>1995</td>
      <td>Cheated on, mistreated and stepped on, the wom...</td>
      <td>31357</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>['Comedy']</td>
      <td>106.0</td>
      <td>5.7</td>
      <td>173.0</td>
      <td>1995</td>
      <td>Just when George Banks has recovered from his ...</td>
      <td>11862</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>

<span class="c1">#Define a TF-IDF Vectorizer Object. Remove all english stopwords</span>
<span class="n">tfidf</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">stop_words</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>

<span class="c1">#Replace NaN with an empty string</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1">#Construct the required TF-IDF matrix by applying the fit_transform method on the overview feature</span>
<span class="n">tfidf_matrix</span> <span class="o">=</span> <span class="n">tfidf</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">])</span>

<span class="c1">#Output the shape of tfidf_matrix</span>
<span class="n">tfidf_matrix</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;45466x75827 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;
	with 1210882 stored elements in Compressed Sparse Row format&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We see that the vectorizer has created a 75,827-dimensional vector for the overview of every movie.</p>
<p>The next step is to calculate the pairwise cosine similarity score of every movie. In other words, we are going to create a 45,466 × 45,466 matrix, where the cell in the ith row and jth column represents the similarity score between movies i and j. We can easily see that this matrix is symmetric in nature and every element in the diagonal is 1, since it is the similarity score of the movie with itself.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">linear_kernel</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">indices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">content_recommender</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">tfidf_matrix</span><span class="o">=</span><span class="n">tfidf_matrix</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">):</span>
    <span class="c1"># Obtain the index of the movie that matches the title</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">title</span><span class="p">]</span>

    <span class="c1"># Get the pairwsie similarity scores of all movies with that movie</span>
    <span class="c1"># And convert it into a list of tuples as described above</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">linear_kernel</span><span class="p">(</span><span class="n">tfidf_matrix</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">tfidf_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span>

    <span class="c1"># Sort the movies based on the cosine similarity scores</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sim_scores</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Get the scores of the 10 most similar movies. Ignore the first movie.</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="n">sim_scores</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span>

    <span class="c1"># Get the movie indices</span>
    <span class="n">movie_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sim_scores</span><span class="p">]</span>

    <span class="c1"># Return the top 10 most similar movies</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">movie_indices</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">content_recommender</span><span class="p">(</span><span class="s1">&#39;The Lion King&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>34682    How the Lion Cub and the Turtle Sang a Song
9353                                The Lion King 1½
9115                  The Lion King 2: Simba&#39;s Pride
42829                                           Prey
25654                                 Fearless Fagan
17041                                   African Cats
27933              Massaï, les guerriers de la pluie
6094                                       Born Free
37409                                     Sour Grape
3203                                The Waiting Game
Name: title, dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We see that our recommender has suggested all of The Lion King's sequels in its top-10 list. We also notice that most of the movies in the list have to do with lions.</p>
<p>It goes without saying that a person who loves The Lion King is very likely to have a thing for Disney movies. They may also prefer to watch animated movies. Unfortunately, our plot description recommender isn't able to capture all this information.</p>
<p>Therefore, in the next section, we will build a recommender that uses more advanced metadata, such as genres, cast, crew, and keywords (or sub-genres). This recommender will be able to do a much better job of identifying an individual's taste for a particular director, actor, sub-genre, and so on.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Metadata-based-recommender">Metadata-based recommender<a class="anchor-link" href="#Metadata-based-recommender"> </a></h3><p>To build this model, we will be using the following metdata:</p>
<ul>
<li>The genre of the movie. </li>
<li>The director of the movie. This person is part of the crew.</li>
<li>The movie's three major stars. They are part of the cast.</li>
<li>Sub-genres or keywords.</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cred_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;credits.csv&#39;</span><span class="p">)</span>
<span class="n">key_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;keywords.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cred_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cast</th>
      <th>crew</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[{'cast_id': 14, 'character': 'Woody (voice)',...</td>
      <td>[{'credit_id': '52fe4284c3a36847f8024f49', 'de...</td>
      <td>862</td>
    </tr>
    <tr>
      <th>1</th>
      <td>[{'cast_id': 1, 'character': 'Alan Parrish', '...</td>
      <td>[{'credit_id': '52fe44bfc3a36847f80a7cd1', 'de...</td>
      <td>8844</td>
    </tr>
    <tr>
      <th>2</th>
      <td>[{'cast_id': 2, 'character': 'Max Goldman', 'c...</td>
      <td>[{'credit_id': '52fe466a9251416c75077a89', 'de...</td>
      <td>15602</td>
    </tr>
    <tr>
      <th>3</th>
      <td>[{'cast_id': 1, 'character': "Savannah 'Vannah...</td>
      <td>[{'credit_id': '52fe44779251416c91011acb', 'de...</td>
      <td>31357</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[{'cast_id': 1, 'character': 'George Banks', '...</td>
      <td>[{'credit_id': '52fe44959251416c75039ed7', 'de...</td>
      <td>11862</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">key_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>keywords</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>862</td>
      <td>[{'id': 931, 'name': 'jealousy'}, {'id': 4290,...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8844</td>
      <td>[{'id': 10090, 'name': 'board game'}, {'id': 1...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>15602</td>
      <td>[{'id': 1495, 'name': 'fishing'}, {'id': 12392...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>31357</td>
      <td>[{'id': 818, 'name': 'based on novel'}, {'id':...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11862</td>
      <td>[{'id': 1009, 'name': 'baby'}, {'id': 1599, 'n...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the cast, crew, and the keywords are in the familiar list of dictionaries form. Just like genres, we have to reduce them to a string or a list of strings.</p>
<p>Before we do this, however, we will join the three DataFrames so that all our features are in a single DataFrame. Joining pandas DataFrames is identical to joining tables in SQL. The key we're going to use to join the DataFrames is the id feature. However, in order to use this, we first need to explicitly convert is listed as an ID. This is clearly bad data.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="data:image/png;base64,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" alt="image.png" /></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">clean_ids</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="c1">#Clean the ids of df</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">clean_ids</span><span class="p">)</span>

<span class="c1">#Filter all rows that have a null ID</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>

<span class="c1"># Convert IDs into integer</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">key_df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key_df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">cred_df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cred_df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>

<span class="c1"># Merge keywords and credits into your main metadata dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">cred_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">key_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="c1">#Display the head of df</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:15: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  from ipykernel import kernelapp as app
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>genres</th>
      <th>runtime</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>year</th>
      <th>overview</th>
      <th>id</th>
      <th>cast</th>
      <th>crew</th>
      <th>keywords</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>['Animation', 'Comedy', 'Family']</td>
      <td>81.0</td>
      <td>7.7</td>
      <td>5415.0</td>
      <td>1995</td>
      <td>Led by Woody, Andy's toys live happily in his ...</td>
      <td>862</td>
      <td>[{'cast_id': 14, 'character': 'Woody (voice)',...</td>
      <td>[{'credit_id': '52fe4284c3a36847f8024f49', 'de...</td>
      <td>[{'id': 931, 'name': 'jealousy'}, {'id': 4290,...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>['Adventure', 'Fantasy', 'Family']</td>
      <td>104.0</td>
      <td>6.9</td>
      <td>2413.0</td>
      <td>1995</td>
      <td>When siblings Judy and Peter discover an encha...</td>
      <td>8844</td>
      <td>[{'cast_id': 1, 'character': 'Alan Parrish', '...</td>
      <td>[{'credit_id': '52fe44bfc3a36847f80a7cd1', 'de...</td>
      <td>[{'id': 10090, 'name': 'board game'}, {'id': 1...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>['Romance', 'Comedy']</td>
      <td>101.0</td>
      <td>6.5</td>
      <td>92.0</td>
      <td>1995</td>
      <td>A family wedding reignites the ancient feud be...</td>
      <td>15602</td>
      <td>[{'cast_id': 2, 'character': 'Max Goldman', 'c...</td>
      <td>[{'credit_id': '52fe466a9251416c75077a89', 'de...</td>
      <td>[{'id': 1495, 'name': 'fishing'}, {'id': 12392...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>['Comedy', 'Drama', 'Romance']</td>
      <td>127.0</td>
      <td>6.1</td>
      <td>34.0</td>
      <td>1995</td>
      <td>Cheated on, mistreated and stepped on, the wom...</td>
      <td>31357</td>
      <td>[{'cast_id': 1, 'character': "Savannah 'Vannah...</td>
      <td>[{'credit_id': '52fe44779251416c91011acb', 'de...</td>
      <td>[{'id': 818, 'name': 'based on novel'}, {'id':...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>['Comedy']</td>
      <td>106.0</td>
      <td>5.7</td>
      <td>173.0</td>
      <td>1995</td>
      <td>Just when George Banks has recovered from his ...</td>
      <td>11862</td>
      <td>[{'cast_id': 1, 'character': 'George Banks', '...</td>
      <td>[{'credit_id': '52fe44959251416c75039ed7', 'de...</td>
      <td>[{'id': 1009, 'name': 'baby'}, {'id': 1599, 'n...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>

<span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cast&#39;</span><span class="p">,</span> <span class="s1">&#39;crew&#39;</span><span class="p">,</span> <span class="s1">&#39;keywords&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">literal_eval</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;crew&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;credit_id&#39;: &#39;52fe4284c3a36847f8024f49&#39;,
 &#39;department&#39;: &#39;Directing&#39;,
 &#39;gender&#39;: 2,
 &#39;id&#39;: 7879,
 &#39;job&#39;: &#39;Director&#39;,
 &#39;name&#39;: &#39;John Lasseter&#39;,
 &#39;profile_path&#39;: &#39;/7EdqiNbr4FRjIhKHyPPdFfEEEFG.jpg&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_director</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">crew_member</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">crew_member</span><span class="p">[</span><span class="s1">&#39;job&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Director&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">crew_member</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="c1">#Define the new director feature</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;director&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;crew&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">get_director</span><span class="p">)</span>

<span class="c1">#Print the directors of the first five movies</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;director&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0      John Lasseter
1       Joe Johnston
2      Howard Deutch
3    Forest Whitaker
4      Charles Shyer
Name: director, dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Both keywords and cast are dictionary lists as well. And, in both cases, we need to extract the top three name attributes of each list. Therefore, we can write a single function to wrangle both these features. Also, just like keywords and cast, we will only consider the top three genres for every movie:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">generate_list</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="c1">#Check if more than 3 elements exist. If yes, return only first three. If no, return entire list.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">names</span>

    <span class="c1">#Return empty list in case of missing/malformed data</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cast&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cast&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">generate_list</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;keywords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;keywords&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">generate_list</span><span class="p">)</span>

<span class="c1">#Only consider a maximum of 3 genres</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>

<span class="c1"># Print the new features of the first 5 movies along with title</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;cast&#39;</span><span class="p">,</span> <span class="s1">&#39;director&#39;</span><span class="p">,</span> <span class="s1">&#39;keywords&#39;</span><span class="p">,</span> <span class="s1">&#39;genres&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>cast</th>
      <th>director</th>
      <th>keywords</th>
      <th>genres</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Toy Story</td>
      <td>[Tom Hanks, Tim Allen, Don Rickles]</td>
      <td>John Lasseter</td>
      <td>[jealousy, toy, boy]</td>
      <td>['A</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jumanji</td>
      <td>[Robin Williams, Jonathan Hyde, Kirsten Dunst]</td>
      <td>Joe Johnston</td>
      <td>[board game, disappearance, based on children'...</td>
      <td>['A</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Grumpier Old Men</td>
      <td>[Walter Matthau, Jack Lemmon, Ann-Margret]</td>
      <td>Howard Deutch</td>
      <td>[fishing, best friend, duringcreditsstinger]</td>
      <td>['R</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Waiting to Exhale</td>
      <td>[Whitney Houston, Angela Bassett, Loretta Devine]</td>
      <td>Forest Whitaker</td>
      <td>[based on novel, interracial relationship, sin...</td>
      <td>['C</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Father of the Bride Part II</td>
      <td>[Steve Martin, Diane Keaton, Martin Short]</td>
      <td>Charles Shyer</td>
      <td>[baby, midlife crisis, confidence]</td>
      <td>['C</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the subsequent steps, we are going to use a vectorizer to build document vectors. If two actors had the same first name (say, Ryan Reynolds and Ryan Gosling), the vectorizer will treat both Ryans as the same, although they are clearly different entities. This will impact the quality of the recommendations we receive. If a person likes Ryan Reynolds' movies, it doesn't imply that they like movies by all Ryans.</p>
<p>Therefore, the last step is to strip the spaces between keywords, and actor and director names, and convert them all into lowercase. Therefore, the two Ryans in the preceding example will become ryangosling and ryanreynolds, and our vectorizer will now be able to distinguish between them:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">sanitize</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="c1">#Strip spaces and convert to lowercase</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#Check if director exists. If not, return empty string</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;cast&#39;</span><span class="p">,</span> <span class="s1">&#39;director&#39;</span><span class="p">,</span> <span class="s1">&#39;genres&#39;</span><span class="p">,</span> <span class="s1">&#39;keywords&#39;</span><span class="p">]:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">sanitize</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the plot description-based recommender, we worked with a single overview feature, which was a body of text. Therefore, we were able to apply our vectorizer directly.</p>
<p>However, this is not the case with our metadata-based recommender. We have four features to work with, of which three are lists and one is a string. What we need to do is create a soup that contains the actors, director, keywords, and genres. This way, we can feed this soup into our vectorizer and perform similar follow-up steps to before:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create_soup</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;keywords&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;cast&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;director&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;soup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">create_soup</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#Display the soup of the first movie</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;soup&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;jealousy toy boy tomhanks timallen donrickles johnlasseter [ &#39; a&#34;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The next steps are almost identical to the corresponding steps from the previous section.</p>
<p>Instead of using TF-IDFVectorizer, we will be using CountVectorizer. This is because using TF-IDFVectorizer will accord less weight to actors and directors who have acted and directed in a relatively larger number of movies.</p>
<p>This is not desirable, as we do not want to penalize artists for directing or appearing in more movies:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="c1">#Define a new CountVectorizer object and create vectors for the soup</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">stop_words</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="n">count_matrix</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;soup&#39;</span><span class="p">])</span>

<span class="c1">#Import cosine_similarity function</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">cosine_similarity</span>

<span class="c1"># Reset index of your df and construct reverse mapping again</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">indices2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">content_recommender</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">tfidf_matrix</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">):</span>
    <span class="c1"># Obtain the index of the movie that matches the title</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">title</span><span class="p">]</span>

    <span class="c1"># Get the pairwsie similarity scores of all movies with that movie</span>
    <span class="c1"># And convert it into a list of tuples as described above</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">linear_kernel</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">matrix</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span>

    <span class="c1"># Sort the movies based on the cosine similarity scores</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sim_scores</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Get the scores of the 10 most similar movies. Ignore the first movie.</span>
    <span class="n">sim_scores</span> <span class="o">=</span> <span class="n">sim_scores</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span>

    <span class="c1"># Get the movie indices</span>
    <span class="n">movie_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sim_scores</span><span class="p">]</span>

    <span class="c1"># Return the top 10 most similar movies</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">movie_indices</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">content_recommender</span><span class="p">(</span><span class="s1">&#39;The Lion King&#39;</span><span class="p">,</span> <span class="n">count_matrix</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">indices2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>986                              Infinity
7                            Tom and Huck
39               Cry, the Beloved Country
270                      Man of the House
364    Mrs. Parker and the Vicious Circle
428                           Clean Slate
513                 The Road to Wellville
626                        A Family Thing
651             James and the Giant Peach
771                         The Cable Guy
Name: title, dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="EDA">EDA<a class="anchor-link" href="#EDA"> </a></h2><p><a href="https://www.kaggle.com/rounakbanik/the-story-of-film">https://www.kaggle.com/rounakbanik/the-story-of-film</a></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;movies_metadata.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/usr/local/lib/python3.7/dist-packages/IPython/core/interactiveshell.py:2718: DtypeWarning: Columns (10) have mixed types.Specify dtype option on import or set low_memory=False.
  interactivity=interactivity, compiler=compiler, result=result)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>adult</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>belongs_to_collection</th>
      <td>{'id': 10194, 'name': 'Toy Story Collection', ...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>budget</th>
      <td>30000000</td>
      <td>65000000</td>
    </tr>
    <tr>
      <th>genres</th>
      <td>[{'id': 16, 'name': 'Animation'}, {'id': 35, '...</td>
      <td>[{'id': 12, 'name': 'Adventure'}, {'id': 14, '...</td>
    </tr>
    <tr>
      <th>homepage</th>
      <td>http://toystory.disney.com/toy-story</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>id</th>
      <td>862</td>
      <td>8844</td>
    </tr>
    <tr>
      <th>imdb_id</th>
      <td>tt0114709</td>
      <td>tt0113497</td>
    </tr>
    <tr>
      <th>original_language</th>
      <td>en</td>
      <td>en</td>
    </tr>
    <tr>
      <th>original_title</th>
      <td>Toy Story</td>
      <td>Jumanji</td>
    </tr>
    <tr>
      <th>overview</th>
      <td>Led by Woody, Andy's toys live happily in his ...</td>
      <td>When siblings Judy and Peter discover an encha...</td>
    </tr>
    <tr>
      <th>popularity</th>
      <td>21.9469</td>
      <td>17.0155</td>
    </tr>
    <tr>
      <th>poster_path</th>
      <td>/rhIRbceoE9lR4veEXuwCC2wARtG.jpg</td>
      <td>/vzmL6fP7aPKNKPRTFnZmiUfciyV.jpg</td>
    </tr>
    <tr>
      <th>production_companies</th>
      <td>[{'name': 'Pixar Animation Studios', 'id': 3}]</td>
      <td>[{'name': 'TriStar Pictures', 'id': 559}, {'na...</td>
    </tr>
    <tr>
      <th>production_countries</th>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
      <td>[{'iso_3166_1': 'US', 'name': 'United States o...</td>
    </tr>
    <tr>
      <th>release_date</th>
      <td>1995-10-30</td>
      <td>1995-12-15</td>
    </tr>
    <tr>
      <th>revenue</th>
      <td>3.73554e+08</td>
      <td>2.62797e+08</td>
    </tr>
    <tr>
      <th>runtime</th>
      <td>81</td>
      <td>104</td>
    </tr>
    <tr>
      <th>spoken_languages</th>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}, {'iso...</td>
    </tr>
    <tr>
      <th>status</th>
      <td>Released</td>
      <td>Released</td>
    </tr>
    <tr>
      <th>tagline</th>
      <td>NaN</td>
      <td>Roll the dice and unleash the excitement!</td>
    </tr>
    <tr>
      <th>title</th>
      <td>Toy Story</td>
      <td>Jumanji</td>
    </tr>
    <tr>
      <th>video</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>vote_average</th>
      <td>7.7</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>vote_count</th>
      <td>5415</td>
      <td>2413</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Features"><strong>Features</strong><a class="anchor-link" href="#Features"> </a></h3><ul>
<li><strong>adult:</strong> Indicates if the movie is X-Rated or Adult.</li>
<li><strong>belongs_to_collection:</strong> A stringified dictionary that gives information on the movie series the particular film belongs to.</li>
<li><strong>budget:</strong> The budget of the movie in dollars.</li>
<li><strong>genres:</strong> A stringified list of dictionaries that list out all the genres associated with the movie.</li>
<li><strong>homepage:</strong> The Official Homepage of the move.</li>
<li><strong>id:</strong> The ID of the move.</li>
<li><strong>imdb_id:</strong> The IMDB ID of the movie.</li>
<li><strong>original_language:</strong> The language in which the movie was originally shot in.</li>
<li><strong>original_title:</strong> The original title of the movie.</li>
<li><strong>overview:</strong> A brief blurb of the movie.</li>
<li><strong>popularity:</strong> The Popularity Score assigned by TMDB.</li>
<li><strong>poster_path:</strong> The URL of the poster image.</li>
<li><strong>production_companies:</strong> A stringified list of production companies involved with the making of the movie.</li>
<li><strong>production_countries:</strong> A stringified list of countries where the movie was shot/produced in.</li>
<li><strong>release_date:</strong> Theatrical Release Date of the movie.</li>
<li><strong>revenue:</strong> The total revenue of the movie in dollars.</li>
<li><strong>runtime:</strong> The runtime of the movie in minutes.</li>
<li><strong>spoken_languages:</strong> A stringified list of spoken languages in the film.</li>
<li><strong>status:</strong> The status of the movie (Released, To Be Released, Announced, etc.)</li>
<li><strong>tagline:</strong> The tagline of the movie.</li>
<li><strong>title:</strong> The Official Title of the movie.</li>
<li><strong>video:</strong> Indicates if there is a video present of the movie with TMDB.</li>
<li><strong>vote_average:</strong> The average rating of the movie.</li>
<li><strong>vote_count:</strong> The number of votes by users, as counted by TMDB.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>References</p>
<ul>
<li><a href="https://www.kaggle.com/rounakbanik/the-movies-dataset">Kaggle</a></li>
<li><a href="https://learning.oreilly.com/library/view/hands-on-recommendation-systems/9781788993753/">eBook</a></li>
</ul>

</div>
</div>
</div>
</div>



  </div><a class="u-url" href="/2022/01/17/movie-recsys.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Jupyter notebook database.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/recohut" target="_blank" title="recohut"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
