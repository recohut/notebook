<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Vehicle Detection | reconb</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Vehicle Detection" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Jupyter notebook database." />
<meta property="og:description" content="Jupyter notebook database." />
<link rel="canonical" href="https://nb.recohut.com/2022/01/01/vehicle-detection.html" />
<meta property="og:url" content="https://nb.recohut.com/2022/01/01/vehicle-detection.html" />
<meta property="og:site_name" content="reconb" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-01T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Vehicle Detection" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-01T00:00:00-06:00","datePublished":"2022-01-01T00:00:00-06:00","description":"Jupyter notebook database.","headline":"Vehicle Detection","mainEntityOfPage":{"@type":"WebPage","@id":"https://nb.recohut.com/2022/01/01/vehicle-detection.html"},"url":"https://nb.recohut.com/2022/01/01/vehicle-detection.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://nb.recohut.com/feed.xml" title="reconb" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">reconb</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Vehicle Detection</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-01-01T00:00:00-06:00" itemprop="datePublished">
        Jan 1, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      30 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/recohut/notebook/tree/master/_notebooks/2022-01-01-vehicle-detection.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/recohut/notebook/master?filepath=_notebooks%2F2022-01-01-vehicle-detection.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/recohut/notebook/blob/master/_notebooks/2022-01-01-vehicle-detection.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Frecohut%2Fnotebook%2Fblob%2Fmaster%2F_notebooks%2F2022-01-01-vehicle-detection.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-01-01-vehicle-detection.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install sk-video&gt;<span class="o">=</span><span class="m">1</span>.1.8
<span class="kn">import</span> <span class="nn">os</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;road.mp4&#39;</span><span class="p">):</span>
    <span class="o">!</span>wget https://learnml.s3.eu-north-1.amazonaws.com/road.mp4
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--2020-01-10 13:06:41--  https://learnml.s3.eu-north-1.amazonaws.com/road.mp4
Resolving learnml.s3.eu-north-1.amazonaws.com (learnml.s3.eu-north-1.amazonaws.com)... 52.95.169.4
Connecting to learnml.s3.eu-north-1.amazonaws.com (learnml.s3.eu-north-1.amazonaws.com)|52.95.169.4|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 191816449 (183M) [video/mp4]
Saving to: ‘road.mp4’

road.mp4            100%[===================&gt;] 182.93M  18.9MB/s    in 11s     

2020-01-10 13:06:53 (16.6 MB/s) - ‘road.mp4’ saved [191816449/191816449]

</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Tutorial:-Making-Road-Traffic-Counting-App-based-on-Computer-Vision-and-OpenCV">Tutorial: Making Road Traffic Counting App based on Computer Vision and OpenCV<a class="anchor-link" href="#Tutorial:-Making-Road-Traffic-Counting-App-based-on-Computer-Vision-and-OpenCV"> </a></h1><p><img src="https://miro.medium.com/max/1280/1*kFbuhpNtiUFUU0nL2n5NLA.png" alt="" /></p>
<p>Today we will learn how to count road traffic based on computer vision and without heavy deep learning algorithms.</p>
<p>For this tutorial, we will use only Python and OpenCV with the pretty simple idea of motion detection with help of background subtraction algorithm.</p>
<p><strong>Here is our plan:</strong></p>
<ol>
<li>Understand the main idea of background subtraction algorithms that used for foreground detection.</li>
<li>OpenCV image filters.</li>
<li>Object detection by contours.</li>
<li>Building processing pipeline for further data manipulation.</li>
</ol>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">logging.handlers</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">skvideo.io</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>

<span class="c1"># without this some strange errors happen</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">ocl</span><span class="o">.</span><span class="n">setUseOpenCL</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="c1"># setup logging</span>
<span class="k">def</span> <span class="nf">init_logging</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">):</span>
    <span class="n">main_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">hnd</span> <span class="ow">in</span> <span class="n">main_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
        <span class="n">main_logger</span><span class="o">.</span><span class="n">removeHandler</span><span class="p">(</span><span class="n">hnd</span><span class="p">)</span>

    <span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span>
        <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1">.</span><span class="si">%(msecs)03d</span><span class="s1"> </span><span class="si">%(levelname)-8s</span><span class="s1"> [</span><span class="si">%(name)s</span><span class="s1">] </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>

    <span class="n">handler_stream</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">handler_stream</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="n">main_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler_stream</span><span class="p">)</span>
    <span class="n">main_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">main_logger</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Background-subtraction-algorithms">Background subtraction algorithms<a class="anchor-link" href="#Background-subtraction-algorithms"> </a></h2><p><img src="https://miro.medium.com/max/473/0*iNYtQubKAtK0OGG5.png" alt="" /></p>
<p>There are many different algorithms for background subtraction, but the main idea of them is very simple.</p>
<p>Let’s assume that you have a video of your room, and on some of the frames of this video there is no humans &amp; pets, so basically it’s static, let’s call it background_layer. So to get objects that are moving on the video we just need to:</p>
<p><code>foreground_objects = current_frame - background_layer</code></p>
<p>But in some cases, we cant get static frame because lighting can change, or some objects will be moved by someone, or always exist movement, etc. In such cases we are saving some number of frames and trying to figure out which of the pixels are the same for most of them, then this pixels becoming part of background_layer. Difference generally in how we get this background_layer and additional filtering that we use to make selection more accurate.</p>
<p>In this lesson, we will use MOG algorithm for background subtraction and after processing, it looks like this:</p>
<p><img src="https://miro.medium.com/max/2560/1*UctRAiOt_tyXOJd4aX1rZg.png" alt="" /></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">train_bg_subtractor</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        BG substractor need process some amount of frames to start giving result</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Training BG Subtractor...&#39;</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">cap</span><span class="p">:</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cap</span>

<span class="n">VIDEO_SOURCE</span> <span class="o">=</span> <span class="s2">&quot;road.mp4&quot;</span>

<span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">createBackgroundSubtractorMOG2</span><span class="p">(</span>
        <span class="n">history</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detectShadows</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Set up image source</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">skvideo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">vreader</span><span class="p">(</span><span class="n">VIDEO_SOURCE</span><span class="p">)</span>

<span class="c1"># skipping 500 frames to train bg subtractor</span>
<span class="n">train_bg_subtractor</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">frame</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
<span class="n">fg_mask</span> <span class="o">=</span> <span class="n">bg_subtractor</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training BG Subtractor...
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
lL+zRioAAAAASUVORK5CYII=
" />
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As you can see there is some noise on the foreground mask which we will try to remove with some standard filtering technic.</p>
<h2 id="Filtering">Filtering<a class="anchor-link" href="#Filtering"> </a></h2><p>For our case we will need this filters: <a href="http://docs.opencv.org/3.1.0/d7/d4d/tutorial_py_thresholding.html">Threshold</a>, <a href="http://docs.opencv.org/3.1.0/d9/d61/tutorial_py_morphological_ops.html">Erode, Dilate, Opening, Closing</a>. Please go by links and read about each of them and look how they work (to not make copy/paste)</p>
<p>So now we will use them to remove some noise on foreground mask.
First, we will use Closing to remove gaps in areas, then Opening to remove 1–2 px points, and after that dilation to make object bolder.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">filter_mask</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This filters are hand-picked just based on visual tests</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_ELLIPSE</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

    <span class="c1"># Fill any small holes</span>
    <span class="n">closing</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_CLOSE</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
    <span class="c1"># Remove noise</span>
    <span class="n">opening</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">closing</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_OPEN</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

    <span class="c1"># Dilate to merge adjacent blobs</span>
    <span class="n">dilation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">opening</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dilation</span>

<span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">createBackgroundSubtractorMOG2</span><span class="p">(</span>
        <span class="n">history</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detectShadows</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Set up image source</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">skvideo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">vreader</span><span class="p">(</span><span class="n">VIDEO_SOURCE</span><span class="p">)</span>

<span class="c1"># skipping 500 frames to train bg subtractor</span>
<span class="n">train_bg_subtractor</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">frame</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
<span class="n">fg_mask</span> <span class="o">=</span> <span class="n">bg_subtractor</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
<span class="n">fg_mask</span><span class="p">[</span><span class="n">fg_mask</span> <span class="o">&lt;</span> <span class="mi">240</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">fg_mask</span> <span class="o">=</span> <span class="n">filter_mask</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training BG Subtractor...
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
SPTDXnhnAAAAAElFTkSuQmCC
" />
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Object-detection-by-contours">Object detection by contours<a class="anchor-link" href="#Object-detection-by-contours"> </a></h2><p>For this purpose we will use the standard cv2.findContours method with params:</p>

<pre><code>cv2.CV_RETR_EXTERNAL — get only outer contours.
cv2.CV_CHAIN_APPROX_TC89_L1 - use Teh-Chin chain approximation algorithm (faster)</code></pre>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_centroid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">cx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x1</span>
    <span class="n">cy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">y1</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ContourDetection</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Detecting moving objects.</span>

<span class="sd">        Purpose of this processor is to subtrac background, get moving objects</span>
<span class="sd">        and detect them with a cv2.findContours method, and then filter off-by</span>
<span class="sd">        width and height. </span>

<span class="sd">        bg_subtractor - background subtractor isinstance.</span>
<span class="sd">        min_contour_width - min bounding rectangle width.</span>
<span class="sd">        min_contour_height - min bounding rectangle height.</span>
<span class="sd">        save_image - if True will save detected objects mask to file.</span>
<span class="sd">        image_dir - where to save images(must exist).        </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">min_contour_width</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">min_contour_height</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">save_image</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;images&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ContourDetection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">bg_subtractor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_width</span> <span class="o">=</span> <span class="n">min_contour_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_height</span> <span class="o">=</span> <span class="n">min_contour_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span> <span class="o">=</span> <span class="n">save_image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_dir</span> <span class="o">=</span> <span class="n">image_dir</span>

    <span class="k">def</span> <span class="nf">filter_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            This filters are hand-picked just based on visual tests</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_ELLIPSE</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="c1"># Fill any small holes</span>
        <span class="n">closing</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_CLOSE</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
        <span class="c1"># Remove noise</span>
        <span class="n">opening</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">closing</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_OPEN</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

        <span class="c1"># Dilate to merge adjacent blobs</span>
        <span class="n">dilation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">opening</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dilation</span>

    <span class="k">def</span> <span class="nf">detect_vehicles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg_mask</span><span class="p">):</span>

        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># finding external contours</span>
        <span class="n">contours</span><span class="p">,</span> <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span>
            <span class="n">fg_mask</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_TC89_L1</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">contour</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">contours</span><span class="p">):</span>
            <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contour</span><span class="p">)</span>
            <span class="c1"># On the exit, we add some filtering by height, width and add centroid.</span>
            <span class="n">contour_valid</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_width</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">h</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_height</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">contour_valid</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">centroid</span> <span class="o">=</span> <span class="n">get_centroid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

            <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="n">centroid</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">matches</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">fg_mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bg_subtractor</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
        <span class="c1"># just thresholding values</span>
        <span class="n">fg_mask</span><span class="p">[</span><span class="n">fg_mask</span> <span class="o">&lt;</span> <span class="mi">240</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fg_mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_mask</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_vehicles</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">)</span>

<span class="n">cd</span> <span class="o">=</span> <span class="n">ContourDetection</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="p">)</span>

<span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">createBackgroundSubtractorMOG2</span><span class="p">(</span>
        <span class="n">history</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detectShadows</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Set up image source</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">skvideo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">vreader</span><span class="p">(</span><span class="n">VIDEO_SOURCE</span><span class="p">)</span>

<span class="c1"># skipping 500 frames to train bg subtractor</span>
<span class="n">train_bg_subtractor</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">frame</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
<span class="n">objects</span> <span class="o">=</span> <span class="n">cd</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Getting list of [((x,y,w,h), (xc,yc)), ...]&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training BG Subtractor...
Getting list of [((x,y,w,h), (xc,yc)), ...]
[((344, 650, 120, 70), (404, 685)), ((1009, 598, 189, 122), (1103, 659)), ((1171, 581, 109, 139), (1225, 650)), ((194, 532, 131, 103), (259, 583)), ((395, 406, 61, 51), (425, 431)), ((228, 393, 142, 104), (299, 445)), ((494, 387, 68, 59), (528, 416)), ((856, 364, 55, 47), (883, 387)), ((460, 356, 49, 35), (484, 373)), ((752, 317, 79, 64), (791, 349)), ((508, 283, 54, 41), (535, 303)), ((594, 239, 52, 50), (620, 264))]
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Building-processing-pipeline">Building processing pipeline<a class="anchor-link" href="#Building-processing-pipeline"> </a></h2><p>You must understand that in ML and CV there is no one magic algorithm that making altogether, even if we imagine that such algorithm exists, we still wouldn’t use it because it would be not effective at scale. For example a few years ago Netflix created competition with the prize 3 million dollars for the best movie recommendation algorithm. And one of the team created such, problem was that it just couldn’t work at scale and thus was useless for the company. But still, Netflix paid 1 million to them :)</p>
<p>So now we will build simple processing pipeline, it not for scale just for convenient but the idea the same.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">PipelineRunner</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Very simple pipline.</span>

<span class="sd">        Just run passed processors in order with passing context from one to </span>
<span class="sd">        another.</span>

<span class="sd">        You can also set log level for processors.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="n">log_level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_log_level</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processor</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">PipelineProcessor</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;Processor should be an isinstance of PipelineProcessor.&#39;</span><span class="p">)</span>
        <span class="n">processor</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">set_log_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">p</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Frame #</span><span class="si">%d</span><span class="s2"> processed.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame_number&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>


<span class="k">class</span> <span class="nc">PipelineProcessor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Base class for processors.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As input constructor will take a list of processors that will be run in order. Each processor making part of the job.</p>
<p>We already have Countour Detection class, just need slightly udate it to use context</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">save_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">flip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1"># flip BGR to RGB</span>
    <span class="k">if</span> <span class="n">flip</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ContourDetection</span><span class="p">(</span><span class="n">PipelineProcessor</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Detecting moving objects.</span>

<span class="sd">        Purpose of this processor is to subtrac background, get moving objects</span>
<span class="sd">        and detect them with a cv2.findContours method, and then filter off-by</span>
<span class="sd">        width and height. </span>

<span class="sd">        bg_subtractor - background subtractor isinstance.</span>
<span class="sd">        min_contour_width - min bounding rectangle width.</span>
<span class="sd">        min_contour_height - min bounding rectangle height.</span>
<span class="sd">        save_image - if True will save detected objects mask to file.</span>
<span class="sd">        image_dir - where to save images(must exist).        </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">min_contour_width</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">min_contour_height</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">save_image</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;images&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ContourDetection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">bg_subtractor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_width</span> <span class="o">=</span> <span class="n">min_contour_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_height</span> <span class="o">=</span> <span class="n">min_contour_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span> <span class="o">=</span> <span class="n">save_image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_dir</span> <span class="o">=</span> <span class="n">image_dir</span>

    <span class="k">def</span> <span class="nf">filter_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            This filters are hand-picked just based on visual tests</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_ELLIPSE</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="c1"># Fill any small holes</span>
        <span class="n">closing</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_CLOSE</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
        <span class="c1"># Remove noise</span>
        <span class="n">opening</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">closing</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_OPEN</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

        <span class="c1"># Dilate to merge adjacent blobs</span>
        <span class="n">dilation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">opening</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dilation</span>

    <span class="k">def</span> <span class="nf">detect_vehicles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg_mask</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>

        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># finding external contours</span>
        <span class="n">contours</span><span class="p">,</span> <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span>
            <span class="n">fg_mask</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_TC89_L1</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">contour</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">contours</span><span class="p">):</span>
            <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contour</span><span class="p">)</span>
            <span class="n">contour_valid</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_width</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">h</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_contour_height</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">contour_valid</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">centroid</span> <span class="o">=</span> <span class="n">get_centroid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

            <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="n">centroid</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">matches</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">frame_number</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame_number&#39;</span><span class="p">]</span>

        <span class="n">fg_mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bg_subtractor</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
        <span class="c1"># just thresholding values</span>
        <span class="n">fg_mask</span><span class="p">[</span><span class="n">fg_mask</span> <span class="o">&lt;</span> <span class="mi">240</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fg_mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_mask</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">,</span> <span class="n">frame_number</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span><span class="p">:</span>
            <span class="n">save_frame</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_dir</span> <span class="o">+</span>
                             <span class="s2">&quot;/mask_</span><span class="si">%04d</span><span class="s2">.png&quot;</span> <span class="o">%</span> <span class="n">frame_number</span><span class="p">,</span> <span class="n">flip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;objects&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_vehicles</span><span class="p">(</span><span class="n">fg_mask</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;fg_mask&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fg_mask</span>

        <span class="k">return</span> <span class="n">context</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now let’s create a processor that will link detected objects on different frames and will create paths, and also will count vehicles that got to the exit zone.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;euclidian&#39;</span><span class="p">,</span> <span class="n">x_weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y_weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;euclidian&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">float</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">x_weight</span> <span class="o">+</span> <span class="nb">float</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">y_weight</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">VehicleCounter</span><span class="p">(</span><span class="n">PipelineProcessor</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Counting vehicles that entered in exit zone.</span>

<span class="sd">        Purpose of this class based on detected object and local cache create</span>
<span class="sd">        objects pathes and count that entered in exit zone defined by exit masks.</span>

<span class="sd">        exit_masks - list of the exit masks.</span>
<span class="sd">        path_size - max number of points in a path.</span>
<span class="sd">        max_dst - max distance between two points.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exit_masks</span><span class="o">=</span><span class="p">[],</span> <span class="n">path_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">max_dst</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">x_weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y_weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">VehicleCounter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exit_masks</span> <span class="o">=</span> <span class="n">exit_masks</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vehicle_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_size</span> <span class="o">=</span> <span class="n">path_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_dst</span> <span class="o">=</span> <span class="n">max_dst</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_weight</span> <span class="o">=</span> <span class="n">x_weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_weight</span> <span class="o">=</span> <span class="n">y_weight</span>

    <span class="k">def</span> <span class="nf">check_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">exit_mask</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_masks</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">exit_mask</span><span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;objects&#39;</span><span class="p">]</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;exit_masks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_masks</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;pathes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;vehicle_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vehicle_count</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">objects</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">context</span>

        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">objects</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="c1"># add new points if pathes is empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">match</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># link new points with old pathes based on minimum distance between</span>
            <span class="c1"># points</span>
            <span class="n">new_pathes</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">:</span>
                <span class="n">_min</span> <span class="o">=</span> <span class="mi">999999</span>
                <span class="n">_match</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="c1"># distance from last point to current</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># based on 2 prev points predict next point and calculate</span>
                        <span class="c1"># distance from predicted next point to current</span>
                        <span class="n">xn</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">yn</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span>
                            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">xn</span><span class="p">,</span> <span class="n">yn</span><span class="p">),</span>
                            <span class="n">x_weight</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x_weight</span><span class="p">,</span>
                            <span class="n">y_weight</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y_weight</span>
                        <span class="p">)</span>

                    <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">_min</span><span class="p">:</span>
                        <span class="n">_min</span> <span class="o">=</span> <span class="n">d</span>
                        <span class="n">_match</span> <span class="o">=</span> <span class="n">p</span>

                <span class="k">if</span> <span class="n">_match</span> <span class="ow">and</span> <span class="n">_min</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_dst</span><span class="p">:</span>
                    <span class="n">points</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_match</span><span class="p">)</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_match</span><span class="p">)</span>
                    <span class="n">new_pathes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

                <span class="c1"># do not drop path if current frame has no matches</span>
                <span class="k">if</span> <span class="n">_match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">new_pathes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span> <span class="o">=</span> <span class="n">new_pathes</span>

            <span class="c1"># add new pathes</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                    <span class="c1"># do not add points that already should be counted</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_exit</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                        <span class="k">continue</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p</span><span class="p">])</span>

        <span class="c1"># save only last N points in path</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">path_size</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">:]</span>

        <span class="c1"># count vehicles and drop counted pathes:</span>
        <span class="n">new_pathes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathes</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="c1"># need at list two points to count</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span>
                <span class="c1"># prev point not in exit zone</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_exit</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span>
                <span class="c1"># current point in exit zone</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_exit</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span>
                <span class="c1"># path len is bigger then min</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">path_size</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vehicle_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># prevent linking with path that already in exit zone</span>
                <span class="n">add</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_exit</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">add</span><span class="p">:</span>
                    <span class="n">new_pathes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span> <span class="o">=</span> <span class="n">new_pathes</span>

        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;pathes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathes</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;objects&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">objects</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;vehicle_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vehicle_count</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;#VEHICLES FOUND: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">vehicle_count</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">context</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This class a bit complicated so let’s walk through it by parts.</p>
<p><img src="https://miro.medium.com/max/1280/1*yTW0iqr8QK24Fkb6JJHhLw.png" alt="" /></p>
<p>This green mask on the image is exit zone, is where we counting our vehicles. For example, we will count only paths that have length more than 3 points(to remove some noise) and the 4th in the green zone.
We use masks cause it’s many operation effective and simpler than using vector algorithms.</p>
<p>Just use “binary and” operation to check that point in the area, and that’s all. And here is how we set it:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">EXIT_PTS</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[[</span><span class="mi">732</span><span class="p">,</span> <span class="mi">720</span><span class="p">],</span> <span class="p">[</span><span class="mi">732</span><span class="p">,</span> <span class="mi">590</span><span class="p">],</span> <span class="p">[</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span> <span class="p">[</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="p">[</span><span class="mi">645</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="p">[</span><span class="mi">645</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="p">])</span>
<span class="n">SHAPE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">720</span><span class="p">,</span><span class="mi">1280</span><span class="p">)</span>
<span class="n">base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">SHAPE</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="n">exit_mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">EXIT_PTS</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
bZLcnGQ2ycNJLpvsEKQ+LOf9NdW/kcId+CDwD1X108DPAI8Bu4H9VbUV2N+2Aa4GtrbHLuCWsfZY
6owhrklYNNyTnAu8BrgVoKq+W1XPAtuBva3ZXuDaVt4O3FYDDwBrk2wYe88lSQsa5cj9IuAo8JdJ
PpfkI0leAqyvqqdam6eB9a28ETg49PpDrU6StExGCfc1wGXALVV1KfAdXliCAaAGnymX9Lkyya4k
M0lmlvI6SdLiRgn3Q8Chqnqwbd/FIOyfmVtuac9H2v7DwOah129qdcepqj1Vta2qtp1q5yVJ81s0
3KvqaeBgkle0qiuBR4F9wI5WtwO4u5X3ATe0s2YuB44NLd9IkpbBqOe5/w5we5Kzga8ANzL4wXBn
kp3Ak8B1re29wDXALPBcaytJWkZZCadgJZl+J6QpWQn/B7U6JTmw0NL2qOe5S5JWEcNdkjpkuEtS
hwx3SeqQ4S5JHTLcJalDhrskdchwl6QOGe6S1CHDXZI6ZLhLUocMd0nqkOEuSR0y3CWpQ4a7JHXI
cJekDhnuktShRcM9ySuSPDT0+FaSdyQ5P8l9SZ5oz+e19klyc5LZJA8nuWzyw5AkDRvlBtmPV9Ul
VXUJ8LMM7ov6KWA3sL+qtgL72zbA1cDW9tgF3DKJjkuSFrbUZZkrgS9X1ZPAdmBvq98LXNvK24Hb
auABYG2SDWPprSRpJEsN9+uBj7fy+qp6qpWfBta38kbg4NBrDrU6SdIyGTnck5wNvAn4mxP31eD2
7Uu6hXuSXUlmksws5XWSpMUt5cj9auDfquqZtv3M3HJLez7S6g8Dm4det6nVHaeq9lTVtqratvRu
S5JOZinh/hZeWJIB2AfsaOUdwN1D9Te0s2YuB44NLd9IkpZBBisqizRKXgL8J/DyqjrW6i4A7gRe
BjwJXFdV30gS4M+BqxicWXNjVZ106SXJkpZ0pJ6M8n9Qmk+SAwutfowU7pNmuOtMthL+D2p1Olm4
r1nuzizg28Dj0+7EmF0IfG3anRgjxzMhgw+7p23FjGeMehvTJMbzkwvtWCnh/nhvv1hNMtPTmBzP
ytbbeKC/MS33eLy2jCR1yHCXpA6tlHDfM+0OTEBvY3I8K1tv44H+xrSs41kRZ8tIksZrpRy5S5LG
aOrhnuSqJI+367/vXvwV05dkc5L7kzya5AtJ3t7qV/U17pOcleRzSe5p2xclebD1+452fSGSnNO2
Z9v+LdPs93ySrE1yV5IvJnksyRUdzM/vtu+3R5J8PMmLV9McJflokiNJHhmqW/KcJNnR2j+RZMd8
77VcFhjTn7Tvu4eTfCrJ2qF9N7UxPZ7kF4fqx5+DVTW1B3AW8GXg5cDZwL8DF0+zTyP2ewNwWSu/
FPgScDHwx8DuVr8beF8rXwP8PRDgcuDBaY9hgXG9E/gYcE/bvhO4vpU/BPxmK/8W8KFWvh64Y9p9
n2cse4HfaOWzgbWreX4YXFn1q8APD83Nr62mOQJeA1wGPDJUt6Q5Ac4HvtKez2vl81bYmN4ArGnl
9w2N6eKWcecAF7XsO2tSOTjtyb4C+PTQ9k3ATdP+JjyFcdwNvJ7BH2JtaHUbGJy/D/Bh4C1D7b/f
bqU8GFzgbT/wOuCe9p/qa0PfpN+fK+DTwBWtvKa1y7THMDSWc1sQ5oT61Tw/c5fSPr/9m98D/OJq
myNgywlBuKQ5YXCNqw8P1R/XbiWM6YR9vwzc3srH5dvcHE0qB6e9LLPqr/3ePu5eCjzI6r7G/QeA
dwH/17YvAJ6tqufb9nCfvz+etv9Ya79SXAQcBf6yLTN9pF0fadXOT1UdBv6UwTWenmLwb36A1TtH
c5Y6Jyt+rk7w6ww+gcAyj2na4b6qJflR4G+Bd1TVt4b31eBH8Ko4FSnJG4EjVXVg2n0ZkzUMPirf
UlWXAt/hhdtAAqtrfgDaWvR2Bj+4fgJ4CYOL83Vjtc3JYpK8G3geuH0a7z/tcB/p2u8rUZIXMQj2
26vqk636tK5xP0WvAt6U5D+ATzBYmvkgg1skzl2iYrjP3x9P238u8PXl7PAiDgGHqurBtn0Xg7Bf
rfMD8AvAV6vqaFV9D/gkg3lbrXM0Z6lzshrmiiS/BrwReGv7oQXLPKZph/tnga3tN/5nM/jFz74p
92lRSQLcCjxWVX82tGtVXuO+qm6qqk1VtYXBHHymqt4K3A+8uTU7cTxz43xza79ijriq6mngYJJX
tKorgUdZpfPT/CdweZIfad9/c2NalXM0ZKlz8mngDUnOa59m3tDqVowkVzFY4nxTVT03tGsfcH07
k+kiYCvwr0wqB6f5i4j2vXYNg7NNvgy8e9r9GbHPr2bw8fFh4KH2uIbBmuZ+4Angn4DzW/sAf9HG
+Hlg27THcJKxvZYXzpZ5efvmm2Vwe8VzWv2L2/Zs2//yafd7nnFcAsy0Ofo7BmdWrOr5Ad4DfBF4
BPhrBmddrJo5YnCzn6eA7zH4dLXzVOaEwTr2bHvcuALHNMtgDX0uGz401P7dbUyPA1cP1Y89B/0L
VUnq0LSXZSRJE2C4S1KHDHdJ6pDhLkkdMtwlqUOGuyR1yHCXpA4Z7pLUof8HqjqHOXGnXsYAAAAA
SUVORK5CYII=
" />
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now let’s link points in paths at <a href="#scrollTo=lh3dhyf9iaKF&amp;line=55&amp;uniqifier=1">line 55</a></p>
<p>On first frame. we just add all points as new paths.</p>
<p>Next if len(path) == 1, for each path in the cache we are trying to find the point(centroid) from newly detected objects which will have the smallest Euclidean distance to the last point of the path.</p>
<p>If len(path) &gt; 1, then with the last two points in the path we are predicting new point on the same line, and finding min distance between it and the current point.</p>
<p>The point with minimal distance added to the end of the current path and removed from the list.</p>
<p>If some points left after this we add them as new paths.</p>
<p>And also we limit the number of points in the path at <a href="#scrollTo=lh3dhyf9iaKF&amp;line=101&amp;uniqifier=1/">line 101</a></p>
<p>Now we will try to count vehicles that entering in the exit zone. To do this we just take 2 last points in the path and checking that last of them in exit zone, and previous not, and also checking that len(path) should be bigger than limit.
The part after else is preventing of back-linking new points to the points in exit zone.</p>
<p>And the last two processor is CSV writer to create report CSV file, and visualization for debugging and nice pictures/videos.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">CsvWriter</span><span class="p">(</span><span class="n">PipelineProcessor</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CsvWriter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;vehicles&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="n">fps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">frame_number</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame_number&#39;</span><span class="p">]</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">_count</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;vehicle_count&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">:</span>
            <span class="n">_count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span>

        <span class="n">time</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">frame_number</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span> 
                <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="mf">100.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">frame_number</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span> <span class="s1">&#39;vehicles&#39;</span><span class="p">:</span> <span class="n">_count</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">count</span>

        <span class="k">return</span> <span class="n">context</span>

<span class="n">BOUNDING_BOX_COLOUR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">CENTROID_COLOUR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">CAR_COLOURS</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="n">EXIT_COLOR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">66</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Visualizer</span><span class="p">(</span><span class="n">PipelineProcessor</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_image</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;images&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Visualizer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span> <span class="o">=</span> <span class="n">save_image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_dir</span> <span class="o">=</span> <span class="n">image_dir</span>

    <span class="k">def</span> <span class="nf">check_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">exit_masks</span><span class="o">=</span><span class="p">[]):</span>
        <span class="k">for</span> <span class="n">exit_mask</span> <span class="ow">in</span> <span class="n">exit_masks</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">exit_mask</span><span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">draw_pathes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">pathes</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">img</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pathes</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">path</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">CAR_COLOURS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">polylines</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">path</span><span class="p">)],</span> <span class="kc">False</span><span class="p">,</span> <span class="n">CAR_COLOURS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">img</span>

    <span class="k">def</span> <span class="nf">draw_boxes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">pathes</span><span class="p">,</span> <span class="n">exit_masks</span><span class="o">=</span><span class="p">[]):</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">match</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pathes</span><span class="p">):</span>

            <span class="n">contour</span><span class="p">,</span> <span class="n">centroid</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_exit</span><span class="p">(</span><span class="n">centroid</span><span class="p">,</span> <span class="n">exit_masks</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">contour</span>

            <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">w</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">BOUNDING_BOX_COLOUR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">centroid</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">CENTROID_COLOUR</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">img</span>

    <span class="k">def</span> <span class="nf">draw_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">vehicle_count</span><span class="p">,</span> <span class="n">exit_masks</span><span class="o">=</span><span class="p">[]):</span>

        <span class="c1"># this just add green mask with opacity to the image</span>
        <span class="k">for</span> <span class="n">exit_mask</span> <span class="ow">in</span> <span class="n">exit_masks</span><span class="p">:</span>
            <span class="n">_img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
            <span class="n">_img</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">EXIT_COLOR</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">_img</span><span class="p">,</span> <span class="n">_img</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">exit_mask</span><span class="p">)</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>

        <span class="c1"># drawing top block with counts</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">50</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FILLED</span><span class="p">)</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;Vehicles passed: </span><span class="si">{total}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">vehicle_count</span><span class="p">)),</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                    <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">frame_number</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame_number&#39;</span><span class="p">]</span>
        <span class="n">pathes</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;pathes&#39;</span><span class="p">]</span>
        <span class="n">exit_masks</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;exit_masks&#39;</span><span class="p">]</span>
        <span class="n">vehicle_count</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;vehicle_count&#39;</span><span class="p">]</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_ui</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">vehicle_count</span><span class="p">,</span> <span class="n">exit_masks</span><span class="p">)</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_pathes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">pathes</span><span class="p">)</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_boxes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">pathes</span><span class="p">,</span> <span class="n">exit_masks</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span><span class="p">:</span>
            <span class="n">save_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_dir</span> <span class="o">+</span>
                            <span class="s2">&quot;/processed_</span><span class="si">%04d</span><span class="s2">.png&quot;</span> <span class="o">%</span> <span class="n">frame_number</span><span class="p">)</span>

        <span class="n">context</span><span class="p">[</span><span class="s1">&#39;frame&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="k">return</span> <span class="n">context</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>CSV writer is saving data by time, cause we need it for further analytics. So i use this formula to add additional frame timing to the unixtimestamp:</p>

<pre><code>time = ((self.start_time + int(frame_number / self.fps)) * 100 
                + int(100.0 / self.fps) * (frame_number % self.fps))</code></pre>

<pre><code>so with start time=1 000 000 000 and fps=10 i will get results like this
frame 1 = 1 000 000 000 010
frame 1 = 1 000 000 000 020
…</code></pre>
<p>Then after you get full csv report you can aggregate this data as you want.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conclusion">Conclusion<a class="anchor-link" href="#Conclusion"> </a></h2><p>So as you see it was not so hard as many people think.</p>
<p>But if you run the script you will see that this solution is not ideal, and having a problem with foreground objects overlapping, also it doesn’t have vehicles classification by types(that you will definitely need for real analytics). But still, with good camera position(above the road), it gives pretty good accuracy. And that tells us that even small &amp; simple algorithms used in a right way can give good results.</p>
<p><strong>So what we can do to fix current issues?</strong></p>
<p>One way is to try adding some additional filtration trying to separate objects for better detection. Another is to use more complex algorithms like deep convolution networks, which u can study on our course <a href="http://learnml.today">http://learnml.today</a></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">)</span>

    <span class="c1"># creating exit mask from points, where we will be counting our vehicles</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">SHAPE</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
    <span class="n">exit_mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">EXIT_PTS</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="c1"># there is also bgslibrary, that seems to give better BG substruction, but</span>
    <span class="c1"># not tested it yet</span>
    <span class="n">bg_subtractor</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">createBackgroundSubtractorMOG2</span><span class="p">(</span>
        <span class="n">history</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detectShadows</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># processing pipline for programming conviniance</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">PipelineRunner</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="p">[</span>
        <span class="n">ContourDetection</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="o">=</span><span class="n">bg_subtractor</span><span class="p">,</span>
                         <span class="n">save_image</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">image_dir</span><span class="o">=</span><span class="n">IMAGE_DIR</span><span class="p">),</span>
        <span class="c1"># we use y_weight == 2.0 because traffic are moving vertically on video</span>
        <span class="c1"># use x_weight == 2.0 for horizontal.</span>
        <span class="n">VehicleCounter</span><span class="p">(</span><span class="n">exit_masks</span><span class="o">=</span><span class="p">[</span><span class="n">exit_mask</span><span class="p">],</span> <span class="n">y_weight</span><span class="o">=</span><span class="mf">2.0</span><span class="p">),</span>
        <span class="n">Visualizer</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="n">IMAGE_DIR</span><span class="p">,</span><span class="n">save_image</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">CsvWriter</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;./&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;report.csv&#39;</span><span class="p">)</span>
    <span class="p">],</span> <span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="c1"># Set up image source</span>
    <span class="n">cap</span> <span class="o">=</span> <span class="n">skvideo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">vreader</span><span class="p">(</span><span class="n">VIDEO_SOURCE</span><span class="p">)</span>

    <span class="c1"># skipping 500 frames to train bg subtractor</span>
    <span class="n">train_bg_subtractor</span><span class="p">(</span><span class="n">bg_subtractor</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

    <span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s2">&quot;MP4V&quot;</span><span class="p">)</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">VIDEO_OUT</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="p">(</span><span class="n">SHAPE</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">SHAPE</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">frame_number</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">cap</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">frame</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Frame capture failed, stopping...&quot;</span><span class="p">)</span>
            <span class="k">break</span>

        <span class="n">frame_number</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Frame #</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">frame_number</span><span class="p">)</span>

        <span class="n">pipeline</span><span class="o">.</span><span class="n">set_context</span><span class="p">({</span>
            <span class="s1">&#39;frame&#39;</span><span class="p">:</span> <span class="n">frame</span><span class="p">,</span>
            <span class="s1">&#39;frame_number&#39;</span><span class="p">:</span> <span class="n">frame_number</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ctx</span><span class="p">[</span><span class="s1">&#39;frame&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">frame_number</span> <span class="o">&gt;</span> <span class="n">PARSE_FRAMES</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># ============================================================================</span>
<span class="n">IMAGE_DIR</span> <span class="o">=</span> <span class="s2">&quot;./out&quot;</span>
<span class="n">VIDEO_SOURCE</span> <span class="o">=</span> <span class="s2">&quot;road.mp4&quot;</span>
<span class="n">VIDEO_OUT</span> <span class="o">=</span> <span class="s2">&quot;road_parsed.mp4&quot;</span>
<span class="n">PARSE_FRAMES</span> <span class="o">=</span> <span class="mi">15</span><span class="o">*</span><span class="mi">25</span>
<span class="n">SHAPE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">1280</span><span class="p">)</span>  <span class="c1"># HxW</span>
<span class="n">EXIT_PTS</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[[</span><span class="mi">732</span><span class="p">,</span> <span class="mi">720</span><span class="p">],</span> <span class="p">[</span><span class="mi">732</span><span class="p">,</span> <span class="mi">590</span><span class="p">],</span> <span class="p">[</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span> <span class="p">[</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="p">[</span><span class="mi">645</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="p">[</span><span class="mi">645</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="p">])</span>
<span class="c1"># ============================================================================</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">init_logging</span><span class="p">()</span>
<span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training BG Subtractor...
2020-01-10 13:12:10.439 INFO     [main] Frame #0
2020-01-10 13:12:10.549 INFO     [main] Frame #1
2020-01-10 13:12:10.628 INFO     [main] Frame #2
2020-01-10 13:12:10.702 INFO     [main] Frame #3
2020-01-10 13:12:10.773 INFO     [main] Frame #4
2020-01-10 13:12:10.844 INFO     [main] Frame #5
2020-01-10 13:12:10.915 INFO     [main] Frame #6
2020-01-10 13:12:10.991 INFO     [main] Frame #7
2020-01-10 13:12:11.068 INFO     [main] Frame #8
2020-01-10 13:12:11.141 INFO     [main] Frame #9
2020-01-10 13:12:11.212 INFO     [main] Frame #10
2020-01-10 13:12:11.284 INFO     [main] Frame #11
2020-01-10 13:12:11.354 INFO     [main] Frame #12
2020-01-10 13:12:11.427 INFO     [main] Frame #13
2020-01-10 13:12:11.499 INFO     [main] Frame #14
2020-01-10 13:12:11.571 INFO     [main] Frame #15
2020-01-10 13:12:11.640 INFO     [main] Frame #16
2020-01-10 13:12:11.711 INFO     [main] Frame #17
2020-01-10 13:12:11.783 INFO     [main] Frame #18
2020-01-10 13:12:11.854 INFO     [main] Frame #19
2020-01-10 13:12:11.926 INFO     [main] Frame #20
2020-01-10 13:12:12.001 INFO     [main] Frame #21
2020-01-10 13:12:12.076 INFO     [main] Frame #22
2020-01-10 13:12:12.147 INFO     [main] Frame #23
2020-01-10 13:12:12.216 INFO     [main] Frame #24
2020-01-10 13:12:12.288 INFO     [main] Frame #25
2020-01-10 13:12:12.361 INFO     [main] Frame #26
2020-01-10 13:12:12.431 INFO     [main] Frame #27
2020-01-10 13:12:12.503 INFO     [main] Frame #28
2020-01-10 13:12:12.575 INFO     [main] Frame #29
2020-01-10 13:12:12.643 INFO     [main] Frame #30
2020-01-10 13:12:12.713 INFO     [main] Frame #31
2020-01-10 13:12:12.786 INFO     [main] Frame #32
2020-01-10 13:12:12.853 INFO     [main] Frame #33
2020-01-10 13:12:12.926 INFO     [main] Frame #34
2020-01-10 13:12:12.999 INFO     [main] Frame #35
2020-01-10 13:12:13.065 INFO     [main] Frame #36
2020-01-10 13:12:13.137 INFO     [main] Frame #37
2020-01-10 13:12:13.211 INFO     [main] Frame #38
2020-01-10 13:12:13.279 INFO     [main] Frame #39
2020-01-10 13:12:13.349 INFO     [main] Frame #40
2020-01-10 13:12:13.422 INFO     [main] Frame #41
2020-01-10 13:12:13.491 INFO     [main] Frame #42
2020-01-10 13:12:13.567 INFO     [main] Frame #43
2020-01-10 13:12:13.639 INFO     [main] Frame #44
2020-01-10 13:12:13.706 INFO     [main] Frame #45
2020-01-10 13:12:13.775 INFO     [main] Frame #46
2020-01-10 13:12:13.851 INFO     [main] Frame #47
2020-01-10 13:12:13.920 INFO     [main] Frame #48
2020-01-10 13:12:13.992 INFO     [main] Frame #49
2020-01-10 13:12:14.072 INFO     [main] Frame #50
2020-01-10 13:12:14.142 INFO     [main] Frame #51
2020-01-10 13:12:14.212 INFO     [main] Frame #52
2020-01-10 13:12:14.285 INFO     [main] Frame #53
2020-01-10 13:12:14.364 INFO     [main] Frame #54
2020-01-10 13:12:14.439 INFO     [main] Frame #55
2020-01-10 13:12:14.509 INFO     [main] Frame #56
2020-01-10 13:12:14.579 INFO     [main] Frame #57
2020-01-10 13:12:14.651 INFO     [main] Frame #58
2020-01-10 13:12:14.724 INFO     [main] Frame #59
2020-01-10 13:12:14.795 INFO     [main] Frame #60
2020-01-10 13:12:14.869 INFO     [main] Frame #61
2020-01-10 13:12:14.939 INFO     [main] Frame #62
2020-01-10 13:12:15.012 INFO     [main] Frame #63
2020-01-10 13:12:15.085 INFO     [main] Frame #64
2020-01-10 13:12:15.156 INFO     [main] Frame #65
2020-01-10 13:12:15.231 INFO     [main] Frame #66
2020-01-10 13:12:15.306 INFO     [main] Frame #67
2020-01-10 13:12:15.377 INFO     [main] Frame #68
2020-01-10 13:12:15.456 INFO     [main] Frame #69
2020-01-10 13:12:15.530 INFO     [main] Frame #70
2020-01-10 13:12:15.602 INFO     [main] Frame #71
2020-01-10 13:12:15.676 INFO     [main] Frame #72
2020-01-10 13:12:15.755 INFO     [main] Frame #73
2020-01-10 13:12:15.826 INFO     [main] Frame #74
2020-01-10 13:12:15.900 INFO     [main] Frame #75
2020-01-10 13:12:15.971 INFO     [main] Frame #76
2020-01-10 13:12:16.046 INFO     [main] Frame #77
2020-01-10 13:12:16.121 INFO     [main] Frame #78
2020-01-10 13:12:16.192 INFO     [main] Frame #79
2020-01-10 13:12:16.264 INFO     [main] Frame #80
2020-01-10 13:12:16.335 INFO     [main] Frame #81
2020-01-10 13:12:16.411 INFO     [main] Frame #82
2020-01-10 13:12:16.482 INFO     [main] Frame #83
2020-01-10 13:12:16.556 INFO     [main] Frame #84
2020-01-10 13:12:16.631 INFO     [main] Frame #85
2020-01-10 13:12:16.703 INFO     [main] Frame #86
2020-01-10 13:12:16.776 INFO     [main] Frame #87
2020-01-10 13:12:16.846 INFO     [main] Frame #88
2020-01-10 13:12:16.918 INFO     [main] Frame #89
2020-01-10 13:12:16.993 INFO     [main] Frame #90
2020-01-10 13:12:17.063 INFO     [main] Frame #91
2020-01-10 13:12:17.150 INFO     [main] Frame #92
2020-01-10 13:12:17.224 INFO     [main] Frame #93
2020-01-10 13:12:17.297 INFO     [main] Frame #94
2020-01-10 13:12:17.370 INFO     [main] Frame #95
2020-01-10 13:12:17.446 INFO     [main] Frame #96
2020-01-10 13:12:17.520 INFO     [main] Frame #97
2020-01-10 13:12:17.593 INFO     [main] Frame #98
2020-01-10 13:12:17.672 INFO     [main] Frame #99
2020-01-10 13:12:17.746 INFO     [main] Frame #100
2020-01-10 13:12:17.819 INFO     [main] Frame #101
2020-01-10 13:12:17.892 INFO     [main] Frame #102
2020-01-10 13:12:17.968 INFO     [main] Frame #103
2020-01-10 13:12:18.041 INFO     [main] Frame #104
2020-01-10 13:12:18.114 INFO     [main] Frame #105
2020-01-10 13:12:18.190 INFO     [main] Frame #106
2020-01-10 13:12:18.263 INFO     [main] Frame #107
2020-01-10 13:12:18.337 INFO     [main] Frame #108
2020-01-10 13:12:18.412 INFO     [main] Frame #109
2020-01-10 13:12:18.486 INFO     [main] Frame #110
2020-01-10 13:12:18.559 INFO     [main] Frame #111
2020-01-10 13:12:18.636 INFO     [main] Frame #112
2020-01-10 13:12:18.710 INFO     [main] Frame #113
2020-01-10 13:12:18.783 INFO     [main] Frame #114
2020-01-10 13:12:18.856 INFO     [main] Frame #115
2020-01-10 13:12:18.929 INFO     [main] Frame #116
2020-01-10 13:12:19.002 INFO     [main] Frame #117
2020-01-10 13:12:19.074 INFO     [main] Frame #118
2020-01-10 13:12:19.146 INFO     [main] Frame #119
2020-01-10 13:12:19.218 INFO     [main] Frame #120
2020-01-10 13:12:19.298 INFO     [main] Frame #121
2020-01-10 13:12:19.372 INFO     [main] Frame #122
2020-01-10 13:12:19.445 INFO     [main] Frame #123
2020-01-10 13:12:19.517 INFO     [main] Frame #124
2020-01-10 13:12:19.596 INFO     [main] Frame #125
2020-01-10 13:12:19.669 INFO     [main] Frame #126
2020-01-10 13:12:19.741 INFO     [main] Frame #127
2020-01-10 13:12:19.812 INFO     [main] Frame #128
2020-01-10 13:12:19.885 INFO     [main] Frame #129
2020-01-10 13:12:19.958 INFO     [main] Frame #130
2020-01-10 13:12:20.030 INFO     [main] Frame #131
2020-01-10 13:12:20.108 INFO     [main] Frame #132
2020-01-10 13:12:20.181 INFO     [main] Frame #133
2020-01-10 13:12:20.253 INFO     [main] Frame #134
2020-01-10 13:12:20.323 INFO     [main] Frame #135
2020-01-10 13:12:20.396 INFO     [main] Frame #136
2020-01-10 13:12:20.470 INFO     [main] Frame #137
2020-01-10 13:12:20.541 INFO     [main] Frame #138
2020-01-10 13:12:20.611 INFO     [main] Frame #139
2020-01-10 13:12:20.685 INFO     [main] Frame #140
2020-01-10 13:12:20.758 INFO     [main] Frame #141
2020-01-10 13:12:20.830 INFO     [main] Frame #142
2020-01-10 13:12:20.901 INFO     [main] Frame #143
2020-01-10 13:12:20.974 INFO     [main] Frame #144
2020-01-10 13:12:21.049 INFO     [main] Frame #145
2020-01-10 13:12:21.120 INFO     [main] Frame #146
2020-01-10 13:12:21.189 INFO     [main] Frame #147
2020-01-10 13:12:21.261 INFO     [main] Frame #148
2020-01-10 13:12:21.336 INFO     [main] Frame #149
2020-01-10 13:12:21.408 INFO     [main] Frame #150
2020-01-10 13:12:21.480 INFO     [main] Frame #151
2020-01-10 13:12:21.558 INFO     [main] Frame #152
2020-01-10 13:12:21.631 INFO     [main] Frame #153
2020-01-10 13:12:21.703 INFO     [main] Frame #154
2020-01-10 13:12:21.774 INFO     [main] Frame #155
2020-01-10 13:12:21.847 INFO     [main] Frame #156
2020-01-10 13:12:21.920 INFO     [main] Frame #157
2020-01-10 13:12:21.991 INFO     [main] Frame #158
2020-01-10 13:12:22.061 INFO     [main] Frame #159
2020-01-10 13:12:22.134 INFO     [main] Frame #160
2020-01-10 13:12:22.204 INFO     [main] Frame #161
2020-01-10 13:12:22.279 INFO     [main] Frame #162
2020-01-10 13:12:22.351 INFO     [main] Frame #163
2020-01-10 13:12:22.422 INFO     [main] Frame #164
2020-01-10 13:12:22.493 INFO     [main] Frame #165
2020-01-10 13:12:22.564 INFO     [main] Frame #166
2020-01-10 13:12:22.636 INFO     [main] Frame #167
2020-01-10 13:12:22.709 INFO     [main] Frame #168
2020-01-10 13:12:22.782 INFO     [main] Frame #169
2020-01-10 13:12:22.855 INFO     [main] Frame #170
2020-01-10 13:12:22.927 INFO     [main] Frame #171
2020-01-10 13:12:22.997 INFO     [main] Frame #172
2020-01-10 13:12:23.069 INFO     [main] Frame #173
2020-01-10 13:12:23.144 INFO     [main] Frame #174
2020-01-10 13:12:23.216 INFO     [main] Frame #175
2020-01-10 13:12:23.288 INFO     [main] Frame #176
2020-01-10 13:12:23.359 INFO     [main] Frame #177
2020-01-10 13:12:23.430 INFO     [main] Frame #178
2020-01-10 13:12:23.506 INFO     [main] Frame #179
2020-01-10 13:12:23.577 INFO     [main] Frame #180
2020-01-10 13:12:23.652 INFO     [main] Frame #181
2020-01-10 13:12:23.723 INFO     [main] Frame #182
2020-01-10 13:12:23.797 INFO     [main] Frame #183
2020-01-10 13:12:23.870 INFO     [main] Frame #184
2020-01-10 13:12:23.942 INFO     [main] Frame #185
2020-01-10 13:12:24.013 INFO     [main] Frame #186
2020-01-10 13:12:24.087 INFO     [main] Frame #187
2020-01-10 13:12:24.160 INFO     [main] Frame #188
2020-01-10 13:12:24.232 INFO     [main] Frame #189
2020-01-10 13:12:24.309 INFO     [main] Frame #190
2020-01-10 13:12:24.385 INFO     [main] Frame #191
2020-01-10 13:12:24.462 INFO     [main] Frame #192
2020-01-10 13:12:24.536 INFO     [main] Frame #193
2020-01-10 13:12:24.611 INFO     [main] Frame #194
2020-01-10 13:12:24.687 INFO     [main] Frame #195
2020-01-10 13:12:24.762 INFO     [main] Frame #196
2020-01-10 13:12:24.835 INFO     [main] Frame #197
2020-01-10 13:12:24.909 INFO     [main] Frame #198
2020-01-10 13:12:24.984 INFO     [main] Frame #199
2020-01-10 13:12:25.058 INFO     [main] Frame #200
2020-01-10 13:12:25.133 INFO     [main] Frame #201
2020-01-10 13:12:25.208 INFO     [main] Frame #202
2020-01-10 13:12:25.283 INFO     [main] Frame #203
2020-01-10 13:12:25.361 INFO     [main] Frame #204
2020-01-10 13:12:25.436 INFO     [main] Frame #205
2020-01-10 13:12:25.508 INFO     [main] Frame #206
2020-01-10 13:12:25.586 INFO     [main] Frame #207
2020-01-10 13:12:25.659 INFO     [main] Frame #208
2020-01-10 13:12:25.731 INFO     [main] Frame #209
2020-01-10 13:12:25.805 INFO     [main] Frame #210
2020-01-10 13:12:25.877 INFO     [main] Frame #211
2020-01-10 13:12:25.949 INFO     [main] Frame #212
2020-01-10 13:12:26.024 INFO     [main] Frame #213
2020-01-10 13:12:26.100 INFO     [main] Frame #214
2020-01-10 13:12:26.173 INFO     [main] Frame #215
2020-01-10 13:12:26.249 INFO     [main] Frame #216
2020-01-10 13:12:26.324 INFO     [main] Frame #217
2020-01-10 13:12:26.399 INFO     [main] Frame #218
2020-01-10 13:12:26.472 INFO     [main] Frame #219
2020-01-10 13:12:26.547 INFO     [main] Frame #220
2020-01-10 13:12:26.620 INFO     [main] Frame #221
2020-01-10 13:12:26.693 INFO     [main] Frame #222
2020-01-10 13:12:26.767 INFO     [main] Frame #223
2020-01-10 13:12:26.840 INFO     [main] Frame #224
2020-01-10 13:12:26.914 INFO     [main] Frame #225
2020-01-10 13:12:26.987 INFO     [main] Frame #226
2020-01-10 13:12:27.066 INFO     [main] Frame #227
2020-01-10 13:12:27.140 INFO     [main] Frame #228
2020-01-10 13:12:27.214 INFO     [main] Frame #229
2020-01-10 13:12:27.287 INFO     [main] Frame #230
2020-01-10 13:12:27.362 INFO     [main] Frame #231
2020-01-10 13:12:27.434 INFO     [main] Frame #232
2020-01-10 13:12:27.524 INFO     [main] Frame #233
2020-01-10 13:12:27.598 INFO     [main] Frame #234
2020-01-10 13:12:27.671 INFO     [main] Frame #235
2020-01-10 13:12:27.742 INFO     [main] Frame #236
2020-01-10 13:12:27.813 INFO     [main] Frame #237
2020-01-10 13:12:27.884 INFO     [main] Frame #238
2020-01-10 13:12:27.956 INFO     [main] Frame #239
2020-01-10 13:12:28.026 INFO     [main] Frame #240
2020-01-10 13:12:28.099 INFO     [main] Frame #241
2020-01-10 13:12:28.173 INFO     [main] Frame #242
2020-01-10 13:12:28.248 INFO     [main] Frame #243
2020-01-10 13:12:28.317 INFO     [main] Frame #244
2020-01-10 13:12:28.387 INFO     [main] Frame #245
2020-01-10 13:12:28.463 INFO     [main] Frame #246
2020-01-10 13:12:28.532 INFO     [main] Frame #247
2020-01-10 13:12:28.601 INFO     [main] Frame #248
2020-01-10 13:12:28.672 INFO     [main] Frame #249
2020-01-10 13:12:28.742 INFO     [main] Frame #250
2020-01-10 13:12:28.813 INFO     [main] Frame #251
2020-01-10 13:12:28.886 INFO     [main] Frame #252
2020-01-10 13:12:28.965 INFO     [main] Frame #253
2020-01-10 13:12:29.037 INFO     [main] Frame #254
2020-01-10 13:12:29.109 INFO     [main] Frame #255
2020-01-10 13:12:29.180 INFO     [main] Frame #256
2020-01-10 13:12:29.254 INFO     [main] Frame #257
2020-01-10 13:12:29.326 INFO     [main] Frame #258
2020-01-10 13:12:29.396 INFO     [main] Frame #259
2020-01-10 13:12:29.468 INFO     [main] Frame #260
2020-01-10 13:12:29.538 INFO     [main] Frame #261
2020-01-10 13:12:29.609 INFO     [main] Frame #262
2020-01-10 13:12:29.679 INFO     [main] Frame #263
2020-01-10 13:12:29.755 INFO     [main] Frame #264
2020-01-10 13:12:29.830 INFO     [main] Frame #265
2020-01-10 13:12:29.901 INFO     [main] Frame #266
2020-01-10 13:12:29.972 INFO     [main] Frame #267
2020-01-10 13:12:30.045 INFO     [main] Frame #268
2020-01-10 13:12:30.118 INFO     [main] Frame #269
2020-01-10 13:12:30.194 INFO     [main] Frame #270
2020-01-10 13:12:30.268 INFO     [main] Frame #271
2020-01-10 13:12:30.340 INFO     [main] Frame #272
2020-01-10 13:12:30.411 INFO     [main] Frame #273
2020-01-10 13:12:30.485 INFO     [main] Frame #274
2020-01-10 13:12:30.562 INFO     [main] Frame #275
2020-01-10 13:12:30.633 INFO     [main] Frame #276
2020-01-10 13:12:30.706 INFO     [main] Frame #277
2020-01-10 13:12:30.776 INFO     [main] Frame #278
2020-01-10 13:12:30.850 INFO     [main] Frame #279
2020-01-10 13:12:30.922 INFO     [main] Frame #280
2020-01-10 13:12:30.992 INFO     [main] Frame #281
2020-01-10 13:12:31.067 INFO     [main] Frame #282
2020-01-10 13:12:31.137 INFO     [main] Frame #283
2020-01-10 13:12:31.206 INFO     [main] Frame #284
2020-01-10 13:12:31.276 INFO     [main] Frame #285
2020-01-10 13:12:31.346 INFO     [main] Frame #286
2020-01-10 13:12:31.415 INFO     [main] Frame #287
2020-01-10 13:12:31.485 INFO     [main] Frame #288
2020-01-10 13:12:31.560 INFO     [main] Frame #289
2020-01-10 13:12:31.630 INFO     [main] Frame #290
2020-01-10 13:12:31.700 INFO     [main] Frame #291
2020-01-10 13:12:31.771 INFO     [main] Frame #292
2020-01-10 13:12:31.843 INFO     [main] Frame #293
2020-01-10 13:12:31.915 INFO     [main] Frame #294
2020-01-10 13:12:31.984 INFO     [main] Frame #295
2020-01-10 13:12:32.054 INFO     [main] Frame #296
2020-01-10 13:12:32.127 INFO     [main] Frame #297
2020-01-10 13:12:32.196 INFO     [main] Frame #298
2020-01-10 13:12:32.266 INFO     [main] Frame #299
2020-01-10 13:12:32.339 INFO     [main] Frame #300
2020-01-10 13:12:32.410 INFO     [main] Frame #301
2020-01-10 13:12:32.482 INFO     [main] Frame #302
2020-01-10 13:12:32.560 INFO     [main] Frame #303
2020-01-10 13:12:32.632 INFO     [main] Frame #304
2020-01-10 13:12:32.703 INFO     [main] Frame #305
2020-01-10 13:12:32.776 INFO     [main] Frame #306
2020-01-10 13:12:32.849 INFO     [main] Frame #307
2020-01-10 13:12:32.920 INFO     [main] Frame #308
2020-01-10 13:12:32.992 INFO     [main] Frame #309
2020-01-10 13:12:33.063 INFO     [main] Frame #310
2020-01-10 13:12:33.134 INFO     [main] Frame #311
2020-01-10 13:12:33.207 INFO     [main] Frame #312
2020-01-10 13:12:33.284 INFO     [main] Frame #313
2020-01-10 13:12:33.356 INFO     [main] Frame #314
2020-01-10 13:12:33.428 INFO     [main] Frame #315
2020-01-10 13:12:33.503 INFO     [main] Frame #316
2020-01-10 13:12:33.577 INFO     [main] Frame #317
2020-01-10 13:12:33.650 INFO     [main] Frame #318
2020-01-10 13:12:33.724 INFO     [main] Frame #319
2020-01-10 13:12:33.799 INFO     [main] Frame #320
2020-01-10 13:12:33.871 INFO     [main] Frame #321
2020-01-10 13:12:33.948 INFO     [main] Frame #322
2020-01-10 13:12:34.022 INFO     [main] Frame #323
2020-01-10 13:12:34.096 INFO     [main] Frame #324
2020-01-10 13:12:34.170 INFO     [main] Frame #325
2020-01-10 13:12:34.240 INFO     [main] Frame #326
2020-01-10 13:12:34.312 INFO     [main] Frame #327
2020-01-10 13:12:34.386 INFO     [main] Frame #328
2020-01-10 13:12:34.456 INFO     [main] Frame #329
2020-01-10 13:12:34.525 INFO     [main] Frame #330
2020-01-10 13:12:34.599 INFO     [main] Frame #331
2020-01-10 13:12:34.674 INFO     [main] Frame #332
2020-01-10 13:12:34.743 INFO     [main] Frame #333
2020-01-10 13:12:34.813 INFO     [main] Frame #334
2020-01-10 13:12:34.882 INFO     [main] Frame #335
2020-01-10 13:12:34.955 INFO     [main] Frame #336
2020-01-10 13:12:35.028 INFO     [main] Frame #337
2020-01-10 13:12:35.100 INFO     [main] Frame #338
2020-01-10 13:12:35.170 INFO     [main] Frame #339
2020-01-10 13:12:35.239 INFO     [main] Frame #340
2020-01-10 13:12:35.311 INFO     [main] Frame #341
2020-01-10 13:12:35.380 INFO     [main] Frame #342
2020-01-10 13:12:35.449 INFO     [main] Frame #343
2020-01-10 13:12:35.521 INFO     [main] Frame #344
2020-01-10 13:12:35.591 INFO     [main] Frame #345
2020-01-10 13:12:35.660 INFO     [main] Frame #346
2020-01-10 13:12:35.732 INFO     [main] Frame #347
2020-01-10 13:12:35.803 INFO     [main] Frame #348
2020-01-10 13:12:35.874 INFO     [main] Frame #349
2020-01-10 13:12:35.943 INFO     [main] Frame #350
2020-01-10 13:12:36.013 INFO     [main] Frame #351
2020-01-10 13:12:36.083 INFO     [main] Frame #352
2020-01-10 13:12:36.151 INFO     [main] Frame #353
2020-01-10 13:12:36.219 INFO     [main] Frame #354
2020-01-10 13:12:36.288 INFO     [main] Frame #355
2020-01-10 13:12:36.360 INFO     [main] Frame #356
2020-01-10 13:12:36.428 INFO     [main] Frame #357
2020-01-10 13:12:36.496 INFO     [main] Frame #358
2020-01-10 13:12:36.565 INFO     [main] Frame #359
2020-01-10 13:12:36.634 INFO     [main] Frame #360
2020-01-10 13:12:36.707 INFO     [main] Frame #361
2020-01-10 13:12:36.776 INFO     [main] Frame #362
2020-01-10 13:12:36.845 INFO     [main] Frame #363
2020-01-10 13:12:36.914 INFO     [main] Frame #364
2020-01-10 13:12:36.983 INFO     [main] Frame #365
2020-01-10 13:12:37.052 INFO     [main] Frame #366
2020-01-10 13:12:37.126 INFO     [main] Frame #367
2020-01-10 13:12:37.195 INFO     [main] Frame #368
2020-01-10 13:12:37.265 INFO     [main] Frame #369
2020-01-10 13:12:37.339 INFO     [main] Frame #370
2020-01-10 13:12:37.412 INFO     [main] Frame #371
2020-01-10 13:12:37.484 INFO     [main] Frame #372
2020-01-10 13:12:37.554 INFO     [main] Frame #373
2020-01-10 13:12:37.627 INFO     [main] Frame #374
2020-01-10 13:12:37.697 INFO     [main] Frame #375
2020-01-10 13:12:37.766 INFO     [main] Frame #376
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">files</span>
<span class="n">files</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;road_parsed.mp4&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/2022/01/01/vehicle-detection.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Jupyter notebook database.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/recohut" target="_blank" title="recohut"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
