<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Book-Crossing Recommendation System | reconb</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Book-Crossing Recommendation System" />
<meta name="author" content="<a href='https://github.com/tttgm/fellowshipai'>Tom McKenzie</a>" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Book recommender system on book crossing dataset using surprise SVD and NMF models" />
<meta property="og:description" content="Book recommender system on book crossing dataset using surprise SVD and NMF models" />
<link rel="canonical" href="https://nb.recohut.com/surprise/svd/nmf/book/2021/07/01/book-crossing-surprise-svd-nmf.html" />
<meta property="og:url" content="https://nb.recohut.com/surprise/svd/nmf/book/2021/07/01/book-crossing-surprise-svd-nmf.html" />
<meta property="og:site_name" content="reconb" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-01T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Book-Crossing Recommendation System" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"<a href='https://github.com/tttgm/fellowshipai'>Tom McKenzie</a>"},"dateModified":"2021-07-01T00:00:00-05:00","datePublished":"2021-07-01T00:00:00-05:00","description":"Book recommender system on book crossing dataset using surprise SVD and NMF models","headline":"Book-Crossing Recommendation System","mainEntityOfPage":{"@type":"WebPage","@id":"https://nb.recohut.com/surprise/svd/nmf/book/2021/07/01/book-crossing-surprise-svd-nmf.html"},"url":"https://nb.recohut.com/surprise/svd/nmf/book/2021/07/01/book-crossing-surprise-svd-nmf.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://nb.recohut.com/feed.xml" title="reconb" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">reconb</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Book-Crossing Recommendation System</h1><p class="page-description">Book recommender system on book crossing dataset using surprise SVD and NMF models</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-07-01T00:00:00-05:00" itemprop="datePublished">
        Jul 1, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name"><a href='https://github.com/tttgm/fellowshipai'>Tom McKenzie</a></span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      39 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#Surprise">Surprise</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#SVD">SVD</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#NMF">NMF</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Book">Book</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/recohut/notebook/tree/master/_notebooks/2021-07-01-book-crossing-surprise-svd-nmf.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/recohut/notebook/master?filepath=_notebooks%2F2021-07-01-book-crossing-surprise-svd-nmf.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/recohut/notebook/blob/master/_notebooks/2021-07-01-book-crossing-surprise-svd-nmf.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Frecohut%2Fnotebook%2Fblob%2Fmaster%2F_notebooks%2F2021-07-01-book-crossing-surprise-svd-nmf.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#Setup">Setup </a></li>
<li class="toc-entry toc-h2"><a href="#Load-the-dataset">Load the dataset </a></li>
<li class="toc-entry toc-h2"><a href="#EDA-and-Data-cleaning">EDA and Data cleaning </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Users">Users </a></li>
<li class="toc-entry toc-h3"><a href="#Books">Books </a></li>
<li class="toc-entry toc-h3"><a href="#Interactions">Interactions </a></li>
<li class="toc-entry toc-h3"><a href="#Merge">Merge </a></li>
<li class="toc-entry toc-h3"><a href="#Single-ISBN-per-book">Single ISBN per book </a></li>
<li class="toc-entry toc-h3"><a href="#Remove-Small-and-Large-book-cover-URL-columns">Remove Small and Large book-cover URL columns </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Join-the-'users'-table-on-the-'USERID'-field">Join the &#39;users&#39; table on the &#39;USERID&#39; field </a></li>
<li class="toc-entry toc-h2"><a href="#Recommender-model">Recommender model </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Using-sklearn-to-generate-training-and-testing-subsets">Using sklearn to generate training and testing subsets </a></li>
<li class="toc-entry toc-h3"><a href="#Map-the-USERID-and-UNIQUE_ITEMIDS-fields-to-sequential-integers-for-matrix-processing">Map the USERID and UNIQUE_ITEMIDS fields to sequential integers for matrix processing </a></li>
<li class="toc-entry toc-h3"><a href="#Calculating-cosine-similarity-with-the-'pairwise-distances'-function">Calculating cosine similarity with the &#39;pairwise distances&#39; function </a></li>
<li class="toc-entry toc-h3"><a href="#Evaluation">Evaluation </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Using-the-surprise-library-for-building-a-recommender-system">Using the surprise library for building a recommender system </a>
<ul>
<li class="toc-entry toc-h3"><a href="#SVD-model">SVD model </a></li>
<li class="toc-entry toc-h3"><a href="#NMF-model">NMF model </a></li>
<li class="toc-entry toc-h2"><a href="#Optimizing-the-SVD-algorithm-with-parameter-tuning">Optimizing the SVD algorithm with parameter tuning </a></li>
<li class="toc-entry toc-h2"><a href="#Testing-some-of-the-outputs-(ratings-and-recommendations)">Testing some of the outputs (ratings and recommendations) </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Summary">Summary </a></li>
<li class="toc-entry toc-h1"><a href="#References">References </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-07-01-book-crossing-surprise-svd-nmf.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">
<a class="anchor" href="#Setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup<a class="anchor-link" href="#Setup"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install -q git+https://github.com/sparsh-ai/recochef.git
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>  Installing build dependencies ... done
  Getting requirements to build wheel ... done
    Preparing wheel metadata ... done
     |████████████████████████████████| 4.3MB 5.4MB/s 
  Building wheel for recochef (PEP 517) ... done
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">model_selection</span>

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">'seaborn-white'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">'font.size'</span><span class="p">:</span> <span class="mi">15</span><span class="p">})</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">recochef.datasets.bookcrossing</span> <span class="kn">import</span> <span class="n">BookCrossing</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Load-the-dataset">
<a class="anchor" href="#Load-the-dataset" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load the dataset<a class="anchor-link" href="#Load-the-dataset"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bookcrossing</span> <span class="o">=</span> <span class="n">BookCrossing</span><span class="p">()</span>
<span class="n">users</span> <span class="o">=</span> <span class="n">bookcrossing</span><span class="o">.</span><span class="n">load_users</span><span class="p">()</span>
<span class="n">books</span> <span class="o">=</span> <span class="n">bookcrossing</span><span class="o">.</span><span class="n">load_items</span><span class="p">()</span>
<span class="n">book_ratings</span> <span class="o">=</span> <span class="n">bookcrossing</span><span class="o">.</span><span class="n">load_interactions</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>LOCATION</th>
      <th>AGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>nyc, new york, usa</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>stockton, california, usa</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>moscow, yukon territory, russia</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>porto, v.n.gaia, portugal</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>farnborough, hants, united kingdom</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ITEMID</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0195153448</td>
      <td>Classical Mythology</td>
      <td>Mark P. O. Morford</td>
      <td>2002</td>
      <td>Oxford University Press</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0002005018</td>
      <td>Clara Callan</td>
      <td>Richard Bruce Wright</td>
      <td>2001</td>
      <td>HarperFlamingo Canada</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0060973129</td>
      <td>Decision in Normandy</td>
      <td>Carlo D'Este</td>
      <td>1991</td>
      <td>HarperPerennial</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0374157065</td>
      <td>Flu: The Story of the Great Influenza Pandemic...</td>
      <td>Gina Bari Kolata</td>
      <td>1999</td>
      <td>Farrar Straus Giroux</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0393045218</td>
      <td>The Mummies of Urumchi</td>
      <td>E. J. W. Barber</td>
      <td>1999</td>
      <td>W. W. Norton &amp;amp; Company</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">book_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>276725</td>
      <td>034545104X</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>276727</td>
      <td>0446520802</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Users: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">Books: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">Ratings: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">book_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Users: 278858
Books: 271360
Ratings: 1149780
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="EDA-and-Data-cleaning">
<a class="anchor" href="#EDA-and-Data-cleaning" aria-hidden="true"><span class="octicon octicon-link"></span></a>EDA and Data cleaning<a class="anchor-link" href="#EDA-and-Data-cleaning"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Users">
<a class="anchor" href="#Users" aria-hidden="true"><span class="octicon octicon-link"></span></a>Users<a class="anchor-link" href="#Users"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">'all'</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>unique</th>
      <th>top</th>
      <th>freq</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>USERID</th>
      <td>278858</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>139430</td>
      <td>80499.5</td>
      <td>1</td>
      <td>69715.2</td>
      <td>139430</td>
      <td>209144</td>
      <td>278858</td>
    </tr>
    <tr>
      <th>LOCATION</th>
      <td>278858</td>
      <td>57339</td>
      <td>london, england, united kingdom</td>
      <td>2506</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>AGE</th>
      <td>168096</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>34.7514</td>
      <td>14.4281</td>
      <td>0</td>
      <td>24</td>
      <td>32</td>
      <td>44</td>
      <td>244</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The age range goes from 0 to 244 years old! Obviously this cannot be correct; I'll set all ages less than 5 and older than 100 to NaN to try keep them realistic.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">users</span><span class="o">.</span><span class="n">AGE</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">AGE</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">),</span> <span class="s1">'AGE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">AGE</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Age'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'counts'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, can we expand the 'Location' field to break it up into 'City', 'State', and 'Country'.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p></p>
<div class="flash">
    <svg class="octicon octicon-info" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg>
    <strong>Note: </strong>Used Pandas Series.str.split method as it has an ’expand’ parameter which can handle None cases
</div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_location_expanded</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">LOCATION</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">user_location_expanded</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'CITY'</span><span class="p">,</span> <span class="s1">'STATE'</span><span class="p">,</span> <span class="s1">'COUNTRY'</span><span class="p">]</span>
<span class="n">users</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_location_expanded</span><span class="p">)</span>
<span class="n">users</span><span class="o">.</span><span class="n">COUNTRY</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">users</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'LOCATION'</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">users</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>AGE</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>COUNTRY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>nyc</td>
      <td>new york</td>
      <td>usa</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>18.0</td>
      <td>stockton</td>
      <td>california</td>
      <td>usa</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>moscow</td>
      <td>yukon territory</td>
      <td>russia</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>17.0</td>
      <td>porto</td>
      <td>v.n.gaia</td>
      <td>portugal</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>farnborough</td>
      <td>hants</td>
      <td>united kingdom</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Books">
<a class="anchor" href="#Books" aria-hidden="true"><span class="octicon octicon-link"></span></a>Books<a class="anchor-link" href="#Books"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ITEMID</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0195153448</td>
      <td>Classical Mythology</td>
      <td>Mark P. O. Morford</td>
      <td>2002</td>
      <td>Oxford University Press</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0002005018</td>
      <td>Clara Callan</td>
      <td>Richard Bruce Wright</td>
      <td>2001</td>
      <td>HarperFlamingo Canada</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">'all'</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>unique</th>
      <th>top</th>
      <th>freq</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ITEMID</th>
      <td>271360</td>
      <td>271360</td>
      <td>0553141279</td>
      <td>1</td>
    </tr>
    <tr>
      <th>TITLE</th>
      <td>271360</td>
      <td>242135</td>
      <td>Selected Poems</td>
      <td>27</td>
    </tr>
    <tr>
      <th>AUTHOR</th>
      <td>271359</td>
      <td>102023</td>
      <td>Agatha Christie</td>
      <td>632</td>
    </tr>
    <tr>
      <th>YEAR</th>
      <td>271360</td>
      <td>118</td>
      <td>2002</td>
      <td>17627</td>
    </tr>
    <tr>
      <th>PUBLISHER</th>
      <td>271358</td>
      <td>16807</td>
      <td>Harlequin</td>
      <td>7535</td>
    </tr>
    <tr>
      <th>URLSMALL</th>
      <td>271360</td>
      <td>271044</td>
      <td>http://images.amazon.com/images/P/051511264X.0...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>URLMEDIUM</th>
      <td>271360</td>
      <td>271044</td>
      <td>http://images.amazon.com/images/P/038079439X.0...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>URLLARGE</th>
      <td>271357</td>
      <td>271041</td>
      <td>http://images.amazon.com/images/P/044022859X.0...</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">YEAR</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">books</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">'coerce'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">YEAR</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">yr</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">YEAR</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">yr</span> <span class="o">=</span> <span class="n">yr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">yr</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># filter out counts less than 5</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">yr</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">yr</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Year of Publication'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'counts'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that in the plot above we filtered out counts less than 5, as there are a few books in the dataset with publication years in the 1300s, and a few in the future (?!). The plot above show the general trend that more recent books are much more frequent.</p>
<p>Let's take a look at some of those 'outlier' books. Maybe we'll even keep them as a separate dataset so we can filter them out if we need to later in the analysis. We'll leave them in for now, and then figure out how to handle them once we have more info later on.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">historical_books</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="n">books</span><span class="o">.</span><span class="n">YEAR</span><span class="o">&lt;</span><span class="mi">1900</span><span class="p">]</span> <span class="c1"># create df of old books</span>
<span class="n">books_from_the_future</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="n">books</span><span class="o">.</span><span class="n">YEAR</span><span class="o">&gt;</span><span class="mi">2018</span><span class="p">]</span> <span class="c1"># create df of books with publication yrs in the future!</span>

<span class="n">hist_books_mini</span> <span class="o">=</span> <span class="n">historical_books</span><span class="p">[[</span><span class="s1">'TITLE'</span><span class="p">,</span> <span class="s1">'YEAR'</span><span class="p">]]</span>
<span class="n">future_books_mini</span> <span class="o">=</span> <span class="n">books_from_the_future</span><span class="p">[[</span><span class="s1">'TITLE'</span><span class="p">,</span> <span class="s1">'YEAR'</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Historical books:</span><span class="se">\n</span><span class="si">{</span><span class="n">hist_books_mini</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Future books:</span><span class="se">\n</span><span class="si">{</span><span class="n">future_books_mini</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Historical books:
                                                    TITLE    YEAR
171817  Complete Works 10 Volumes [2,6,7,8,9] (Notable...  1806.0
227531                   Dalan-i bihisht (Dastan-i Irani)  1378.0
245607  Hugh Wynne, Free Quaker (2 Volumes (BCL1-PS Am...  1897.0
253750                                       Tasht-i khun  1376.0


Future books:
                                                    TITLE    YEAR
30010                                          The Royals  2020.0
37487   MY TEACHER FRIED MY BRAINS (RACK SIZE) (MY TEA...  2030.0
55676   MY TEACHER FLUNKED THE PLANET (RACK SIZE) (MY ...  2030.0
78168                                    Crossing America  2030.0
80264   Alice's Adventures in Wonderland and Through t...  2050.0
92156                     Edgar Allen Poe Collected Poems  2020.0
97826       Outline of European Architecture (Pelican S.)  2050.0
116053                       Three Plays of Eugene Oneill  2038.0
118294        Das groÃ?Â?e BÃ?Â¶se- MÃ?Â¤dchen- Lesebuch.  2026.0
183769                                              Heidi  2021.0
192993  Field Guide to the Birds of North America, 3rd...  2030.0
228173       FOREST PEOPLE (Touchstone Books (Hardcover))  2030.0
238817                                LOOK HOMEWARD ANGEL  2020.0
240169            In Our Time: Stories (Scribner Classic)  2030.0
246842                                              CLOUT  2024.0
255409                               To Have and Have Not  2037.0
260974        FOOTBALL SUPER TEAMS : FOOTBALL SUPER TEAMS  2030.0
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I think we can probably omit the 'historical_books' as they may potentially skew the model and do not seem to have much relevance to the wider userbase.</p>
<p>Some of the 'future' books actually appear to be errors (e.g. Alice in Wonderland, Edgar Allen Poe, etc.)... Perhaps they were supposed to be e.g. 1950 instead of 2050? However, instead of investigating this further, since there are &lt;20 books here I will simply remove them from the 'books' table.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Length of books dataset before removal: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="n">books</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">books</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">historical_books</span><span class="o">.</span><span class="n">ITEMID</span><span class="p">))]</span> <span class="c1"># remove historical books</span>
<span class="n">books</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">books</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">books_from_the_future</span><span class="o">.</span><span class="n">ITEMID</span><span class="p">))]</span> <span class="c1"># remove historical books</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Length of books dataset after removal: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Length of books dataset before removal: 271360
Length of books dataset after removal: 271339
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We clean up the ampersand formatting in the Publisher field.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">PUBLISHER</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'&amp;amp'</span><span class="p">,</span> <span class="s1">'&amp;'</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">books</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ITEMID</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0195153448</td>
      <td>Classical Mythology</td>
      <td>Mark P. O. Morford</td>
      <td>2002.0</td>
      <td>Oxford University Press</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
      <td>http://images.amazon.com/images/P/0195153448.0...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0002005018</td>
      <td>Clara Callan</td>
      <td>Richard Bruce Wright</td>
      <td>2001.0</td>
      <td>HarperFlamingo Canada</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
      <td>http://images.amazon.com/images/P/0002005018.0...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0060973129</td>
      <td>Decision in Normandy</td>
      <td>Carlo D'Este</td>
      <td>1991.0</td>
      <td>HarperPerennial</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
      <td>http://images.amazon.com/images/P/0060973129.0...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0374157065</td>
      <td>Flu: The Story of the Great Influenza Pandemic...</td>
      <td>Gina Bari Kolata</td>
      <td>1999.0</td>
      <td>Farrar Straus Giroux</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
      <td>http://images.amazon.com/images/P/0374157065.0...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0393045218</td>
      <td>The Mummies of Urumchi</td>
      <td>E. J. W. Barber</td>
      <td>1999.0</td>
      <td>W. W. Norton &amp;; Company</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
      <td>http://images.amazon.com/images/P/0393045218.0...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Check that there are no duplicated book entries.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">uniq_books</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">all_books</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'No. of unique books: </span><span class="si">{</span><span class="n">uniq_books</span><span class="si">}</span><span class="s1"> | All book entries: </span><span class="si">{</span><span class="n">all_books</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>No. of unique books: 271339 | All book entries: 271339
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's look at the most frequent Publishing houses in the dataset.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">top_publishers</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The 10 publishers with the most entries in the books table are:</span><span class="se">\n</span><span class="si">{</span><span class="n">top_publishers</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The 10 publishers with the most entries in the books table are:
Harlequin                   7535
Silhouette                  4220
Pocket                      3905
Ballantine Books            3783
Bantam Books                3646
Scholastic                  3159
Simon &amp;; Schuster           2969
Penguin Books               2844
Berkley Publishing Group    2771
Warner Books                2727
Name: PUBLISHER, dtype: int64
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What about authors with the most entries?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">top_authors</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">AUTHOR</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The 10 authors with the most entries in the books table are:</span><span class="se">\n</span><span class="si">{</span><span class="n">top_authors</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The 10 authors with the most entries in the books table are:
Agatha Christie        632
William Shakespeare    567
Stephen King           524
Ann M. Martin          423
Carolyn Keene          373
Francine Pascal        372
Isaac Asimov           330
Nora Roberts           315
Barbara Cartland       307
Charles Dickens        302
Name: AUTHOR, dtype: int64
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We should search for empty or NaN values in these fields too.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">empty_string_publisher</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="n">books</span><span class="o">.</span><span class="n">PUBLISHER</span> <span class="o">==</span> <span class="s1">''</span><span class="p">]</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">nan_publisher</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There are </span><span class="si">{</span><span class="n">empty_string_publisher</span><span class="si">}</span><span class="s1"> entries with empty strings, and </span><span class="si">{</span><span class="n">nan_publisher</span><span class="si">}</span><span class="s1"> NaN entries in the Publisher field'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 0 entries with empty strings, and 2 NaN entries in the Publisher field
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Great - no empty strings in the Publisher field, and only 2 NaNs.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">empty_string_author</span> <span class="o">=</span> <span class="n">books</span><span class="p">[</span><span class="n">books</span><span class="o">.</span><span class="n">AUTHOR</span> <span class="o">==</span> <span class="s1">''</span><span class="p">]</span><span class="o">.</span><span class="n">AUTHOR</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">nan_author</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">AUTHOR</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There are </span><span class="si">{</span><span class="n">empty_string_author</span><span class="si">}</span><span class="s1"> entries with empty strings, and </span><span class="si">{</span><span class="n">nan_author</span><span class="si">}</span><span class="s1"> NaN entries in the Author field'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 0 entries with empty strings, and 1 NaN entries in the Author field
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cool, only 1 NaN in the Author field.</p>
<p>Let's look at the titles.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">top_titles</span> <span class="o">=</span> <span class="n">books</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The 10 book titles with the most entries in the books table are:</span><span class="se">\n</span><span class="si">{</span><span class="n">top_titles</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The 10 book titles with the most entries in the books table are:
Selected Poems                    27
Little Women                      24
Wuthering Heights                 21
The Secret Garden                 20
Adventures of Huckleberry Finn    20
Dracula                           20
Jane Eyre                         19
The Night Before Christmas        18
Pride and Prejudice               18
Great Expectations                17
Name: TITLE, dtype: int64
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is actually quite an important observation. Although all of the ISBN entries are <em>unique</em> in the 'books' dataframe, different <em>forms</em> of the <strong>same</strong> book will have different ISBNs - i.e. paperback, e-book, etc. Therefore, we can see that some books have multiple ISBN entries (e.g. Jane Eyre has 19 different ISBNs, each corresponding to a different version of the book).</p>
<p>Let's take a look at, for example, the entries for 'Jane Eyre'.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books</span><span class="p">[</span><span class="n">books</span><span class="o">.</span><span class="n">TITLE</span><span class="o">==</span><span class="s1">'Jane Eyre'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ITEMID</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3323</th>
      <td>0451518845</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1999.0</td>
      <td>New Amer Library Classics</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
    </tr>
    <tr>
      <th>9545</th>
      <td>0451523326</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1988.0</td>
      <td>Signet Classics</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
    </tr>
    <tr>
      <th>27657</th>
      <td>1566193028</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1994.0</td>
      <td>Dorset Press</td>
      <td>http://images.amazon.com/images/P/1566193028.0...</td>
      <td>http://images.amazon.com/images/P/1566193028.0...</td>
      <td>http://images.amazon.com/images/P/1566193028.0...</td>
    </tr>
    <tr>
      <th>28501</th>
      <td>156619024X</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>NaN</td>
      <td>Barnes Noble Classics</td>
      <td>http://images.amazon.com/images/P/156619024X.0...</td>
      <td>http://images.amazon.com/images/P/156619024X.0...</td>
      <td>http://images.amazon.com/images/P/156619024X.0...</td>
    </tr>
    <tr>
      <th>40050</th>
      <td>8426102069</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1997.0</td>
      <td>Juventud</td>
      <td>http://images.amazon.com/images/P/8426102069.0...</td>
      <td>http://images.amazon.com/images/P/8426102069.0...</td>
      <td>http://images.amazon.com/images/P/8426102069.0...</td>
    </tr>
    <tr>
      <th>41265</th>
      <td>0553210203</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1981.0</td>
      <td>Bantam Books</td>
      <td>http://images.amazon.com/images/P/0553210203.0...</td>
      <td>http://images.amazon.com/images/P/0553210203.0...</td>
      <td>http://images.amazon.com/images/P/0553210203.0...</td>
    </tr>
    <tr>
      <th>58243</th>
      <td>0460012878</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1976.0</td>
      <td>J m Dent &amp;; Sons Ltd</td>
      <td>http://images.amazon.com/images/P/0460012878.0...</td>
      <td>http://images.amazon.com/images/P/0460012878.0...</td>
      <td>http://images.amazon.com/images/P/0460012878.0...</td>
    </tr>
    <tr>
      <th>69689</th>
      <td>0141305371</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1999.0</td>
      <td>Puffin Books</td>
      <td>http://images.amazon.com/images/P/0141305371.0...</td>
      <td>http://images.amazon.com/images/P/0141305371.0...</td>
      <td>http://images.amazon.com/images/P/0141305371.0...</td>
    </tr>
    <tr>
      <th>72306</th>
      <td>2253004359</td>
      <td>Jane Eyre</td>
      <td>Charlotte BrontÃ?Â«</td>
      <td>1991.0</td>
      <td>LGF</td>
      <td>http://images.amazon.com/images/P/2253004359.0...</td>
      <td>http://images.amazon.com/images/P/2253004359.0...</td>
      <td>http://images.amazon.com/images/P/2253004359.0...</td>
    </tr>
    <tr>
      <th>84642</th>
      <td>0812523377</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1994.0</td>
      <td>Tor Books</td>
      <td>http://images.amazon.com/images/P/0812523377.0...</td>
      <td>http://images.amazon.com/images/P/0812523377.0...</td>
      <td>http://images.amazon.com/images/P/0812523377.0...</td>
    </tr>
    <tr>
      <th>84848</th>
      <td>0809598949</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>2004.0</td>
      <td>Wildside Press</td>
      <td>http://images.amazon.com/images/P/0809598949.0...</td>
      <td>http://images.amazon.com/images/P/0809598949.0...</td>
      <td>http://images.amazon.com/images/P/0809598949.0...</td>
    </tr>
    <tr>
      <th>87375</th>
      <td>3548301231</td>
      <td>Jane Eyre</td>
      <td>C Bronte</td>
      <td>NaN</td>
      <td>Ullstein-Taschenbuch-Verlag, Zweigniederlassun...</td>
      <td>http://images.amazon.com/images/P/3548301231.0...</td>
      <td>http://images.amazon.com/images/P/3548301231.0...</td>
      <td>http://images.amazon.com/images/P/3548301231.0...</td>
    </tr>
    <tr>
      <th>144292</th>
      <td>0517668432</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1988.0</td>
      <td>Random House Value Publishing</td>
      <td>http://images.amazon.com/images/P/0517668432.0...</td>
      <td>http://images.amazon.com/images/P/0517668432.0...</td>
      <td>http://images.amazon.com/images/P/0517668432.0...</td>
    </tr>
    <tr>
      <th>158858</th>
      <td>1853268348</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>NaN</td>
      <td>Universal Sales Marketing</td>
      <td>http://images.amazon.com/images/P/1853268348.0...</td>
      <td>http://images.amazon.com/images/P/1853268348.0...</td>
      <td>http://images.amazon.com/images/P/1853268348.0...</td>
    </tr>
    <tr>
      <th>166665</th>
      <td>2266083252</td>
      <td>Jane Eyre</td>
      <td>Charlotte BrontÃ?Â«</td>
      <td>1999.0</td>
      <td>Pocket</td>
      <td>http://images.amazon.com/images/P/2266083252.0...</td>
      <td>http://images.amazon.com/images/P/2266083252.0...</td>
      <td>http://images.amazon.com/images/P/2266083252.0...</td>
    </tr>
    <tr>
      <th>204658</th>
      <td>0451515560</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1981.0</td>
      <td>Signet Book</td>
      <td>http://images.amazon.com/images/P/0451515560.0...</td>
      <td>http://images.amazon.com/images/P/0451515560.0...</td>
      <td>http://images.amazon.com/images/P/0451515560.0...</td>
    </tr>
    <tr>
      <th>226926</th>
      <td>0582528259</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1978.0</td>
      <td>Addison-Wesley Pub Co</td>
      <td>http://images.amazon.com/images/P/0582528259.0...</td>
      <td>http://images.amazon.com/images/P/0582528259.0...</td>
      <td>http://images.amazon.com/images/P/0582528259.0...</td>
    </tr>
    <tr>
      <th>242914</th>
      <td>1590071212</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>2002.0</td>
      <td>New Millenium Audio</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
    </tr>
    <tr>
      <th>248967</th>
      <td>843761449X</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1998.0</td>
      <td>Ediciones Catedra S.A.</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It looks like each ISBN assigned to the book 'Jane Eyre' has different Publisher and Year of Publication values also.</p>
<p>It might be more useful for our model if we simplified this to give each book a <em>unique</em> identifier, independent of the book format, as our recommendations will be for a book, not a specific version of a book. Therefore, all values in the Jane Eyre example above would stay the same, except all of the Jane Eyre entries would additionally be assigned a <em>unique ISBN</em> code as a new field.</p>
<p><strong>Will create this more unique identifier under the field name 'UNIQUE_ITEMIDS'. Note that entries with only a single ISBN number will be left the same. However, will need to do this after joining to the other tables in the dataset, as some ISBNs in the 'book-rating' table may be removed if done prior.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Interactions">
<a class="anchor" href="#Interactions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Interactions<a class="anchor-link" href="#Interactions"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">book_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>276725</td>
      <td>034545104X</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>276727</td>
      <td>0446520802</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">book_ratings</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">'all'</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>unique</th>
      <th>top</th>
      <th>freq</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>USERID</th>
      <td>1.14978e+06</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>140386</td>
      <td>80562.3</td>
      <td>2</td>
      <td>70345</td>
      <td>141010</td>
      <td>211028</td>
      <td>278854</td>
    </tr>
    <tr>
      <th>ITEMID</th>
      <td>1149780</td>
      <td>340556</td>
      <td>0971880107</td>
      <td>2502</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>RATING</th>
      <td>1.14978e+06</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.86695</td>
      <td>3.85418</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>10</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">book_ratings</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>USERID     int64
ITEMID    object
RATING     int64
dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The data types already look good. Remember that the ISBN numbers may contain letters, and so should be left as strings.</p>
<p>Which users contribute the most ratings?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">super_users</span> <span class="o">=</span> <span class="n">book_ratings</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'USERID'</span><span class="p">)</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The 20 users with the most ratings:</span><span class="se">\n</span><span class="si">{</span><span class="n">super_users</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The 20 users with the most ratings:
USERID
11676     13602
198711     7550
153662     6109
98391      5891
35859      5850
212898     4785
278418     4533
76352      3367
110973     3100
235105     3067
230522     2991
16795      2948
234623     2674
36836      2529
52584      2512
245963     2507
204864     2504
55492      2459
185233     2448
171118     2421
Name: ITEMID, dtype: int64
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Wow! User #11676 has almost twice as many ratings as the next highest user! All of the top 20 users have thousands of ratings, which seems like a lot, although maybe I'm just a slow reader...</p>
<p>Let's see how they are distributed.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_hist</span> <span class="o">=</span> <span class="n">super_users</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">super_users</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">)</span>
<span class="n">user_hist</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'No. of ratings'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It looks like <strong><em>by far</em></strong> the most frequent events are users with only 1 or 2 rating entries. We can see that the 'super users' with thousands of ratings are significant outliers.</p>
<p>This becomes clear if we make the same histogram with a cutoff for users with a minimum of 1000 ratings.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">super_user_hist</span> <span class="o">=</span> <span class="n">super_users</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">super_users</span><span class="o">&gt;</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">super_user_hist</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'No. of ratings (min. 1000)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see what the distribution of <strong>ratings</strong> looks like.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rtg</span> <span class="o">=</span> <span class="n">book_ratings</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rtg</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtg</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Rating'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'counts'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Seems like most of the entries have a rating of zero!</p>
<p>After doing some research on the internet regarding this (and similar) datasets, it appears that the rating scale is actually from 1 to 10, and a 0 indicates an 'implicit' rather than an 'explicit' rating. An implicit rating represents an interaction (may be positive or negative) between the user and the item. Implicit interactions usually need to be handled differently from explicit ones.</p>
<p>For the modeling step we'll only be looking at <em>explicit</em> ratings, and so the 0 rating entry rows will be removed.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Size of book_ratings before removing zero ratings: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">book_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="n">book_ratings</span> <span class="o">=</span> <span class="n">book_ratings</span><span class="p">[</span><span class="n">book_ratings</span><span class="o">.</span><span class="n">RATING</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Size of book_ratings after removing zero ratings: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">book_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Size of book_ratings before removing zero ratings: 1149780
Size of book_ratings after removing zero ratings: 433671
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By removing the implicit ratings we have reduced our sample size by more than half.</p>
<p>Let's look at how the ratings are distributed again.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rtg</span> <span class="o">=</span> <span class="n">book_ratings</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rtg</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtg</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Rating'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'counts'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is much more clear! Now we can see that 8 is the most frequent rating, while users tend to give ratings &gt; 5, with very few low ratings given.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Merge">
<a class="anchor" href="#Merge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Merge<a class="anchor-link" href="#Merge"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, we'll join the 'books' table to the 'book_ratings' table on the ISBN field.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Books table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Ratings table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">book_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="n">books_with_ratings</span> <span class="o">=</span> <span class="n">book_ratings</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">books</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">'ITEMID'</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="s1">'ITEMID'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'New table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books_with_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Books table size: 271339
Ratings table size: 433671
New table size: 433671
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's take a look at the new table.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
      <td>Rites of Passage</td>
      <td>Judith Rae</td>
      <td>2001.0</td>
      <td>Heinle</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
      <td>Help!: Level 1</td>
      <td>Philip Prowse</td>
      <td>1999.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
      <td>The Amsterdam Connection : Level 4 (Cambridge ...</td>
      <td>Sue Leather</td>
      <td>2001.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>276736</td>
      <td>3257224281</td>
      <td>8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>276737</td>
      <td>0600570967</td>
      <td>6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There are </span><span class="si">{</span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s1"> books with no title/author information.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'This represents </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books_with_ratings</span><span class="p">)</span><span class="o">/</span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">% of the ratings dataset.'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 49861 books with no title/author information.
This represents 8.70% of the ratings dataset.
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There seems to be quite a few ISBNs in the ratings table that did not match an ISBN in the books table, almost 9% of all entries!</p>
<p>There isn't really anything we can do about that, but we should really remove them from the dataset as we won't be able to access the title of the book to make a recommendation even if the model can use them.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 433671 entries, 1 to 1149779
Data columns (total 10 columns):
 #   Column     Non-Null Count   Dtype  
---  ------     --------------   -----  
 0   USERID     433671 non-null  int64  
 1   ITEMID     433671 non-null  object 
 2   RATING     433671 non-null  int64  
 3   TITLE      383810 non-null  object 
 4   AUTHOR     383809 non-null  object 
 5   YEAR       378026 non-null  float64
 6   PUBLISHER  383808 non-null  object 
 7   URLSMALL   383810 non-null  object 
 8   URLMEDIUM  383810 non-null  object 
 9   URLLARGE   383809 non-null  object 
dtypes: float64(1), int64(2), object(7)
memory usage: 36.4+ MB
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It looks like the <code>year_of_publication</code> field contains the most NaN entries, while <code>USERID</code>, <code>isbn</code>, and <code>book_rating</code> are full. The <code>book_title</code>, <code>book_author</code>, and <code>publisher</code> fields contain approximately the same number of missing entries.</p>
<p>We'll choose to remove rows for which the <code>book_title</code> is empty, as this is the most crucial piece of data needed to identify the book.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">'TITLE'</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># remove rows with missing title/author data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see which books have the highest <strong>cumulative</strong> book rating values.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cm_rtg</span> <span class="o">=</span> <span class="n">books_with_ratings</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'TITLE'</span><span class="p">)</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">cm_rtg</span> <span class="o">=</span> <span class="n">cm_rtg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">cm_rtg</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="c1"># Get sorted book titles</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">cm_rtg</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="c1"># Get corresponding cm_rtg values</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">idx</span><span class="p">)),</span> <span class="n">vals</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">idx</span><span class="p">)),</span> <span class="n">idx</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">'vertical'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'cumulative rating score'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This seems about right as it combines the total number of ratings with the score given, so these are all really popular book titles.</p>
<p>What about the highest <strong>average ratings</strong> (with a minimum of at least 50 ratings recieved)?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cutoff</span> <span class="o">=</span> <span class="n">books_with_ratings</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">mean_rtg</span> <span class="o">=</span> <span class="n">books_with_ratings</span><span class="p">[</span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">cutoff</span><span class="p">[</span><span class="n">cutoff</span><span class="o">&gt;</span><span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'TITLE'</span><span class="p">)[</span><span class="s1">'RATING'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">mean_rtg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span> <span class="c1"># show only top 10</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TITLE
The Two Towers (The Lord of the Rings, Part 2)            9.330882
The Return of the King (The Lord of the Rings, Part 3)    9.213592
Harry Potter and the Goblet of Fire (Book 4)              9.125506
The Little Prince                                         9.111111
Charlotte's Web (Trophy Newbery)                          9.073529
Harry Potter and the Sorcerer's Stone (Book 1)            9.062500
84 Charing Cross Road                                     9.049180
Harry Potter and the Order of the Phoenix (Book 5)        9.047393
Harry Potter and the Prisoner of Azkaban (Book 3)         9.043321
To Kill a Mockingbird                                     8.977528
Name: RATING, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This looks perfectly reasonable. The Harry Potter and Lord of the Rings books rate extremely highly, as expected.</p>
<p>How about the <strong>lowest-rated</strong> books?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mean_rtg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span> <span class="c1"># bottom 10 only</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TITLE
Slow Waltz in Cedar Bend                                  6.619718
My Gal Sunday                                             6.607843
Hornet's Nest                                             6.591398
Bleachers                                                 6.583333
Full Tilt (Janet Evanovich's Full Series)                 6.568627
Songs in Ordinary Time (Oprah's Book Club (Paperback))    6.530303
4 Blondes                                                 5.653846
Isle of Dogs                                              5.433962
Four Blondes                                              5.393939
Wild Animus                                               4.390706
Name: RATING, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Seems like the <em>lowest average</em> rating in the dataset is only a 4.39 - and all the rest of the books have average ratings higher than 5.</p>
<p>I haven't heard of any of these books, so I can't really comment on if they seem correct here.</p>
<p><strong>Now I'd like to tackle the challenge of the same book potentially having multiple ISBN numbers (for the different formats it is available in). We should clean that up here before we add the 'user' table.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Single-ISBN-per-book">
<a class="anchor" href="#Single-ISBN-per-book" aria-hidden="true"><span class="octicon octicon-link"></span></a>Single ISBN per book<a class="anchor-link" href="#Single-ISBN-per-book"> </a>
</h3>
<p>Restrict books to a "single ISBN per book" (regardless of format)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's look again at the book titles which have the most associated ISBN numbers.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'TITLE'</span><span class="p">)</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TITLE
The Secret Garden                 18
Selected Poems                    16
Adventures of Huckleberry Finn    15
Dracula                           15
Beloved                           14
Wuthering Heights                 14
Jane Eyre                         14
Pride and Prejudice               14
Little Women                      14
The Hobbit                        12
Name: ITEMID, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiple_isbns</span> <span class="o">=</span> <span class="n">books_with_ratings</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'TITLE'</span><span class="p">)</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">multiple_isbns</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1     125322
2       7872
3       1497
4        493
5        181
6         86
7         44
8         27
9         11
10         8
14         5
15         2
11         2
18         1
16         1
12         1
Name: ITEMID, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the vast majority of books have less only 1 associated ISBN number, however quite a few multiple ISBNs. We want to create a <code>UNIQUE_ITEMIDS</code> such that a single book will only have 1 identifier when fed to the recommendation model.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">has_mult_isbns</span> <span class="o">=</span> <span class="n">multiple_isbns</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">multiple_isbns</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>
<span class="n">has_mult_isbns</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># remove NaNs, which in this case is books with a single ISBN number</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">has_mult_isbns</span><span class="p">)</span><span class="si">}</span><span class="s1"> book titles with multiple ISBN numbers which we will try to re-assign to a unique identifier'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 10231 book titles with multiple ISBN numbers which we will try to re-assign to a unique identifier
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">has_mult_isbns</span><span class="p">[</span><span class="s1">'Jane Eyre'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>14.0</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Note:</strong> Created the dictionary below and pickled it, just need to load it again (or run it if the first time on a new system).</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">make_isbn_dict</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">title_isbn_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">has_mult_isbns</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">isbn_series</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">TITLE</span><span class="o">==</span><span class="n">title</span><span class="p">]</span><span class="o">.</span><span class="n">ITEMID</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="c1"># returns only the unique ISBNs</span>
        <span class="n">title_isbn_dict</span><span class="p">[</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">isbn_series</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">title_isbn_dict</span>

<span class="o">%</span><span class="k">time</span> dict_UNIQUE_ITEMIDS = make_isbn_dict(books_with_ratings)

<span class="c1"># As the loop takes a while to run (8 min on the full dataset), pickle this dict for future use</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'multiple_isbn_dict.pickle'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dict_UNIQUE_ITEMIDS</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>

<span class="c1"># LOAD isbn_dict back into namespace</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'multiple_isbn_dict.pickle'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
    <span class="n">multiple_isbn_dict</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 8min 32s, sys: 1.61 s, total: 8min 34s
Wall time: 8min 33s
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There are now </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">multiple_isbn_dict</span><span class="p">)</span><span class="si">}</span><span class="s1"> books in the ISBN dictionary that have multiple ISBN numbers'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are now 10231 books in the ISBN dictionary that have multiple ISBN numbers
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's take a quick look in the dict we just created for the 'Jane Eyre' entry - it should contain a list of 14 ISBN numbers.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Length of Jane Eyre dict entry: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">multiple_isbn_dict</span><span class="p">[</span><span class="s2">"Jane Eyre"</span><span class="p">])</span><span class="si">}</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="n">multiple_isbn_dict</span><span class="p">[</span><span class="s1">'Jane Eyre'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Length of Jane Eyre dict entry: 14

</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>['1590071212',
 '0451518845',
 '0451523326',
 '843761449X',
 '156619024X',
 '8426102069',
 '1566193028',
 '0141305371',
 '3548301231',
 '0812523377',
 '0517668432',
 '2253004359',
 '0553210203',
 '0451515560']</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Looking good!</p>
<p>As I don't really know what each of the different ISBN numbers refers to (from what I understand the code actually signifies various things including publisher, year, type of print, etc, but decoding this is outside the scope of this analysis), I'll just select the <strong>first</strong> ISBN number that appears in the list of values to set as our <code>UNIQUE_ITEMIDS</code> for that particular book.</p>
<p><em><strong>Note</strong></em>: ISBN numbers are currently 13 digits long, but used to be 10. Any ISBN that isn't 10 or 13 digits long is probably an error that should be handled somehow. Any that are 9 digits long might actually be SBN numbers (pre-1970), and can be converted into ISBN's by just pre-fixing with a zero.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># or just the ISBN if only 1 ISBN present anyway.</span>
<span class="k">def</span> <span class="nf">add_UNIQUE_ITEMIDS_col</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">'UNIQUE_ITEMIDS'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">multiple_isbn_dict</span><span class="p">[</span><span class="n">row</span><span class="o">.</span><span class="n">TITLE</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">TITLE</span> <span class="ow">in</span> <span class="n">multiple_isbn_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="n">row</span><span class="o">.</span><span class="n">ITEMID</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="o">%</span><span class="k">time</span> books_with_ratings = add_UNIQUE_ITEMIDS_col(books_with_ratings)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 7.77 s, sys: 53.9 ms, total: 7.82 s
Wall time: 7.82 s
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
      <th>UNIQUE_ITEMIDS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
      <td>Rites of Passage</td>
      <td>Judith Rae</td>
      <td>2001.0</td>
      <td>Heinle</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>0155061224</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
      <td>Help!: Level 1</td>
      <td>Philip Prowse</td>
      <td>1999.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>052165615X</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
      <td>The Amsterdam Connection : Level 4 (Cambridge ...</td>
      <td>Sue Leather</td>
      <td>2001.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>0521795028</td>
    </tr>
    <tr>
      <th>8</th>
      <td>276744</td>
      <td>038550120X</td>
      <td>7</td>
      <td>A Painted House</td>
      <td>JOHN GRISHAM</td>
      <td>2001.0</td>
      <td>Doubleday</td>
      <td>http://images.amazon.com/images/P/038550120X.0...</td>
      <td>http://images.amazon.com/images/P/038550120X.0...</td>
      <td>http://images.amazon.com/images/P/038550120X.0...</td>
      <td>038550120X</td>
    </tr>
    <tr>
      <th>16</th>
      <td>276747</td>
      <td>0060517794</td>
      <td>9</td>
      <td>Little Altars Everywhere</td>
      <td>Rebecca Wells</td>
      <td>2003.0</td>
      <td>HarperTorch</td>
      <td>http://images.amazon.com/images/P/0060517794.0...</td>
      <td>http://images.amazon.com/images/P/0060517794.0...</td>
      <td>http://images.amazon.com/images/P/0060517794.0...</td>
      <td>0060517794</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The table now includes our <code>UNIQUE_ITEMIDS</code> field.</p>
<p>Let's check to see if the 'Jane Eyre' entries have been assigned the ISBN '1590071212', which was the first val in the dictionary for this title.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_with_ratings</span><span class="p">[</span><span class="n">books_with_ratings</span><span class="o">.</span><span class="n">TITLE</span><span class="o">==</span><span class="s1">'Jane Eyre'</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLSMALL</th>
      <th>URLMEDIUM</th>
      <th>URLLARGE</th>
      <th>UNIQUE_ITEMIDS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10481</th>
      <td>387</td>
      <td>1590071212</td>
      <td>9</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>2002.0</td>
      <td>New Millenium Audio</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
      <td>http://images.amazon.com/images/P/1590071212.0...</td>
      <td>1590071212</td>
    </tr>
    <tr>
      <th>16178</th>
      <td>2718</td>
      <td>0451518845</td>
      <td>10</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1999.0</td>
      <td>New Amer Library Classics</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
      <td>http://images.amazon.com/images/P/0451518845.0...</td>
      <td>1590071212</td>
    </tr>
    <tr>
      <th>35499</th>
      <td>8370</td>
      <td>0451523326</td>
      <td>8</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1988.0</td>
      <td>Signet Classics</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>1590071212</td>
    </tr>
    <tr>
      <th>50842</th>
      <td>11676</td>
      <td>0451523326</td>
      <td>9</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1988.0</td>
      <td>Signet Classics</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>http://images.amazon.com/images/P/0451523326.0...</td>
      <td>1590071212</td>
    </tr>
    <tr>
      <th>58066</th>
      <td>11676</td>
      <td>843761449X</td>
      <td>8</td>
      <td>Jane Eyre</td>
      <td>Charlotte Bronte</td>
      <td>1998.0</td>
      <td>Ediciones Catedra S.A.</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
      <td>http://images.amazon.com/images/P/843761449X.0...</td>
      <td>1590071212</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Great! Seems to have worked well.</p>
<p>We won't replace the original ISBN column with the 'UNIQUE_ITEMIDS' column, but just note that the recommendation model should be based on the 'UNIQUE_ITEMIDS' field.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Remove-Small-and-Large-book-cover-URL-columns">
<a class="anchor" href="#Remove-Small-and-Large-book-cover-URL-columns" aria-hidden="true"><span class="octicon octicon-link"></span></a>Remove Small and Large book-cover URL columns<a class="anchor-link" href="#Remove-Small-and-Large-book-cover-URL-columns"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_users_ratings</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'URLSMALL'</span><span class="p">,</span> <span class="s1">'URLLARGE'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Join-the-'users'-table-on-the-'USERID'-field">
<a class="anchor" href="#Join-the-'users'-table-on-the-'USERID'-field" aria-hidden="true"><span class="octicon octicon-link"></span></a>Join the 'users' table on the 'USERID' field<a class="anchor-link" href="#Join-the-'users'-table-on-the-'USERID'-field"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Books+Ratings table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books_with_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Users table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="n">books_users_ratings</span> <span class="o">=</span> <span class="n">books_with_ratings</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">'USERID'</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="s1">'USERID'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'New "books_users_ratings" table size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">books_users_ratings</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Books+Ratings table size: 383810
Users table size: 278858
New "books_users_ratings" table size: 383810
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Inspect the new table.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_users_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>ITEMID</th>
      <th>RATING</th>
      <th>TITLE</th>
      <th>AUTHOR</th>
      <th>YEAR</th>
      <th>PUBLISHER</th>
      <th>URLMEDIUM</th>
      <th>UNIQUE_ITEMIDS</th>
      <th>AGE</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>COUNTRY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
      <td>Rites of Passage</td>
      <td>Judith Rae</td>
      <td>2001.0</td>
      <td>Heinle</td>
      <td>http://images.amazon.com/images/P/0155061224.0...</td>
      <td>0155061224</td>
      <td>NaN</td>
      <td>seattle</td>
      <td>washington</td>
      <td>usa</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
      <td>Help!: Level 1</td>
      <td>Philip Prowse</td>
      <td>1999.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/052165615X.0...</td>
      <td>052165615X</td>
      <td>16.0</td>
      <td>rijeka</td>
      <td>n/a</td>
      <td>croatia</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
      <td>The Amsterdam Connection : Level 4 (Cambridge ...</td>
      <td>Sue Leather</td>
      <td>2001.0</td>
      <td>Cambridge University Press</td>
      <td>http://images.amazon.com/images/P/0521795028.0...</td>
      <td>0521795028</td>
      <td>16.0</td>
      <td>rijeka</td>
      <td>n/a</td>
      <td>croatia</td>
    </tr>
    <tr>
      <th>8</th>
      <td>276744</td>
      <td>038550120X</td>
      <td>7</td>
      <td>A Painted House</td>
      <td>JOHN GRISHAM</td>
      <td>2001.0</td>
      <td>Doubleday</td>
      <td>http://images.amazon.com/images/P/038550120X.0...</td>
      <td>038550120X</td>
      <td>NaN</td>
      <td>torrance</td>
      <td>california</td>
      <td>usa</td>
    </tr>
    <tr>
      <th>16</th>
      <td>276747</td>
      <td>0060517794</td>
      <td>9</td>
      <td>Little Altars Everywhere</td>
      <td>Rebecca Wells</td>
      <td>2003.0</td>
      <td>HarperTorch</td>
      <td>http://images.amazon.com/images/P/0060517794.0...</td>
      <td>0060517794</td>
      <td>25.0</td>
      <td>iowa city</td>
      <td>iowa</td>
      <td>usa</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_users_ratings</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 383810 entries, 1 to 1149778
Data columns (total 13 columns):
 #   Column          Non-Null Count   Dtype  
---  ------          --------------   -----  
 0   USERID          383810 non-null  int64  
 1   ITEMID          383810 non-null  object 
 2   RATING          383810 non-null  int64  
 3   TITLE           383810 non-null  object 
 4   AUTHOR          383809 non-null  object 
 5   YEAR            378026 non-null  float64
 6   PUBLISHER       383808 non-null  object 
 7   URLMEDIUM       383810 non-null  object 
 8   UNIQUE_ITEMIDS  383810 non-null  object 
 9   AGE             267996 non-null  float64
 10  CITY            383810 non-null  object 
 11  STATE           383810 non-null  object 
 12  COUNTRY         373330 non-null  object 
dtypes: float64(2), int64(2), object(9)
memory usage: 41.0+ MB
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are a few missing <code>age</code>, <code>year_of_publication</code>, <code>publisher</code>, and <code>country</code> entries, but the primary fields of <code>USERID</code>, <code>UNIQUE_ITEMIDS</code>, and <code>book_rating</code> are all full, which is good.</p>
<p>In terms of the data types, <code>USERID</code> and <code>book_rating</code> are integers, while the <code>UNIQUE_ITEMIDS</code> are strings (which is expected as the ISBN numbers may also contain letters).</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">books_users_ratings</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(383810, 13)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Recommender-model">
<a class="anchor" href="#Recommender-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recommender model<a class="anchor-link" href="#Recommender-model"> </a>
</h2>
<p>Collaborative filtering use similarities of the 'user' and 'item' fields, with values of 'rating' predicted based on either user-item, or item-item similarity:</p>
<ul>
<li>Item-Item CF: "Users who liked this item also liked..."</li>
<li>User-Item CF: "Users who are similar to you also liked..."</li>
</ul>
<p>In both cases, we need to create a user-item matrix built from the entire dataset. We'll create a matrix for each of the training and testing sets, with the users as the rows, the books as the columns, and the rating as the matrix value. Note that this will be a very sparse matrix, as not every user will have watched every movie etc.</p>
<p>We'll first create a new dataframe that contains only the relevant columns (<code>USERID</code>, <code>UNIQUE_ITEMIDS</code>, and <code>book_rating</code>).</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_item_rating</span> <span class="o">=</span> <span class="n">books_users_ratings</span><span class="p">[[</span><span class="s1">'USERID'</span><span class="p">,</span> <span class="s1">'UNIQUE_ITEMIDS'</span><span class="p">,</span> <span class="s1">'RATING'</span><span class="p">]]</span>
<span class="n">user_item_rating</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USERID</th>
      <th>UNIQUE_ITEMIDS</th>
      <th>RATING</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
    </tr>
    <tr>
      <th>8</th>
      <td>276744</td>
      <td>038550120X</td>
      <td>7</td>
    </tr>
    <tr>
      <th>16</th>
      <td>276747</td>
      <td>0060517794</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We know what the distribution of ratings should look like (as we plotted it earlier) - let's plot it again on this new dataframe to just quickly check that it looks right.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rtg</span> <span class="o">=</span> <span class="n">user_item_rating</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rtg</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtg</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Rating'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'counts'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnwAAAFBCAYAAADt4XK4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADh0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uMy4yLjIsIGh0dHA6Ly9tYXRwbG90bGliLm9yZy+WH4yJAAAaDElEQVR4nO3df7BdZX3v8XdICBqsKRBioKCRQr8iP0ZoA+HKD9GqxcytI5bKLxEEkVooUmTMvQID4vBrAoZoaS1V4FJkGri5IOVXqYXhV5GCgKGUL9NgLJGc0BCQH0KQcO4fax3d7JwkZ+ess/c5z3m/ZjJ7n+dZ69nfPRnC5zzPWs+a0N/fjyRJksq1Sa8LkCRJ0sgy8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFm9TrAkariNgMmAUsB9b0uBxJkqT1mQhsA/xbZq5u7zTwrdss4O5eFyFJktSB/YB72hsNfOu2HODqq69mxowZva5FkiRpnfr6+jjiiCOgzi/tDHzrtgZgxowZbLfddr2uRZIkaSgGvQzNmzYkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKpyBT5IkqXAGPkmSpMIZ+CRJkgrnkzYkSdqAmXNv6nUJG7T0/Dm9LkGjmDN8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYWb1M0Pi4gALgT2ASYDTwDfyMx/rPtPBo4H3gP8F/C3mTm/5fwdgPnA3sAE4EfAyZn5VMsxwx5DkiSpJF2b4YuITYDbgFeB9wHvAhYCi6JyFHAOcCKwJVVoOzsiPlefvylwM/ACsAvwe8B/A7fUfTQxhiRJUmm6uaS7NdWs25WZuSozVwOXApsCHwD+AvheZt6Rma9n5j3A94Av1+d/HNgJOCUzV2bmC8BXgN8FPlEf08QYkiRJRela4MvMFcA9wHERsXU9o3YCsBK4kyr0PdB22gPA7hExBZgNLMnM51rGXAUsAWZHxGbDHaOp7ypJkjSadPUaPuDTwC3As0A/Vdg7hCp4TgRWtR2/su7bimqGsL1/4JjpVEu4wx1DkiSpON28hm8ycCvVjRrbAFOBs4AbgR02cHr/MPubGkOSJGnM6eYM34eBPYA/ysxn67ZLI+IE4E+AN6hm4VpNq9tXAisG6R84pg94roExJEmSitPNmzYmtr0OmAS8CTzE2tfR7Qs8mJmvAfcBO0TEr5deI+JdwI7A3Zn5+nDHGMZ3kyRJGrW6OcN3L9UM2wURcQrwCvBZIIDPU+2H972IuJ4qfB0AHA18rj7/duDfgUsi4kSqPfQWAIuBf66PubiBMSRJkorSzbt0XwA+RrWk+jjVXnh/DnwqM+/PzIXAqcDfAi9RbdlycmZeV5+/BpgDTAGWAk9Rbekyp+6jiTEkSZJK09W7dDPzJ1SBa1393wG+s57+p4FPbuAzhj2GJElSSXyWriRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhJvW6AEmSpI01c+5NvS5hSJaeP6enn+8MnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEm9boASVJ5Zs69qdclbNDS8+f0ugSpa5zhkyRJKpyBT5IkqXAGPkmSpMIZ+CRJkgpn4JMkSSqcgU+SJKlwBj5JkqTCGfgkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKtykbn9gRBwNzAVmAs8A38rMb9Z9hwGnATsBfcBC4MzMXFP3TwMWAPsDmwMPA6dl5kMt4w97DEmSpJJ0dYYvIg4F5gEnAVOBzwPHR8TvR8QBwJXAecA04GDgSOD0liEWAlsDs4HtgXuB2yJiq3r8YY8hSZJUmm7P8J0JXJiZt9c/3wnsDBAR1wE3Z+a1dd/iiLgYOCMizgHeDxwI7JGZy+pzzgZOoAp1l1AFyeGOIUlS0WbOvanXJWzQ0vPn9LqEonRthi8itqEKdy9HxD0R8WJELI6Iw+tDZgMPtJ32ALAV1fLsbOB14NGBzsx8A/hx3dfUGJIkSUXp5gzf9vXrF6lm054CjgWujoinqZZZV7Wds7J+nV73P5+Z/YMcM6N+38QYkiRJRelm4JtQvy7IzMUD7yPis8DRGzi3PaB12t/UGJIkSWNON2/aeKZ+fa6tfQmwHbCCaum11bT6ta/u3yIiJgxyTF/9vokxJEmSitLtwPccMKutfUfgp8B9rH0d3b7AcqpQeB8wGdhzoDMiJtfj3V03NTGGJElSUbq2pJuZa+o7Zr8aEXdQBaxjgT2A44C3AXdFxGeA64HdgFOBefU1d09ExC3AvIg4EngJOBt4Fbim/pj5DYwhSZJUlG4/aeM84CLgcuBFqu1QDsrMRzLzfuBQ4Iy6bxHVBskXtZx/OPA08BjVrN2uwEcz80WAJsaQJEkqTVf34atn2b5e/xmsfxFVSFvX+S8AR23gM4Y9hiRJUkl8lq4kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFW7IgS8ifisivtHy8xci4pGIuCYi2p9fK0mSpFGikxm+S4ADACJiZ+CvgB9QPRLtovWcJ0mSpB7q5Ekbn6B67i3AYcA/ZeaZEbElsLjxyiRJktSITmb43pGZy+v3HwFuBMjMVcBvN12YJEmSmtHJDN/PI2J34DVgL+AIgIgI4PkRqE2SJEkN6CTwfRv4EdAPXJeZSyNiKnAd8A8jUZwkSZKGb8hLupn5LeBDwKeAo+rml4FrgK82XpkkSZIaMeQZvoi4JDNPbm3LzDUR8S3gKqobOSRJkjTKbDDwRcRvA1sCx0fEfGBC2yE7U836SZIkaRQaygzfEcB8quXf/xykfwLwwyaLkiRJUnM2GPgy868i4mpgBfCxQQ55BXik6cIkSZLUjCFdw5eZL0TEBzLzP0a6IEmSJDWrk21ZnoqILwG7A1PaOzPzqLVPkSRJUq91Evgup7o54yfAL0emHEmSJDWtk8B3ELBXZvrcXEmSpDGkk2fprga8hk+SJGmM6STw/R1wzEgVIkmSpJHRyZLuZOAbEXEs1X58b7Z2etOGJEnS6NRJ4JsFPF6//50RqEWSJEkjYMiBLzMPHMlCJEmSNDKGHPgiYv/1dPdn5t0N1CNJkqSGdbKkeyfQT/Xs3AH9Le8nNlGQJEmSmtVJ4Nup7eeJdduJwNmNVSRJkqRGdXIN35JBmp+MiMXAtcDejVUlSZKkxnSyD9+6LAd2aWAcSZIkjYBObtr48CDNU4BDgL7GKpIkSVKjOrmG759Z+6YNgFXAcY1VJEmSpEZ1EvjeO0jbq8B/Z2b/IH2SNGJmzr2p1yUMydLz5/S6BEka+jV8mfmzzPwZ8EtgBvAu4FeGPUmSpNGtk2v4tgCuAg6qmyYAayLiOuCYzHxtBOqTJEnSMHVyl+58YFuqmzR2AXYFjqxf3YdPkiRplOrkGr6DgFn1su6AxyPiYeBm4KuNViZJkqRGdDLD9zbg54O0LwG2bqYcSZIkNa2TwPck8KlB2g8BnmqmHEmSJDWtkyXdc4GFEfFZ4N+pbtrYHfgYcMwI1CZJkqQGdLItyyLgw8DrwB8BnwTeBOZk5lUjU54kSZKGa8iBLyKmAacDV2fmHpm5M/AvwFciwmv4JEmSRqlOruG7pH59pKXteuAVqi1bJEmSNAp1Evj+EDgkM3860JCZTwGfAz7adGGSJElqRic3bWy6jvbN6j8diYgPAncB52TmWXXbYcBpwE5AH7AQODMz19T904AFwP7A5sDDwGmZ+VDLuMMeQ5IkqSSdzPDdCnw3It4fEVMi4h0R8QdUj1u7pZMPjYi3A5cDL7W0HQBcCZwHTAMOpnqSx+ktpy6k2vNvNrA9cC9wW0Rs1dQYkiRJpekk8H0Z2AZ4jCqo/QL4ETAZOKHDzz0XeIK3Xg94EnBzZl6bmaszczFwMXBSRGwSEbsCB1LNxi3LzJepHunWTxXqmhpDkiSpKJ1sy/JsZn4Q+ADwp8Cngd0y88DMfGGo40TEvsBRrB0SZwMPtLU9AGxFtTw7m2pLmEdbanoD+HHd19QYkiRJRenkGj4AMvMnwE825sMiYgrVUu6pmflMRLR2bw2sajtlZf06ve5/PjP7BzlmRoNjSJIkFaWTJd0mnAs8mZlXdHhee0DrtL+pMSRJksacrgW+lqXc49dxyAqqpddW0+rXvrp/i4iYMMgxfQ2OIUmSVJSOl3SH4ViqbVAebVnKnQrsFRF/DNzH2tfR7QssB5ZQ1ToZ2BN4CCAiJgOzgP9VH9/EGJIkSUXpZuD7S+CMtrZrgX8FLgRmAndFxGeonuCxG3AqMK++5u6JiLgFmBcRR1LdKXw28CpwTT3e/AbGkCRJKkrXAl9mPg8839oWEauBFzOzD+iLiEOBrwP/h2r5dQFwUcsph9dtj1HN1N0HfDQzX6w/4/7hjiFJklSabs7wrSUzP9T28yJg0XqOf4HqOsD1jTnsMSRJkkrS7bt0JUmS1GUGPkmSpMIZ+CRJkgpn4JMkSSqcgU+SJKlwBj5JkqTCGfgkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKpyBT5IkqXAGPkmSpMIZ+CRJkgpn4JMkSSrcpF4XIEmCmXNv6nUJQ7L0/Dm9LkHSRnCGT5IkqXAGPkmSpMIZ+CRJkgpn4JMkSSqcgU+SJKlwBj5JkqTCGfgkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKpyBT5IkqXAGPkmSpMIZ+CRJkgpn4JMkSSqcgU+SJKlwBj5JkqTCGfgkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKpyBT5IkqXAGPkmSpMIZ+CRJkgpn4JMkSSrcpG5+WERMBy4APg68A3gc+Fpm/rDuPww4DdgJ6AMWAmdm5pq6fxqwANgf2Bx4GDgtMx9q+YxhjyFJklSSbs/w3QBsC+wJTAfuAG6IiG0j4gDgSuA8YBpwMHAkcHrL+QuBrYHZwPbAvcBtEbEVQBNjSJIklaZrgS8iplLN6H05M/sy8zWq2b7Ngb2Bk4CbM/PazFydmYuBi4GTImKTiNgVOJBqNm5ZZr4MnA30U4U6GhpDkiSpKF0LfJn5i8w8NjP/o6V5h/r1aaoZtwfaTnsA2IpqeXY28DrwaMuYbwA/rvtoaAxJkqSi9OymjYh4J3A5cENmPki1zLqq7bCV9ev0uv/5zOwf5Jjp9fsmxpAkSSpKTwJfRLyH6tq5Z4EjhnBKe0DrtL+pMSRJksacrge+iJhFtcx6N/CJzHyl7lpBtfTaalr92lf3bxEREwY5pq/BMSRJkorS1cBX3zRxK3BeZn4pM3/V0n0fa19Hty+wHFhS90+musN3YLzJwCyq8NjUGJIkSUXp2j58ETGRasuUyzJz/iCHzAfuiojPANcDuwGnAvPqa+6eiIhbgHkRcSTwEtUdtq8C1zQ4hiRJUlG6OcO3D9XM2ikR8Vrbn8sy837gUOAM4EVgEdUGyRe1jHE41R29j1HN2u0KfDQzXwRoYgxJkqTSdG2GLzPvAdqvnWs/ZhFVSFtX/wvAUSM9hiRJUkl8lq4kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJkiQVzsAnSZJUuEm9LkBS98yce1OvS9igpefP6XUJklQcZ/gkSZIKZ+CTJEkqnIFPkiSpcAY+SZKkwhn4JEmSCmfgkyRJKpzbskjr4TYmkqQSOMMnSZJUOAOfJElS4Qx8kiRJhTPwSZIkFc7AJ0mSVDgDnyRJUuEMfJIkSYVzHz41aizsWwfuXSdJGl+c4ZMkSSqcM3w95oyYJEkaaeMy8EXEFGAecBCwJfA4cGZm3t7TwiRJkkbAeF3S/TbwP4CPA+8CrgBujIjoZVGSJEkjYdzN8EXEFsCRwJ9m5pN183ci4gTgBOCUum0iQF9f38gW9MqqkR2/IcuWLRvagX6frhvyd4Gyvs8Y+C7g9xnNxu1/O1DW9xkD3wU6/PvZCC15ZeJg/RP6+/tHtIDRJiL+ELgd+J3MfKal/TvA7pm5T/3zvsDdvalSkiRpo+yXmfe0N467GT5g6/q1/VeClcD0lp//DdgPWA6s6UJdkiRJG2sisA1VflnLeAx86/Pr6c7MXA2slZAlSZJGqSXr6hiPN22sqF+3amufBozwBXuSJEndNx4D30PAamB2W/sH8Zo9SZJUoHF30wZARFwK7A8cDCwDvgScBeySmT/rYWmSJEmNG6/X8J0CXEh1jd5vAY8AHzfsjR4RMR24gGqvxHdQbY79tcz8YU8L01oi4oPAXcA5mXlWj8tRLSKOBuYCM4FngG9l5jd7WZOg3u/1QmAfYDLwBPCNzPzHnhY2TkXEe4HLgQOA92bm0pa+w4DTgJ2oLvlaSPWQhjF5I+d4XNIlM1dn5smZOT0z356Z+2Tmvb2uS29xA7AtsCfV3dN3ADdExLY9rUpvERFvp/rH8qVe16LfiIhDqZ4mdBIwFfg8cHxE/H5PCxvnImIT4DbgVeB9VBv/LwQWufF/90XEp4D7gbUmeyLiAOBK4Dyqa/wPptrD9/Ru1tik8TrDp1EsIqZSzejNy8y+uu0CqtmKvYH/18Py9FbnUs1QPLOhA9VVZwIXtjwu8k5g596Vo9rWwHuAP8vMVfDrS4wuAj4AZA9rG4+2pNp+7d3AUW19JwE3Z+a19c+LI+Ji4IyIOCcz3+xinY0w8GnUycxfAMe2Ne9Qvz7d5XK0DvXm5EcBuwHf73E5qkXENlTh7uWIuAfYnWoG47zM9O+phzJzRf13clxEPAi8QPWEp5VUqxjqosz8LkBEvHuQ7tnApW1tD1Dt8LETYzCcj8slXY0tEfFOqmXDGzLzwV7XI4iIKVR/J6e2PrFGo8L29esXgT+j2oj1MuDqiNivZ1VpwKeprqt8lmrHiP8NHJKZz/ayKK1lawZ/QAO89SENY4aBT6NaRLwHuJfqH8cjelyOfuNc4MnMvKLXhWgtE+rXBZm5ODNfycwFwIPA0b0rSxExGbiV6jKIbaiurzwLuDEi3t/D0tSZMbm9iYFPo1ZEzKKaQr8b+ERmvtLjksRblnKP73UtGtTAjOtzbe1LgO26XIve6sPAHsApmdmXmS9l5qXAT4Fjelua2qxg8Ac0wBh9SIPX8GlUiohdqX4TPicz5/e6Hr3FscDmwKMtNxZOBfaKiD/OzD17VpmgCnzPAbOA61vad6Sa5VPvTGx7HTAJJ2BGm/tY+wEN+wLLWc/jy0YzA59GnYiYSHU7/GWGvVHpL4Ez2tquBf6Van8x9VBmrqnvJvxqRNxBNUN+LNXM0nE9LU73Us0cXRARpwCvAJ8FgmrrHI0e84G7IuIzVL847QacSrV7xJhc0h2XT9rQ6FYvGd4NvM7a10pclZlf6H5VWp+IuBO4042XR4eImEAVyr9AdYF5Al/JzH/qaWEiInan2tvtD6hmxp+g2sz3Bz0tbByKiKTaJmcTYFN+8/+cqzLzCxFxMPB1qrtyVwB/Q3W3+5gMTgY+SZKkwnnNgCRJUuEMfJIkSYUz8EmSJBXOwCdJklQ4A58kSVLhDHySJEmFM/BJUo9ExGUR8cNe1yGpfO7DJ0kbUG8svR/wq5bm1cCTwDcz8/tDHGdX4Pcyc1HjRUrSejjDJ0lDc01mvm3gDzAD+DZwZUR8eohjHAMcPGIVStI6+CxdSdoImfkqVdg7DPgc8H8jYm/gAmB3YALV84VPzMynIuL7wKFAf0T8CdUjnS4AdszMfSPiQ8AdwD5Uz/HcDVgGnJKZNwNExI7Ad4G9gJ8Dc4GzgWt9rJ2k9XGGT5KGZzPg1YjYDLgJuJ/q+bUzqX6pvhwgMw8H7uI3M4Ur1jHeWcBhwBZUgfGK+tm4AH8HTK7H3gf4PLB9499IUnGc4ZOkjRAR7wSOAPYH5mTm6noG7peZ+Qbwi4i4Hri4w6EXZOZP689YSDV7uE1ErAEOAA4eCIsR8WUgm/lGkkpm4JOkoTmsXoodsBnwIFUAu7VumwOcGhE7AZsCE+n839n/bHn/y/p1CjC1fr9koDMzn4yIVR2OL2kccklXkobmmpYbNqYA9wF9mXkDQH0N3lXA3wPb1MeduBGf8+Y62gf+vX69rd2tFiRtkIFPkjqUmW9S3XH7kYj4Yt08G3gpMy/OzJfrtr0b/Njl9esOAw31TOJWDX6GpEK5pCtJG6FeTv0acFFE/AvVUuvmEbEn1f58RwLvA4iId2fmfwGvADMjYirwWoeftywiHgJOi4gfUf3CPg94ef1nSpIzfJI0HJcAD1Mt4/4AuIJqa5WnqGbiPgk8DjxW39BxGbAL8DSw60Z83nFU1/I9U3/OXwMvsu5lYEkCfNKGJI0pEbFZZq6u329KNWv4xcy8vLeVSRrNXNKVpDEiIm4EptZP9ngJOIPqcW+397QwSaOeS7qSNHacADxHtffeCuAjwP/MzGU9rUrSqOeSriRJUuGc4ZMkSSqcgU+SJKlwBj5JkqTCGfgkSZIKZ+CTJEkq3P8HfqSl8Kk9sNMAAAAASUVORK5CYII=%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Looks perfect! Continue.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Using-sklearn-to-generate-training-and-testing-subsets">
<a class="anchor" href="#Using-sklearn-to-generate-training-and-testing-subsets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using <code>sklearn</code> to generate training and testing subsets<a class="anchor-link" href="#Using-sklearn-to-generate-training-and-testing-subsets"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_data</span><span class="p">,</span> <span class="n">test_data</span> <span class="o">=</span> <span class="n">model_selection</span><span class="o">.</span><span class="n">train_test_split</span><span class="p">(</span><span class="n">user_item_rating</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Training set size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Testing set size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Test set is </span><span class="si">{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">test_data</span><span class="p">))</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="si">:</span><span class="s1">.0f</span><span class="si">}</span><span class="s1">% of the full dataset.'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training set size: 307048
Testing set size: 76762
Test set is 20% of the full dataset.
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Map-the-USERID-and-UNIQUE_ITEMIDS-fields-to-sequential-integers-for-matrix-processing">
<a class="anchor" href="#Map-the-USERID-and-UNIQUE_ITEMIDS-fields-to-sequential-integers-for-matrix-processing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map the <code>USERID</code> and <code>UNIQUE_ITEMIDS</code> fields to sequential integers for matrix processing<a class="anchor-link" href="#Map-the-USERID-and-UNIQUE_ITEMIDS-fields-to-sequential-integers-for-matrix-processing"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Get int mapping for USERID</span>
<span class="n">u_unique_train</span> <span class="o">=</span> <span class="n">train_data</span><span class="o">.</span><span class="n">USERID</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>  <span class="c1"># create a 'set' (i.e. all unique) list of vals</span>
<span class="n">train_data_user2idx</span> <span class="o">=</span> <span class="p">{</span><span class="n">o</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">u_unique_train</span><span class="p">)}</span>
<span class="c1"># Get int mapping for UNIQUE_ITEMIDS</span>
<span class="n">b_unique_train</span> <span class="o">=</span> <span class="n">train_data</span><span class="o">.</span><span class="n">UNIQUE_ITEMIDS</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>  <span class="c1"># create a 'set' (i.e. all unique) list of vals</span>
<span class="n">train_data_book2idx</span> <span class="o">=</span> <span class="p">{</span><span class="n">o</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">b_unique_train</span><span class="p">)}</span>

<span class="c1">### TESTING SET</span>
<span class="c1"># Get int mapping for USERID</span>
<span class="n">u_unique_test</span> <span class="o">=</span> <span class="n">test_data</span><span class="o">.</span><span class="n">USERID</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>  <span class="c1"># create a 'set' (i.e. all unique) list of vals</span>
<span class="n">test_data_user2idx</span> <span class="o">=</span> <span class="p">{</span><span class="n">o</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">u_unique_test</span><span class="p">)}</span>
<span class="c1"># Get int mapping for UNIQUE_ITEMIDS</span>
<span class="n">b_unique_test</span> <span class="o">=</span> <span class="n">test_data</span><span class="o">.</span><span class="n">UNIQUE_ITEMIDS</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>  <span class="c1"># create a 'set' (i.e. all unique) list of vals</span>
<span class="n">test_data_book2idx</span> <span class="o">=</span> <span class="p">{</span><span class="n">o</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">b_unique_test</span><span class="p">)}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_data</span><span class="p">[</span><span class="s1">'USER_UNIQUE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="s1">'USERID'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">train_data_user2idx</span><span class="p">)</span>
<span class="n">train_data</span><span class="p">[</span><span class="s1">'ITEM_UNIQUE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="s1">'UNIQUE_ITEMIDS'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">train_data_book2idx</span><span class="p">)</span>

<span class="c1">### TESTING SET</span>
<span class="n">test_data</span><span class="p">[</span><span class="s1">'USER_UNIQUE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="s1">'USERID'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">test_data_user2idx</span><span class="p">)</span>
<span class="n">test_data</span><span class="p">[</span><span class="s1">'ITEM_UNIQUE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="s1">'UNIQUE_ITEMIDS'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">test_data_book2idx</span><span class="p">)</span>

<span class="c1">### Convert back to 3-column df</span>
<span class="n">train_data</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[[</span><span class="s1">'USER_UNIQUE'</span><span class="p">,</span> <span class="s1">'ITEM_UNIQUE'</span><span class="p">,</span> <span class="s1">'RATING'</span><span class="p">]]</span>
<span class="n">test_data</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[[</span><span class="s1">'USER_UNIQUE'</span><span class="p">,</span> <span class="s1">'ITEM_UNIQUE'</span><span class="p">,</span> <span class="s1">'RATING'</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>USER_UNIQUE</th>
      <th>ITEM_UNIQUE</th>
      <th>RATING</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>436369</th>
      <td>3013</td>
      <td>41654</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1022064</th>
      <td>59278</td>
      <td>116980</td>
      <td>8</td>
    </tr>
    <tr>
      <th>524738</th>
      <td>6887</td>
      <td>21241</td>
      <td>5</td>
    </tr>
    <tr>
      <th>340428</th>
      <td>2495</td>
      <td>15166</td>
      <td>8</td>
    </tr>
    <tr>
      <th>443166</th>
      <td>11135</td>
      <td>10688</td>
      <td>10</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_data</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>USER_UNIQUE    int64
ITEM_UNIQUE    int64
RATING         int64
dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This dataset is now ready to be processed via a collaborative filtering approach!</p>
<p><strong>Note:</strong> When we need to identify the user or book from the model we'll need to refer back to the <code>train_data_user2idx</code> and <code>train_data_book2idx</code> dictionaries to locate the <code>USERID</code> and <code>UNIQUE_ITEMIDS</code>, respectively.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create user-item matrices</span>
<span class="n">n_users</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="s1">'USER_UNIQUE'</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">n_books</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="s1">'ITEM_UNIQUE'</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

<span class="c1"># First, create an empty matrix of size USERS x BOOKS (this speeds up the later steps)</span>
<span class="n">train_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_users</span><span class="p">,</span> <span class="n">n_books</span><span class="p">))</span>

<span class="c1"># Then, add the appropriate vals to the matrix by extracting them from the df with itertuples</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">train_data</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span> <span class="c1"># entry[1] is the user-id, entry[2] is the book-isbn</span>
    <span class="n">train_matrix</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">entry</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># -1 is to counter 0-based indexing</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_matrix</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(59851, 117107)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now do the same for the test set.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create user-item matrices</span>
<span class="n">n_users</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="s1">'u_unique'</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">n_books</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="s1">'b_unique'</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

<span class="c1"># First, create an empty matrix of size USERS x BOOKS (this speeds up the later steps)</span>
<span class="n">test_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_users</span><span class="p">,</span> <span class="n">n_books</span><span class="p">))</span>

<span class="c1"># Then, add the appropriate vals to the matrix by extracting them from the df with itertuples</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">test_data</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span> <span class="c1"># entry[1] is the user-id, entry[2] is the book-isbn</span>
    <span class="n">test_matrix</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">entry</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># -1 is to counter 0-based indexing</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_matrix</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(26007, 43403)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now the matrix is in the correct format, with the user and book entries encoded from the mapping dict created above!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Calculating-cosine-similarity-with-the-'pairwise-distances'-function">
<a class="anchor" href="#Calculating-cosine-similarity-with-the-'pairwise-distances'-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>Calculating cosine similarity with the 'pairwise distances' function<a class="anchor-link" href="#Calculating-cosine-similarity-with-the-'pairwise-distances'-function"> </a>
</h3>
<p>To determine the similarity between users/items we'll use the 'cosine similarity' which is a common n-dimensional distance metric.</p>
<p><strong>Note:</strong> since all of the rating values are positive (1-10 scale), the cosine distances will all fall between 0 and 1.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_matrix_small</span> <span class="o">=</span> <span class="n">train_matrix</span><span class="p">[:</span><span class="mi">10000</span><span class="p">,</span> <span class="p">:</span><span class="mi">10000</span><span class="p">]</span>
<span class="n">test_matrix_small</span> <span class="o">=</span> <span class="n">test_matrix</span><span class="p">[:</span><span class="mi">10000</span><span class="p">,</span> <span class="p">:</span><span class="mi">10000</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">pairwise_distances</span>
<span class="n">user_similarity</span> <span class="o">=</span> <span class="n">pairwise_distances</span><span class="p">(</span><span class="n">train_matrix_small</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">'cosine'</span><span class="p">)</span>
<span class="n">item_similarity</span> <span class="o">=</span> <span class="n">pairwise_distances</span><span class="p">(</span><span class="n">train_matrix_small</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">'cosine'</span><span class="p">)</span> <span class="c1"># .T transposes the matrix (NumPy)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we are looking at similarity between users we need to account for the average behaviour of that individual user. For example, one user may give all movies quite high ratings, whereas one might give all ratings between 3 and 7. These users might otherwise have quite similar preferences.</p>
<p>To do this, we use the users average rating as a 'weighting' factor.</p>
<p>If we are looking at item-based similarity we don't need to add this weighting factor.</p>
<p>We can incorporate this into a <code>predict()</code> function, like so:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">similarity</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'user'</span><span class="p">):</span> <span class="c1"># default type is 'user'</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">'user'</span><span class="p">:</span>
        <span class="n">mean_user_rating</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># Use np.newaxis so that mean_user_rating has the same format as ratings</span>
        <span class="n">ratings_diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">ratings</span> <span class="o">-</span> <span class="n">mean_user_rating</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">])</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">mean_user_rating</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span> <span class="o">+</span> <span class="n">similarity</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">ratings_diff</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">similarity</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">T</span>
    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">'item'</span><span class="p">:</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">similarity</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">similarity</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">pred</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then can make our predictions!</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">item_prediction</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">train_matrix_small</span><span class="p">,</span> <span class="n">item_similarity</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'item'</span><span class="p">)</span>
<span class="n">user_prediction</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">train_matrix_small</span><span class="p">,</span> <span class="n">user_similarity</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'user'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Evaluation">
<a class="anchor" href="#Evaluation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation<a class="anchor-link" href="#Evaluation"> </a>
</h3>
<p>How do we know if this is making good <code>rating</code> predictions?</p>
<p>We'll start by just taking the root mean squared error (RMSE) (from <code>sklearn</code>) of predicted values in the <code>test_set</code> (i.e. where we know what the answer should be).</p>
<p>Since we want to compare only predicted ratings that are in the test set, we can filter out all other predictions that aren't in the test matrix.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="k">def</span> <span class="nf">rmse</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">):</span>
    <span class="n">prediction</span> <span class="o">=</span> <span class="n">prediction</span><span class="p">[</span><span class="n">test_matrix</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">test_matrix</span> <span class="o">=</span> <span class="n">test_matrix</span><span class="p">[</span><span class="n">test_matrix</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">))</span>

<span class="c1"># Call on test set to get error from each approach ('user' or 'item')</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'User-based CF RMSE: </span><span class="si">{</span><span class="n">rmse</span><span class="p">(</span><span class="n">user_prediction</span><span class="p">,</span> <span class="n">test_matrix_small</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Item-based CF RMSE: </span><span class="si">{</span><span class="n">rmse</span><span class="p">(</span><span class="n">item_prediction</span><span class="p">,</span> <span class="n">test_matrix_small</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>User-based CF RMSE: 7.929926397008533
Item-based CF RMSE: 7.930326958653732
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For the user-item and the item-item recommendations we get RMSE = 7.85 (MSE &gt; 60) for both. This is pretty bad, but we only trained over a small subset of the data.</p>
<p>Although this collaborative filtering setup is relatively simple to write, it doesn't scale very well at all, as it is all stored in memory! (Hence why we only used a subset of the training/testing data).</p>
<hr>
<p>Instead, we should really use a model-based (based on matrix factorization) recommendation algorithm. These are inherently more scalable and can deal with higher sparsity level than memory-based models, and are considered more powerful due to their ability to pick up on "latent factors" in the relationships between what sets of items users like. However, they still suffer from the "cold start" problem (where a new user has no history).</p>
<p>Fortunately, there is a Python library called <code>surprise</code> that was built specifically for the implementation of model-based recommendation systems! This library comes with many of the leading algorithms in this space already built-in. Let's try use it for our book recommender system.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Using-the-surprise-library-for-building-a-recommender-system">
<a class="anchor" href="#Using-the-surprise-library-for-building-a-recommender-system" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the <code>surprise</code> library for building a recommender system<a class="anchor-link" href="#Using-the-surprise-library-for-building-a-recommender-system"> </a>
</h1>
<p>Several common model-based algorithms including SVD, KNN, and non-negative matrix factorization are built-in!<br>
See <a href="http://surprise.readthedocs.io/en/stable/getting_started.html#basic-usage">here</a> for the docs.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Dataset</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_item_rating</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1"># take a look at our data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>unique_isbn</th>
      <th>book_rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>276726</td>
      <td>0155061224</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>276729</td>
      <td>052165615X</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>276729</td>
      <td>0521795028</td>
      <td>6</td>
    </tr>
    <tr>
      <th>8</th>
      <td>276744</td>
      <td>038550120X</td>
      <td>7</td>
    </tr>
    <tr>
      <th>16</th>
      <td>276747</td>
      <td>0060517794</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">rating_scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Load the data into a 'Dataset' object directly from the pandas df.</span>
<span class="c1"># Note: The fields must be in the order: user, item, rating</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load_from_df</span><span class="p">(</span><span class="n">user_item_rating</span><span class="p">,</span> <span class="n">reader</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">SVD</span><span class="p">,</span> <span class="n">NMF</span><span class="p">,</span> <span class="n">model_selection</span><span class="p">,</span> <span class="n">accuracy</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Where: SVD = Singular Value Decomposition (orthogonal factorization), NMF = Non-negative Matrix Factorization.</p>
<p><strong>Note</strong> that when using the <code>surprise</code> library we don't need to manually create the mapping of USERID and UNIQUE_ITEMIDS to integers in a custom dict. See <a href="http://surprise.readthedocs.io/en/stable/FAQ.html#raw-inner-note">here</a> for details.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="SVD-model">
<a class="anchor" href="#SVD-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>SVD model<a class="anchor-link" href="#SVD-model"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Using cross-validation (5 folds)</em></strong></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">()</span>

<span class="c1"># Train on books dataset</span>
<span class="o">%</span><span class="k">time</span> model_selection.cross_validate(model, data, measures=['RMSE'], cv=5, verbose=True)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Evaluating RMSE of algorithm SVD on 5 split(s).

                  Fold 1  Fold 2  Fold 3  Fold 4  Fold 5  Mean    Std     
RMSE (testset)    1.6379  1.6342  1.6399  1.6333  1.6383  1.6367  0.0025  
Fit time          27.50   29.12   28.19   28.50   27.17   28.09   0.70    
Test time         1.26    1.28    1.25    1.07    1.22    1.22    0.07    
CPU times: user 2min 32s, sys: 1.44 s, total: 2min 33s
Wall time: 2min 34s
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'fit_time': (27.502967834472656,
  29.117522954940796,
  28.18734574317932,
  28.497459888458252,
  27.168857097625732),
 'test_rmse': array([1.63792973, 1.63415582, 1.63987213, 1.63326894, 1.63828638]),
 'test_time': (1.2554690837860107,
  1.2811057567596436,
  1.2533769607543945,
  1.0734889507293701,
  1.2155327796936035)}</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The SVD model gives an average RMSE of ca. 1.64 after 5-folds, with a fit time of ca. 28 s for each fold.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Using test-train split</em></strong></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span> <span class="o">=</span> <span class="n">model_selection</span><span class="o">.</span><span class="n">train_test_split</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># Instantiate the SVD model.</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">()</span>

<span class="c1"># Train the algorithm on the training set, and predict ratings for the test set</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">trainset</span><span class="p">)</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">testset</span><span class="p">)</span>

<span class="c1"># Then compute RMSE</span>
<span class="n">accuracy</span><span class="o">.</span><span class="n">rmse</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>RMSE: 1.6355
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1.635463484151215</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using a 80% train-test split, the SVD model gave a RMSE of 1.6426.</p>
<hr>
<p>We can see that using the SVD algorithm has already far out-performed the memory-based collaborative filtering approach (RMSE of 1.64 vs 7.92)!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="NMF-model">
<a class="anchor" href="#NMF-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>NMF model<a class="anchor-link" href="#NMF-model"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">NMF</span><span class="p">()</span>
<span class="c1"># Train on books dataset</span>
<span class="o">%</span><span class="k">time</span> model_selection.cross_validate(model, data, measures=['RMSE'], cv=5, verbose=True)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Evaluating RMSE of algorithm NMF on 5 split(s).

                  Fold 1  Fold 2  Fold 3  Fold 4  Fold 5  Mean    Std     
RMSE (testset)    2.4719  2.4753  2.4991  2.4583  2.4690  2.4747  0.0134  
Fit time          48.55   48.36   48.67   48.21   49.12   48.58   0.31    
Test time         1.00    1.22    1.24    0.89    1.27    1.12    0.15    
CPU times: user 4min 12s, sys: 2.77 s, total: 4min 15s
Wall time: 4min 15s
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'fit_time': (48.549073934555054,
  48.363773822784424,
  48.67202186584473,
  48.2091269493103,
  49.12370300292969),
 'test_rmse': array([2.47190526, 2.47525086, 2.49908596, 2.45830639, 2.46903139]),
 'test_time': (0.9956762790679932,
  1.2233927249908447,
  1.2397921085357666,
  0.8911020755767822,
  1.2676730155944824)}</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The NMF model gave a mean RMSE of ca. 2.47, with a fit time of ca. 48 s.</p>
<p>It seems like the SVD algorithm is the best choice for this dataset.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Optimizing-the-SVD-algorithm-with-parameter-tuning">
<a class="anchor" href="#Optimizing-the-SVD-algorithm-with-parameter-tuning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optimizing the SVD algorithm with parameter tuning<a class="anchor-link" href="#Optimizing-the-SVD-algorithm-with-parameter-tuning"> </a>
</h2>
<p>Since it seems like the SVD algorithm is our best choice, let's see if we can improve the predictions even further by optimizing some of the algorithm hyperparameters.</p>
<p>One way of doing this is to use the handy <code>GridSearchCV</code> method from the <code>surprise</code> library. When passed a range of hyperparameter values, <code>GridSearchCV</code> will automatically search through the parameter-space to find the best-performing set of hyperparameters.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span> <span class="o">=</span> <span class="n">model_selection</span><span class="o">.</span><span class="n">train_test_split</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise.model_selection</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>

<span class="n">param_grid</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'n_factors'</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">],</span> <span class="s1">'lr_all'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">],</span> <span class="s1">'reg_all'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">]}</span>

<span class="c1"># Optimize SVD algorithm for both root mean squared error ('rmse') and mean average error ('mae')</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">SVD</span><span class="p">,</span> <span class="n">param_grid</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">'rmse'</span><span class="p">,</span> <span class="s1">'mae'</span><span class="p">],</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">time</span> gs.fit(data)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 34min 9s, sys: 10.8 s, total: 34min 20s
Wall time: 34min 29s
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">best_estimator</span><span class="p">[</span><span class="s1">'rmse'</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">gs</span><span class="o">.</span><span class="n">best_score</span><span class="p">[</span><span class="s1">'rmse'</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gs</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">'rmse'</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1.6376613092691847
{'n_factors': 80, 'lr_all': 0.005, 'reg_all': 0.04}
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_selection</span><span class="o">.</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">'rmse'</span><span class="p">,</span> <span class="s1">'mae'</span><span class="p">],</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Evaluating RMSE, MAE of algorithm SVD on 5 split(s).

                  Fold 1  Fold 2  Fold 3  Fold 4  Fold 5  Mean    Std     
RMSE (testset)    1.6326  1.6292  1.6314  1.6323  1.6296  1.6310  0.0014  
MAE (testset)     1.2594  1.2612  1.2611  1.2587  1.2563  1.2593  0.0018  
Fit time          25.22   24.25   24.24   24.00   24.18   24.38   0.43    
Test time         1.08    1.46    1.46    1.05    1.04    1.22    0.20    
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'fit_time': (25.217539072036743,
  24.249317169189453,
  24.235455989837646,
  24.002593994140625,
  24.184158086776733),
 'test_mae': array([1.25944594, 1.26118138, 1.2610566 , 1.25867174, 1.25627505]),
 'test_rmse': array([1.63260117, 1.6291625 , 1.63136824, 1.63232568, 1.62957994]),
 'test_time': (1.0834269523620605,
  1.4560067653656006,
  1.464034080505371,
  1.0514049530029297,
  1.0434091091156006)}</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The mean RSME using the optimized parameters was 1.6351 over 5 folds, with an average fit time of ca. 24s.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">(</span><span class="n">n_factors</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">lr_all</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">reg_all</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">trainset</span><span class="p">)</span> <span class="c1"># re-fit on only the training data using the best hyperparameters</span>
<span class="n">test_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">testset</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"SVD : Test Set"</span><span class="p">)</span>
<span class="n">accuracy</span><span class="o">.</span><span class="n">rmse</span><span class="p">(</span><span class="n">test_pred</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>SVD : Test Set
RMSE: 1.6287
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1.6287348933888393</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using the optimized hyperparameters we see a slight improvement in the resulting RMSE (1.629) compared with the unoptimized SVD algorithm (1.635)1</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Testing-some-of-the-outputs-(ratings-and-recommendations)">
<a class="anchor" href="#Testing-some-of-the-outputs-(ratings-and-recommendations)" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing some of the outputs (ratings and recommendations)<a class="anchor-link" href="#Testing-some-of-the-outputs-(ratings-and-recommendations)"> </a>
</h2>
<p>Would like to do an intuitive check of some of the recommendations being made.</p>
<p>Let's just choose a random user/book pair (represented in the <code>suprise</code> library as <code>uid</code> and <code>iid</code>, respectively).</p>
<p><strong>Note:</strong> The <code>model</code> being used here is the optimized SVD algorithm that has been fit on the training set.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">uid</span> <span class="o">=</span> <span class="mi">276744</span>  <span class="c1"># the USERID int</span>
<span class="n">iid</span> <span class="o">=</span> <span class="s1">'038550120X'</span> <span class="c1"># the UNIQUE_ITEMIDS string</span>
<span class="c1"># This pair has an actual rating of 7!</span>

<span class="n">pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">iid</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>user: 276744     item: 038550120X r_ui = None   est = 7.18   {'was_impossible': False}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Can access the attributes of the <code>predict</code> method to get a nicer output.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The estimated rating for the book with the "UNIQUE_ITEMIDS" code </span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">iid</span><span class="si">}</span><span class="s1"> from user #</span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">est</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">.</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="n">actual_rtg</span> <span class="o">=</span> <span class="n">user_item_rating</span><span class="p">[(</span><span class="n">user_item_rating</span><span class="o">.</span><span class="n">USERID</span><span class="o">==</span><span class="n">pred</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">user_item_rating</span><span class="o">.</span><span class="n">UNIQUE_ITEMIDS</span><span class="o">==</span><span class="n">pred</span><span class="o">.</span><span class="n">iid</span><span class="p">)]</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The real rating given for this was </span><span class="si">{</span><span class="n">actual_rtg</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The estimated rating for the book with the "unique_isbn" code 038550120X from user #276744 is 7.18.

The real rating given for this was 7.00.
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">uid</span> <span class="o">=</span> <span class="mi">95095</span>  <span class="c1"># the USERID int</span>
<span class="n">iid</span> <span class="o">=</span> <span class="s1">'0140079963'</span> <span class="c1"># the UNIQUE_ITEMIDS string</span>
<span class="c1"># This pair has an actual rating of 6.0!</span>

<span class="n">pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">iid</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>user: 95095      item: 0140079963 r_ui = None   est = 6.87   {'was_impossible': False}
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The estimated rating for the book with the "UNIQUE_ITEMIDS" code </span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">iid</span><span class="si">}</span><span class="s1"> from user #</span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">pred</span><span class="o">.</span><span class="n">est</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">.</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="n">actual_rtg</span> <span class="o">=</span> <span class="n">user_item_rating</span><span class="p">[(</span><span class="n">user_item_rating</span><span class="o">.</span><span class="n">USERID</span><span class="o">==</span><span class="n">pred</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">user_item_rating</span><span class="o">.</span><span class="n">UNIQUE_ITEMIDS</span><span class="o">==</span><span class="n">pred</span><span class="o">.</span><span class="n">iid</span><span class="p">)]</span><span class="o">.</span><span class="n">RATING</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The real rating given for this was </span><span class="si">{</span><span class="n">actual_rtg</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The estimated rating for the book with the "unique_isbn" code 0140079963 from user #95095 is 6.87.

The real rating given for this was 6.00.
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following function was adapted from the <code>surprise</code> docs, and can be used to get the top book recommendations for each user.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="k">def</span> <span class="nf">get_top_n</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">'''Return the top-N recommendation for each user from a set of predictions.</span>

<span class="sd">    Args:</span>
<span class="sd">        predictions(list of Prediction objects): The list of predictions, as</span>
<span class="sd">            returned by the test method of an algorithm.</span>
<span class="sd">        n(int): The number of recommendation to output for each user. Default</span>
<span class="sd">            is 10.</span>

<span class="sd">    Returns:</span>
<span class="sd">    A dict where keys are user (raw) ids and values are lists of tuples:</span>
<span class="sd">        [(raw item id, rating estimation), ...] of size n.</span>
<span class="sd">    '''</span>

    <span class="c1"># First map the predictions to each user.</span>
    <span class="n">top_n</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">iid</span><span class="p">,</span> <span class="n">true_r</span><span class="p">,</span> <span class="n">est</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">predictions</span><span class="p">:</span>
        <span class="n">top_n</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">iid</span><span class="p">,</span> <span class="n">est</span><span class="p">))</span>

    <span class="c1"># Then sort the predictions for each user and retrieve the k highest ones.</span>
    <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">user_ratings</span> <span class="ow">in</span> <span class="n">top_n</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">user_ratings</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">top_n</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_ratings</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>
        
    <span class="k">return</span> <span class="n">top_n</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's get the Top 10 recommended books for each USERID in the test set.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">testset</span><span class="p">)</span>
<span class="n">top_n</span> <span class="o">=</span> <span class="n">get_top_n</span><span class="p">(</span><span class="n">pred</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_reading_list</span><span class="p">(</span><span class="n">userid</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Retrieve full book titles from full 'books_users_ratings' dataframe</span>
<span class="sd">    """</span>
    <span class="n">reading_list</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">top_n</span> <span class="o">=</span> <span class="n">get_top_n</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">top_n</span><span class="p">[</span><span class="n">userid</span><span class="p">]:</span>
        <span class="n">book</span><span class="p">,</span> <span class="n">rating</span> <span class="o">=</span> <span class="n">n</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">books_users_ratings</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">books_users_ratings</span><span class="o">.</span><span class="n">UNIQUE_ITEMIDS</span><span class="o">==</span><span class="n">book</span><span class="p">]</span><span class="o">.</span><span class="n">TITLE</span><span class="o">.</span><span class="n">unique</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">reading_list</span><span class="p">[</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">rating</span>
    <span class="k">return</span> <span class="n">reading_list</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_reading_list</span> <span class="o">=</span> <span class="n">get_reading_list</span><span class="p">(</span><span class="n">userid</span><span class="o">=</span><span class="mi">60337</span><span class="p">)</span>
<span class="k">for</span> <span class="n">book</span><span class="p">,</span> <span class="n">rating</span> <span class="ow">in</span> <span class="n">example_reading_list</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">book</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">rating</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>A Natural History of the Senses: 9.124985146110324
Grace For The Moment: 9.004232452533614
Eva Luna: 8.957717816714606
A Slender Thread : Rediscovering Hope at the Heart of Crisis: 8.81756023683983
Tell Me the Truth About Love: Ten Poems: 8.729204207356146
Papa, My Father: A Celebration of Dads: 8.708985984501158
Let the Dead Bury Their Dead (Harvest American Writing Series): 8.646273705729296
The Doctor's Book of Home Remedies : Thousands of Tips and Techniques Anyone Can Use to Heal Everyday Health Problems: 8.635645117795315
Why We Cant Wait: 8.535174763005822
Lump It or Leave It: 8.535174763005822
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Have tried out a few different <code>userid</code> entries (from the <code>testset</code>) to see what the top 10 books that user would like are and they seem pretty well related, indicating that the recommendation engine is performing reasonably well!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Summary">
<a class="anchor" href="#Summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary<a class="anchor-link" href="#Summary"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this notebook a dataset from the 'Book-Crossing' website was used to create a recommendation system. A few different approaches were investigated, including memory-based correlations, and model-based matrix factorization algorithms[2]. Of these, the latter - and particularly the Singular Value Decomposition (SVD) algorithm - gave the best performance as assessed by comparing the predicted book ratings for a given user with the actual rating in a test set that the model was not trained on.</p>
<p>The only fields that were used for the model were the "user ID", "book ID", and "rating". There were others available in the dataset, such as "age", "location", "publisher", "year published", etc, however for these types of recommendation systems it has often been found that additional data fields do not increase the accuracy of the models significantly[1]. A "Grid Search Cross Validation" method was used to optimize some of the hyperparameters for the model, resulting in a slight improvement in model performance from the default values.</p>
<p>Finally, we were able to build a recommender that could predict the 10 most likely book titles to be rated highly by a given user.</p>
<p>It should be noted that this approach still suffers from the "cold start problem"[3] - that is, for users with no ratings or history the model will not make accurate predictions. One way we could tackle this problem may be to initially start with popularity-based recommendations, before building up enough user history to implement the model. Another piece of data that was not utilised in the current investigation was the "implicit" ratings - denoted as those with a rating of "0" in the dataset. Although more information about these implicit ratings (for example, does it represent a positive or negative interaction), these might be useful for supplementing the "explicit" ratings recommender.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="References">
<a class="anchor" href="#References" aria-hidden="true"><span class="octicon octicon-link"></span></a>References<a class="anchor-link" href="#References"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><a href="http://blog.ethanrosenthal.com/2015/11/02/intro-to-collaborative-filtering/">http://blog.ethanrosenthal.com/2015/11/02/intro-to-collaborative-filtering/</a></li>
<li><a href="https://cambridgespark.com/content/tutorials/implementing-your-own-recommender-systems-in-Python/index.html">https://cambridgespark.com/content/tutorials/implementing-your-own-recommender-systems-in-Python/index.html</a></li>
<li><a href="https://towardsdatascience.com/building-a-recommendation-system-for-fragrance-5b00de3829da">https://towardsdatascience.com/building-a-recommendation-system-for-fragrance-5b00de3829da</a></li>
</ol>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="recohut/notebook"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/surprise/svd/nmf/book/2021/07/01/book-crossing-surprise-svd-nmf.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Jupyter notebook database.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/recohut" target="_blank" title="recohut"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
